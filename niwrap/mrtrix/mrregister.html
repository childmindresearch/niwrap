<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.5.1"/>
    <title>niwrap.mrtrix.mrregister API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}@media (prefers-color-scheme:dark){pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#49483e}.pdoc-code{background:#272822; color:#f8f8f2}.pdoc-code .c{color:#75715e}.pdoc-code .err{color:#960050; background-color:#1e0010}.pdoc-code .esc{color:#f8f8f2}.pdoc-code .g{color:#f8f8f2}.pdoc-code .k{color:#66d9ef}.pdoc-code .l{color:#ae81ff}.pdoc-code .n{color:#f8f8f2}.pdoc-code .o{color:#f92672}.pdoc-code .x{color:#f8f8f2}.pdoc-code .p{color:#f8f8f2}.pdoc-code .ch{color:#75715e}.pdoc-code .cm{color:#75715e}.pdoc-code .cp{color:#75715e}.pdoc-code .cpf{color:#75715e}.pdoc-code .c1{color:#75715e}.pdoc-code .cs{color:#75715e}.pdoc-code .gd{color:#f92672}.pdoc-code .ge{color:#f8f8f2; font-style:italic}.pdoc-code .gr{color:#f8f8f2}.pdoc-code .gh{color:#f8f8f2}.pdoc-code .gi{color:#a6e22e}.pdoc-code .go{color:#66d9ef}.pdoc-code .gp{color:#f92672; font-weight:bold}.pdoc-code .gs{color:#f8f8f2; font-weight:bold}.pdoc-code .gu{color:#75715e}.pdoc-code .gt{color:#f8f8f2}.pdoc-code .kc{color:#66d9ef}.pdoc-code .kd{color:#66d9ef}.pdoc-code .kn{color:#f92672}.pdoc-code .kp{color:#66d9ef}.pdoc-code .kr{color:#66d9ef}.pdoc-code .kt{color:#66d9ef}.pdoc-code .ld{color:#e6db74}.pdoc-code .m{color:#ae81ff}.pdoc-code .s{color:#e6db74}.pdoc-code .na{color:#a6e22e}.pdoc-code .nb{color:#f8f8f2}.pdoc-code .nc{color:#a6e22e}.pdoc-code .no{color:#66d9ef}.pdoc-code .nd{color:#a6e22e}.pdoc-code .ni{color:#f8f8f2}.pdoc-code .ne{color:#a6e22e}.pdoc-code .nf{color:#a6e22e}.pdoc-code .nl{color:#f8f8f2}.pdoc-code .nn{color:#f8f8f2}.pdoc-code .nx{color:#a6e22e}.pdoc-code .py{color:#f8f8f2}.pdoc-code .nt{color:#f92672}.pdoc-code .nv{color:#f8f8f2}.pdoc-code .ow{color:#f92672}.pdoc-code .w{color:#f8f8f2}.pdoc-code .mb{color:#ae81ff}.pdoc-code .mf{color:#ae81ff}.pdoc-code .mh{color:#ae81ff}.pdoc-code .mi{color:#ae81ff}.pdoc-code .mo{color:#ae81ff}.pdoc-code .sa{color:#e6db74}.pdoc-code .sb{color:#e6db74}.pdoc-code .sc{color:#e6db74}.pdoc-code .dl{color:#e6db74}.pdoc-code .sd{color:#e6db74}.pdoc-code .s2{color:#e6db74}.pdoc-code .se{color:#ae81ff}.pdoc-code .sh{color:#e6db74}.pdoc-code .si{color:#e6db74}.pdoc-code .sx{color:#e6db74}.pdoc-code .sr{color:#e6db74}.pdoc-code .s1{color:#e6db74}.pdoc-code .ss{color:#e6db74}.pdoc-code .bp{color:#f8f8f2}.pdoc-code .fm{color:#a6e22e}.pdoc-code .vc{color:#f8f8f2}.pdoc-code .vg{color:#f8f8f2}.pdoc-code .vi{color:#f8f8f2}.pdoc-code .vm{color:#f8f8f2}}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}@media (prefers-color-scheme:dark){:root{--pdoc-background:#212529;}.pdoc{--text:#f7f7f7;--muted:#9d9d9d;--link:#58a6ff;--link-hover:#3989ff;--code:#333;--active:#555;--accent:#343434;--accent2:#555;--nav-hover:rgba(0, 0, 0, 0.1);--name:#77C1FF;--def:#0cdd0c;--annotation:#00c037;}}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../mrtrix.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;niwrap.mrtrix</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="variable" href="#MRREGISTER_METADATA">MRREGISTER_METADATA</a>
            </li>
            <li>
                    <a class="class" href="#MrregisterConfig">MrregisterConfig</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MrregisterConfig.__init__">MrregisterConfig</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterConfig.key">key</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterConfig.value">value</a>
                        </li>
                        <li>
                                <a class="function" href="#MrregisterConfig.run">run</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#MrregisterNlWarp">MrregisterNlWarp</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MrregisterNlWarp.__init__">MrregisterNlWarp</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterNlWarp.warp1">warp1</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterNlWarp.warp2">warp2</a>
                        </li>
                        <li>
                                <a class="function" href="#MrregisterNlWarp.run">run</a>
                        </li>
                        <li>
                                <a class="function" href="#MrregisterNlWarp.outputs">outputs</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#MrregisterNlWarpOutputs">MrregisterNlWarpOutputs</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MrregisterNlWarpOutputs.__init__">MrregisterNlWarpOutputs</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterNlWarpOutputs.root">root</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterNlWarpOutputs.warp1">warp1</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterNlWarpOutputs.warp2">warp2</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#MrregisterOutputs">MrregisterOutputs</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MrregisterOutputs.__init__">MrregisterOutputs</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterOutputs.root">root</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterOutputs.rigid">rigid</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterOutputs.rigid_1tomidway">rigid_1tomidway</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterOutputs.rigid_2tomidway">rigid_2tomidway</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterOutputs.rigid_log">rigid_log</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterOutputs.affine">affine</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterOutputs.affine_1tomidway">affine_1tomidway</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterOutputs.affine_2tomidway">affine_2tomidway</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterOutputs.affine_log">affine_log</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterOutputs.nl_warp_full">nl_warp_full</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterOutputs.transformed">transformed</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterOutputs.transformed_midway">transformed_midway</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterOutputs.nl_warp">nl_warp</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#MrregisterTransformed">MrregisterTransformed</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MrregisterTransformed.__init__">MrregisterTransformed</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterTransformed.image">image</a>
                        </li>
                        <li>
                                <a class="function" href="#MrregisterTransformed.run">run</a>
                        </li>
                        <li>
                                <a class="function" href="#MrregisterTransformed.outputs">outputs</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#MrregisterTransformedMidway">MrregisterTransformedMidway</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MrregisterTransformedMidway.__init__">MrregisterTransformedMidway</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterTransformedMidway.image1_transformed">image1_transformed</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterTransformedMidway.image2_transformed">image2_transformed</a>
                        </li>
                        <li>
                                <a class="function" href="#MrregisterTransformedMidway.run">run</a>
                        </li>
                        <li>
                                <a class="function" href="#MrregisterTransformedMidway.outputs">outputs</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#MrregisterTransformedMidwayOutputs">MrregisterTransformedMidwayOutputs</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MrregisterTransformedMidwayOutputs.__init__">MrregisterTransformedMidwayOutputs</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterTransformedMidwayOutputs.root">root</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterTransformedMidwayOutputs.image1_transformed">image1_transformed</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterTransformedMidwayOutputs.image2_transformed">image2_transformed</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#MrregisterTransformedOutputs">MrregisterTransformedOutputs</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MrregisterTransformedOutputs.__init__">MrregisterTransformedOutputs</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterTransformedOutputs.root">root</a>
                        </li>
                        <li>
                                <a class="variable" href="#MrregisterTransformedOutputs.image">image</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#mrregister">mrregister</a>
            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../../niwrap.html">niwrap</a><wbr>.<a href="./../mrtrix.html">mrtrix</a><wbr>.mrregister    </h1>

                
                        <input id="mod-mrregister-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-mrregister-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="c1"># This file was auto generated by Styx.</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="c1"># Do not edit this file directly.</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="kn">from</span> <span class="nn">styxdefs</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="kn">import</span> <span class="nn">dataclasses</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="kn">import</span> <span class="nn">pathlib</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="kn">import</span> <span class="nn">typing</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="n">MRREGISTER_METADATA</span> <span class="o">=</span> <span class="n">Metadata</span><span class="p">(</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a>    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;4bce13eb5fbbd96692b058d0897d2db5df05b140&quot;</span><span class="p">,</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;mrregister&quot;</span><span class="p">,</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a>    <span class="n">container_image_type</span><span class="o">=</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a>    <span class="n">container_image_tag</span><span class="o">=</span><span class="s2">&quot;mrtrix3/mrtrix3:3.0.4&quot;</span><span class="p">,</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="p">)</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="k">class</span> <span class="nc">MrregisterTransformedOutputs</span><span class="p">(</span><span class="n">typing</span><span class="o">.</span><span class="n">NamedTuple</span><span class="p">):</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="sd">    Output object returned when calling `MrregisterTransformed.run(...)`.</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a>    <span class="n">root</span><span class="p">:</span> <span class="n">OutputPathType</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Output root folder. This is the root folder for all outputs.&quot;&quot;&quot;</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a>    <span class="n">image</span><span class="p">:</span> <span class="n">OutputPathType</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;image1 after registration transformed and regridded to the space of image2. Note that -transformed needs to be repeated for each contrast if multi-contrast registration is used.&quot;&quot;&quot;</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a><span class="k">class</span> <span class="nc">MrregisterTransformed</span><span class="p">:</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="sd">    image1 after registration transformed and regridded to the space of image2. Note that -transformed needs to be repeated for each contrast if multi-contrast registration is used.</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a>    <span class="n">image</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;image1 after registration transformed and regridded to the space of</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a><span class="sd">    image2. Note that -transformed needs to be repeated for each contrast if</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="sd">    multi-contrast registration is used.&quot;&quot;&quot;</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a>    
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a><span class="sd">        Build command line arguments. This method is called by the main command.</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a><span class="sd">        </span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="sd">        Args:</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a><span class="sd">        Returns:</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a><span class="sd">            </span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a>        <span class="n">cargs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-transformed&quot;</span><span class="p">)</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">)</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a>        <span class="k">return</span> <span class="n">cargs</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a>    
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a>    <span class="k">def</span> <span class="nf">outputs</span><span class="p">(</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MrregisterTransformedOutputs</span><span class="p">:</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="sd">        Collect output file paths.</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="sd">        </span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="sd">        Args:</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a><span class="sd">        Returns:</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="sd">            NamedTuple of outputs (described in `MrregisterTransformedOutputs`).</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a>        <span class="n">ret</span> <span class="o">=</span> <span class="n">MrregisterTransformedOutputs</span><span class="p">(</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a>            <span class="n">root</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">),</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a>            <span class="n">image</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a>        <span class="p">)</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a>        <span class="k">return</span> <span class="n">ret</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a><span class="k">class</span> <span class="nc">MrregisterTransformedMidwayOutputs</span><span class="p">(</span><span class="n">typing</span><span class="o">.</span><span class="n">NamedTuple</span><span class="p">):</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a><span class="sd">    Output object returned when calling `MrregisterTransformedMidway.run(...)`.</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a>    <span class="n">root</span><span class="p">:</span> <span class="n">OutputPathType</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Output root folder. This is the root folder for all outputs.&quot;&quot;&quot;</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a>    <span class="n">image1_transformed</span><span class="p">:</span> <span class="n">OutputPathType</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;image1 and image2 after registration transformed and regridded to the midway space. Note that -transformed_midway needs to be repeated for each contrast if multi-contrast registration is used.&quot;&quot;&quot;</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a>    <span class="n">image2_transformed</span><span class="p">:</span> <span class="n">OutputPathType</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;image1 and image2 after registration transformed and regridded to the midway space. Note that -transformed_midway needs to be repeated for each contrast if multi-contrast registration is used.&quot;&quot;&quot;</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a><span class="k">class</span> <span class="nc">MrregisterTransformedMidway</span><span class="p">:</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a><span class="sd">    image1 and image2 after registration transformed and regridded to the midway space. Note that -transformed_midway needs to be repeated for each contrast if multi-contrast registration is used.</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a>    <span class="n">image1_transformed</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;image1 and image2 after registration transformed and regridded to the</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a><span class="sd">    midway space. Note that -transformed_midway needs to be repeated for each</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a><span class="sd">    contrast if multi-contrast registration is used.&quot;&quot;&quot;</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a>    <span class="n">image2_transformed</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;image1 and image2 after registration transformed and regridded to the</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a><span class="sd">    midway space. Note that -transformed_midway needs to be repeated for each</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a><span class="sd">    contrast if multi-contrast registration is used.&quot;&quot;&quot;</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a>    
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a><span class="sd">        Build command line arguments. This method is called by the main command.</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a><span class="sd">        </span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a><span class="sd">        Args:</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a><span class="sd">        Returns:</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a><span class="sd">            </span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a>        <span class="n">cargs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-transformed_midway&quot;</span><span class="p">)</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image1_transformed</span><span class="p">)</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image2_transformed</span><span class="p">)</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a>        <span class="k">return</span> <span class="n">cargs</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a>    
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a>    <span class="k">def</span> <span class="nf">outputs</span><span class="p">(</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MrregisterTransformedMidwayOutputs</span><span class="p">:</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a><span class="sd">        Collect output file paths.</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a><span class="sd">        </span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a><span class="sd">        Args:</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a><span class="sd">        Returns:</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a><span class="sd">            NamedTuple of outputs (described in `MrregisterTransformedMidwayOutputs`).</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a>        <span class="n">ret</span> <span class="o">=</span> <span class="n">MrregisterTransformedMidwayOutputs</span><span class="p">(</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a>            <span class="n">root</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">),</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a>            <span class="n">image1_transformed</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">image1_transformed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a>            <span class="n">image2_transformed</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">image2_transformed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>        <span class="p">)</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a>        <span class="k">return</span> <span class="n">ret</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a><span class="k">class</span> <span class="nc">MrregisterNlWarpOutputs</span><span class="p">(</span><span class="n">typing</span><span class="o">.</span><span class="n">NamedTuple</span><span class="p">):</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a><span class="sd">    Output object returned when calling `MrregisterNlWarp.run(...)`.</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>    <span class="n">root</span><span class="p">:</span> <span class="n">OutputPathType</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Output root folder. This is the root folder for all outputs.&quot;&quot;&quot;</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a>    <span class="n">warp1</span><span class="p">:</span> <span class="n">OutputPathType</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;the non-linear warp output defined as two deformation fields, where warp1 can be used to transform image1-&gt;image2 and warp2 to transform image2-&gt;image1. The deformation fields also encapsulate any linear transformation estimated prior to non-linear registration.&quot;&quot;&quot;</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>    <span class="n">warp2</span><span class="p">:</span> <span class="n">OutputPathType</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;the non-linear warp output defined as two deformation fields, where warp1 can be used to transform image1-&gt;image2 and warp2 to transform image2-&gt;image1. The deformation fields also encapsulate any linear transformation estimated prior to non-linear registration.&quot;&quot;&quot;</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a><span class="k">class</span> <span class="nc">MrregisterNlWarp</span><span class="p">:</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a><span class="sd">    the non-linear warp output defined as two deformation fields, where warp1 can be used to transform image1-&gt;image2 and warp2 to transform image2-&gt;image1. The deformation fields also encapsulate any linear transformation estimated prior to non-linear registration.</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a>    <span class="n">warp1</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;the non-linear warp output defined as two deformation fields, where warp1</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a><span class="sd">    can be used to transform image1-&gt;image2 and warp2 to transform</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a><span class="sd">    image2-&gt;image1. The deformation fields also encapsulate any linear</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a><span class="sd">    transformation estimated prior to non-linear registration.&quot;&quot;&quot;</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a>    <span class="n">warp2</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;the non-linear warp output defined as two deformation fields, where warp1</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a><span class="sd">    can be used to transform image1-&gt;image2 and warp2 to transform</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a><span class="sd">    image2-&gt;image1. The deformation fields also encapsulate any linear</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a><span class="sd">    transformation estimated prior to non-linear registration.&quot;&quot;&quot;</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a>    
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a><span class="sd">        Build command line arguments. This method is called by the main command.</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a><span class="sd">        </span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a><span class="sd">        Args:</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a><span class="sd">        Returns:</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a><span class="sd">            </span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a>        <span class="n">cargs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-nl_warp&quot;</span><span class="p">)</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">warp1</span><span class="p">)</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">warp2</span><span class="p">)</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a>        <span class="k">return</span> <span class="n">cargs</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a>    
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a>    <span class="k">def</span> <span class="nf">outputs</span><span class="p">(</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MrregisterNlWarpOutputs</span><span class="p">:</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a><span class="sd">        Collect output file paths.</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a><span class="sd">        </span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a><span class="sd">        Args:</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a><span class="sd">        Returns:</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a><span class="sd">            NamedTuple of outputs (described in `MrregisterNlWarpOutputs`).</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a>        <span class="n">ret</span> <span class="o">=</span> <span class="n">MrregisterNlWarpOutputs</span><span class="p">(</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a>            <span class="n">root</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">),</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a>            <span class="n">warp1</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">warp1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a>            <span class="n">warp2</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">warp2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a>        <span class="p">)</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a>        <span class="k">return</span> <span class="n">ret</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a><span class="k">class</span> <span class="nc">MrregisterConfig</span><span class="p">:</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a><span class="sd">    temporarily set the value of an MRtrix config file entry.</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a>    <span class="n">key</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;temporarily set the value of an MRtrix config file entry.&quot;&quot;&quot;</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a>    <span class="n">value</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;temporarily set the value of an MRtrix config file entry.&quot;&quot;&quot;</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a>    
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a><span class="sd">        Build command line arguments. This method is called by the main command.</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a><span class="sd">        </span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a><span class="sd">        Args:</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a><span class="sd">        Returns:</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a><span class="sd">            </span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a>        <span class="n">cargs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-config&quot;</span><span class="p">)</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a>        <span class="k">return</span> <span class="n">cargs</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a><span class="k">class</span> <span class="nc">MrregisterOutputs</span><span class="p">(</span><span class="n">typing</span><span class="o">.</span><span class="n">NamedTuple</span><span class="p">):</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a><span class="sd">    Output object returned when calling `mrregister(...)`.</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a>    <span class="n">root</span><span class="p">:</span> <span class="n">OutputPathType</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Output root folder. This is the root folder for all outputs.&quot;&quot;&quot;</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>    <span class="n">rigid</span><span class="p">:</span> <span class="n">OutputPathType</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;the output text file containing the rigid transformation as a 4x4 matrix &quot;&quot;&quot;</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a>    <span class="n">rigid_1tomidway</span><span class="p">:</span> <span class="n">OutputPathType</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;the output text file containing the rigid transformation that aligns image1 to image2 in their common midway space as a 4x4 matrix &quot;&quot;&quot;</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a>    <span class="n">rigid_2tomidway</span><span class="p">:</span> <span class="n">OutputPathType</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;the output text file containing the rigid transformation that aligns image2 to image1 in their common midway space as a 4x4 matrix &quot;&quot;&quot;</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a>    <span class="n">rigid_log</span><span class="p">:</span> <span class="n">OutputPathType</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;write gradient descent parameter evolution to log file &quot;&quot;&quot;</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a>    <span class="n">affine</span><span class="p">:</span> <span class="n">OutputPathType</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;the output text file containing the affine transformation as a 4x4 matrix &quot;&quot;&quot;</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a>    <span class="n">affine_1tomidway</span><span class="p">:</span> <span class="n">OutputPathType</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;the output text file containing the affine transformation that aligns image1 to image2 in their common midway space as a 4x4 matrix &quot;&quot;&quot;</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a>    <span class="n">affine_2tomidway</span><span class="p">:</span> <span class="n">OutputPathType</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;the output text file containing the affine transformation that aligns image2 to image1 in their common midway space as a 4x4 matrix &quot;&quot;&quot;</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a>    <span class="n">affine_log</span><span class="p">:</span> <span class="n">OutputPathType</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;write gradient descent parameter evolution to log file &quot;&quot;&quot;</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a>    <span class="n">nl_warp_full</span><span class="p">:</span> <span class="n">OutputPathType</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;output all warps used during registration. This saves four different warps that map each image to a midway space and their inverses in a single 5D image file. The 4th image dimension indexes the x,y,z component of the deformation vector and the 5th dimension indexes the field in this order: image1-&gt;midway, midway-&gt;image1, image2-&gt;midway, midway-&gt;image2. Where image1-&gt;midway defines the field that maps image1 onto the midway space using the reverse convention When linear registration is performed first, the estimated linear transform will be included in the comments of the image header, and therefore the entire linear and non-linear transform can be applied (in either direction) using this output warp file with mrtransform &quot;&quot;&quot;</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>    <span class="n">transformed</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">MrregisterTransformedOutputs</span><span class="p">]</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Subcommand outputs&quot;&quot;&quot;</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a>    <span class="n">transformed_midway</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">MrregisterTransformedMidwayOutputs</span><span class="p">]</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Subcommand outputs&quot;&quot;&quot;</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a>    <span class="n">nl_warp</span><span class="p">:</span> <span class="n">MrregisterNlWarpOutputs</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Subcommand outputs&quot;&quot;&quot;</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a><span class="k">def</span> <span class="nf">mrregister</span><span class="p">(</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a>    <span class="n">image1_image2</span><span class="p">:</span> <span class="n">InputPathType</span><span class="p">,</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a>    <span class="n">contrast1_contrast2</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">InputPathType</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a>    <span class="n">type_</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a>    <span class="n">transformed</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">MrregisterTransformed</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a>    <span class="n">transformed_midway</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">MrregisterTransformedMidway</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a>    <span class="n">mask1</span><span class="p">:</span> <span class="n">InputPathType</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a>    <span class="n">mask2</span><span class="p">:</span> <span class="n">InputPathType</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a>    <span class="n">nan</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a>    <span class="n">rigid</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a>    <span class="n">rigid_1tomidway</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a>    <span class="n">rigid_2tomidway</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a>    <span class="n">rigid_init_translation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a>    <span class="n">rigid_init_rotation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>    <span class="n">rigid_init_matrix</span><span class="p">:</span> <span class="n">InputPathType</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a>    <span class="n">rigid_scale</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a>    <span class="n">rigid_niter</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a>    <span class="n">rigid_metric</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a>    <span class="n">rigid_metric_diff_estimator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a>    <span class="n">rigid_lmax</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a>    <span class="n">rigid_log</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a>    <span class="n">affine</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a>    <span class="n">affine_1tomidway</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a>    <span class="n">affine_2tomidway</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a>    <span class="n">affine_init_translation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a>    <span class="n">affine_init_rotation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a>    <span class="n">affine_init_matrix</span><span class="p">:</span> <span class="n">InputPathType</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a>    <span class="n">affine_scale</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a>    <span class="n">affine_niter</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a>    <span class="n">affine_metric</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a>    <span class="n">affine_metric_diff_estimator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a>    <span class="n">affine_lmax</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a>    <span class="n">affine_log</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a>    <span class="n">init_translation_unmasked1</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a>    <span class="n">init_translation_unmasked2</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a>    <span class="n">init_rotation_unmasked1</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a>    <span class="n">init_rotation_unmasked2</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a>    <span class="n">init_rotation_search_angles</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a>    <span class="n">init_rotation_search_scale</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a>    <span class="n">init_rotation_search_directions</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a>    <span class="n">init_rotation_search_run_global</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a>    <span class="n">init_rotation_search_global_iterations</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a>    <span class="n">linstage_iterations</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a>    <span class="n">linstage_optimiser_first</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a>    <span class="n">linstage_optimiser_last</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a>    <span class="n">linstage_optimiser_default</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a>    <span class="n">linstage_diagnostics_prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a>    <span class="n">nl_warp</span><span class="p">:</span> <span class="n">MrregisterNlWarp</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a>    <span class="n">nl_warp_full</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a>    <span class="n">nl_init</span><span class="p">:</span> <span class="n">InputPathType</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a>    <span class="n">nl_scale</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a>    <span class="n">nl_niter</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a>    <span class="n">nl_update_smooth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a>    <span class="n">nl_disp_smooth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a>    <span class="n">nl_grad_step</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a>    <span class="n">nl_lmax</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a>    <span class="n">diagnostics_image</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a>    <span class="n">directions</span><span class="p">:</span> <span class="n">InputPathType</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a>    <span class="n">noreorientation</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a>    <span class="n">mc_weights</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a>    <span class="n">datatype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a>    <span class="n">info</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a>    <span class="n">quiet</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a>    <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a>    <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a>    <span class="n">nthreads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a>    <span class="n">config</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">MrregisterConfig</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a>    <span class="n">help_</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a>    <span class="n">version</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a>    <span class="n">runner</span><span class="p">:</span> <span class="n">Runner</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MrregisterOutputs</span><span class="p">:</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a><span class="sd">    mrregister by David Raffelt (david.raffelt@florey.edu.au) &amp; Max Pietsch</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a><span class="sd">    (maximilian.pietsch@kcl.ac.uk).</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a><span class="sd">    </span>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a><span class="sd">    Register two images together using a symmetric rigid, affine or non-linear</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a><span class="sd">    transformation model.</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a><span class="sd">    </span>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a><span class="sd">    By default this application will perform an affine, followed by non-linear</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a><span class="sd">    registration.</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a><span class="sd">    </span>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a><span class="sd">    FOD registration (with apodised point spread reorientation) will be</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a><span class="sd">    performed by default if the number of volumes in the 4th dimension equals</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a><span class="sd">    the number of coefficients in an antipodally symmetric spherical harmonic</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a><span class="sd">    series (e.g. 6, 15, 28 etc). The -no_reorientation option can be used to</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a><span class="sd">    force reorientation off if required.</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a><span class="sd">    </span>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a><span class="sd">    Non-linear registration computes warps to map from both image1-&gt;image2 and</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a><span class="sd">    image2-&gt;image1. Similar to Avants (2008) Med Image Anal. 12(1): 26–41,</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a><span class="sd">    registration is performed by matching both the image1 and image2 in a</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a><span class="sd">    &#39;midway space&#39;. Warps can be saved as two deformation fields that map</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a><span class="sd">    directly between image1-&gt;image2 and image2-&gt;image1, or if using</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a><span class="sd">    -nl_warp_full as a single 5D file that stores all 4 warps</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a><span class="sd">    image1-&gt;mid-&gt;image2, and image2-&gt;mid-&gt;image1. The 5D warp format stores</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a><span class="sd">    x,y,z deformations in the 4th dimension, and uses the 5th dimension to index</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a><span class="sd">    the 4 warps. The affine transforms estimated (to midway space) are also</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a><span class="sd">    stored as comments in the image header. The 5D warp file can be used to</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a><span class="sd">    reinitialise subsequent registrations, in addition to transforming images to</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a><span class="sd">    midway space (e.g. for intra-subject alignment in a 2-time-point</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a><span class="sd">    longitudinal analysis).</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a><span class="sd">    </span>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a><span class="sd">    References:</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a><span class="sd">    </span>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a><span class="sd">    * If FOD registration is being performed:</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a><span class="sd">    Raffelt, D.; Tournier, J.-D.; Fripp, J; Crozier, S.; Connelly, A. &amp; Salvado,</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos">376</span></a><span class="sd">    O. Symmetric diffeomorphic registration of fibre orientation distributions.</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos">377</span></a><span class="sd">    NeuroImage, 2011, 56(3), 1171-1180</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos">378</span></a><span class="sd">    </span>
</span><span id="L-379"><a href="#L-379"><span class="linenos">379</span></a><span class="sd">    Raffelt, D.; Tournier, J.-D.; Crozier, S.; Connelly, A. &amp; Salvado, O.</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos">380</span></a><span class="sd">    Reorientation of fiber orientation distributions using apodized point spread</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos">381</span></a><span class="sd">    functions. Magnetic Resonance in Medicine, 2012, 67, 844-855.</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos">382</span></a><span class="sd">    </span>
</span><span id="L-383"><a href="#L-383"><span class="linenos">383</span></a><span class="sd">    More information:</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos">384</span></a><span class="sd">    https://mrtrix.readthedocs.io/en/latest/reference/commands/mrregister.html</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos">385</span></a><span class="sd">    </span>
</span><span id="L-386"><a href="#L-386"><span class="linenos">386</span></a><span class="sd">    Args:</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos">387</span></a><span class="sd">        image1_image2: input image 1 (&#39;moving&#39;) and input image 2 (&#39;template&#39;).</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos">388</span></a><span class="sd">        contrast1_contrast2: optional list of additional input images used as\</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos">389</span></a><span class="sd">            additional contrasts. Can be used multiple times. contrastX and imageX\</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos">390</span></a><span class="sd">            must share the same coordinate system.</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos">391</span></a><span class="sd">        type_: the registration type. Valid choices are: rigid, affine,\</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos">392</span></a><span class="sd">            nonlinear, rigid_affine, rigid_nonlinear, affine_nonlinear,\</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos">393</span></a><span class="sd">            rigid_affine_nonlinear (Default: affine_nonlinear).</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos">394</span></a><span class="sd">        transformed: image1 after registration transformed and regridded to the\</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos">395</span></a><span class="sd">            space of image2. Note that -transformed needs to be repeated for each\</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos">396</span></a><span class="sd">            contrast if multi-contrast registration is used.</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos">397</span></a><span class="sd">        transformed_midway: image1 and image2 after registration transformed\</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos">398</span></a><span class="sd">            and regridded to the midway space. Note that -transformed_midway needs\</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos">399</span></a><span class="sd">            to be repeated for each contrast if multi-contrast registration is\</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos">400</span></a><span class="sd">            used.</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos">401</span></a><span class="sd">        mask1: a mask to define the region of image1 to use for optimisation.</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos">402</span></a><span class="sd">        mask2: a mask to define the region of image2 to use for optimisation.</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos">403</span></a><span class="sd">        nan: use NaN as out of bounds value. (Default: 0.0).</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos">404</span></a><span class="sd">        rigid: the output text file containing the rigid transformation as a\</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos">405</span></a><span class="sd">            4x4 matrix.</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos">406</span></a><span class="sd">        rigid_1tomidway: the output text file containing the rigid\</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos">407</span></a><span class="sd">            transformation that aligns image1 to image2 in their common midway\</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos">408</span></a><span class="sd">            space as a 4x4 matrix.</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos">409</span></a><span class="sd">        rigid_2tomidway: the output text file containing the rigid\</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos">410</span></a><span class="sd">            transformation that aligns image2 to image1 in their common midway\</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos">411</span></a><span class="sd">            space as a 4x4 matrix.</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos">412</span></a><span class="sd">        rigid_init_translation: initialise the translation and centre of\</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos">413</span></a><span class="sd">            rotation\</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos">414</span></a><span class="sd">            Valid choices are:\</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos">415</span></a><span class="sd">            mass (aligns the centers of mass of both images, default),\</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos">416</span></a><span class="sd">            geometric (aligns geometric image centres) and none.</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos">417</span></a><span class="sd">        rigid_init_rotation: initialise the rotation Valid choices are:\</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos">418</span></a><span class="sd">            search (search for the best rotation using mean squared residuals),\</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos">419</span></a><span class="sd">            moments (rotation based on directions of intensity variance with\</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos">420</span></a><span class="sd">            respect to centre of mass),\</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos">421</span></a><span class="sd">            none (default).</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos">422</span></a><span class="sd">        rigid_init_matrix: initialise either the rigid, affine, or syn\</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos">423</span></a><span class="sd">            registration with the supplied rigid transformation (as a 4x4 matrix in\</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos">424</span></a><span class="sd">            scanner coordinates). Note that this overrides rigid_init_translation\</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos">425</span></a><span class="sd">            and rigid_init_rotation initialisation.</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos">426</span></a><span class="sd">        rigid_scale: use a multi-resolution scheme by defining a scale factor\</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos">427</span></a><span class="sd">            for each level using comma separated values (Default: 0.25,0.5,1.0).</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos">428</span></a><span class="sd">        rigid_niter: the maximum number of gradient descent iterations per\</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos">429</span></a><span class="sd">            stage. This can be specified either as a single number for all\</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos">430</span></a><span class="sd">            multi-resolution levels, or a single value for each level. (Default:\</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos">431</span></a><span class="sd">            1000).</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos">432</span></a><span class="sd">        rigid_metric: valid choices are: diff (intensity differences), Default:\</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos">433</span></a><span class="sd">            diff.</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos">434</span></a><span class="sd">        rigid_metric_diff_estimator: Valid choices are: l1 (least absolute:\</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos">435</span></a><span class="sd">            |x|), l2 (ordinary least squares), lp (least powers: |x|^1.2), Default:\</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos">436</span></a><span class="sd">            l2.</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos">437</span></a><span class="sd">        rigid_lmax: explicitly set the lmax to be used per scale factor in\</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos">438</span></a><span class="sd">            rigid FOD registration. By default FOD registration will use lmax 0,2,4\</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos">439</span></a><span class="sd">            with default scale factors 0.25,0.5,1.0 respectively. Note that no\</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos">440</span></a><span class="sd">            reorientation will be performed with lmax = 0.</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos">441</span></a><span class="sd">        rigid_log: write gradient descent parameter evolution to log file.</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos">442</span></a><span class="sd">        affine: the output text file containing the affine transformation as a\</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos">443</span></a><span class="sd">            4x4 matrix.</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos">444</span></a><span class="sd">        affine_1tomidway: the output text file containing the affine\</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos">445</span></a><span class="sd">            transformation that aligns image1 to image2 in their common midway\</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos">446</span></a><span class="sd">            space as a 4x4 matrix.</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos">447</span></a><span class="sd">        affine_2tomidway: the output text file containing the affine\</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos">448</span></a><span class="sd">            transformation that aligns image2 to image1 in their common midway\</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos">449</span></a><span class="sd">            space as a 4x4 matrix.</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos">450</span></a><span class="sd">        affine_init_translation: initialise the translation and centre of\</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos">451</span></a><span class="sd">            rotation\</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos">452</span></a><span class="sd">            Valid choices are:\</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos">453</span></a><span class="sd">            mass (aligns the centers of mass of both images),\</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos">454</span></a><span class="sd">            geometric (aligns geometric image centres) and none. (Default:\</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos">455</span></a><span class="sd">            mass).</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos">456</span></a><span class="sd">        affine_init_rotation: initialise the rotation Valid choices are:\</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos">457</span></a><span class="sd">            search (search for the best rotation using mean squared residuals),\</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos">458</span></a><span class="sd">            moments (rotation based on directions of intensity variance with\</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos">459</span></a><span class="sd">            respect to centre of mass),\</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos">460</span></a><span class="sd">            none (Default: none).</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos">461</span></a><span class="sd">        affine_init_matrix: initialise either the affine, or syn registration\</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos">462</span></a><span class="sd">            with the supplied affine transformation (as a 4x4 matrix in scanner\</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos">463</span></a><span class="sd">            coordinates). Note that this overrides affine_init_translation and\</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos">464</span></a><span class="sd">            affine_init_rotation initialisation.</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos">465</span></a><span class="sd">        affine_scale: use a multi-resolution scheme by defining a scale factor\</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos">466</span></a><span class="sd">            for each level using comma separated values (Default: 0.25,0.5,1.0).</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos">467</span></a><span class="sd">        affine_niter: the maximum number of gradient descent iterations per\</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos">468</span></a><span class="sd">            stage. This can be specified either as a single number for all\</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos">469</span></a><span class="sd">            multi-resolution levels, or a single value for each level. (Default:\</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos">470</span></a><span class="sd">            1000).</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos">471</span></a><span class="sd">        affine_metric: valid choices are: diff (intensity differences),\</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos">472</span></a><span class="sd">            Default: diff.</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos">473</span></a><span class="sd">        affine_metric_diff_estimator: Valid choices are: l1 (least absolute:\</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos">474</span></a><span class="sd">            |x|), l2 (ordinary least squares), lp (least powers: |x|^1.2), Default:\</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos">475</span></a><span class="sd">            l2.</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos">476</span></a><span class="sd">        affine_lmax: explicitly set the lmax to be used per scale factor in\</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos">477</span></a><span class="sd">            affine FOD registration. By default FOD registration will use lmax\</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos">478</span></a><span class="sd">            0,2,4 with default scale factors 0.25,0.5,1.0 respectively. Note that\</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos">479</span></a><span class="sd">            no reorientation will be performed with lmax = 0.</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos">480</span></a><span class="sd">        affine_log: write gradient descent parameter evolution to log file.</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos">481</span></a><span class="sd">        init_translation_unmasked1: disregard mask1 for the translation\</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos">482</span></a><span class="sd">            initialisation (affects &#39;mass&#39;).</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos">483</span></a><span class="sd">        init_translation_unmasked2: disregard mask2 for the translation\</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos">484</span></a><span class="sd">            initialisation (affects &#39;mass&#39;).</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos">485</span></a><span class="sd">        init_rotation_unmasked1: disregard mask1 for the rotation\</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos">486</span></a><span class="sd">            initialisation (affects &#39;search&#39; and &#39;moments&#39;).</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos">487</span></a><span class="sd">        init_rotation_unmasked2: disregard mask2 for the rotation\</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos">488</span></a><span class="sd">            initialisation (affects &#39;search&#39; and &#39;moments&#39;).</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos">489</span></a><span class="sd">        init_rotation_search_angles: rotation angles for the local search in\</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos">490</span></a><span class="sd">            degrees between 0 and 180. (Default: 2,5,10,15,20).</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos">491</span></a><span class="sd">        init_rotation_search_scale: relative size of the images used for the\</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos">492</span></a><span class="sd">            rotation search. (Default: 0.15).</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos">493</span></a><span class="sd">        init_rotation_search_directions: number of rotation axis for local\</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos">494</span></a><span class="sd">            search. (Default: 250).</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos">495</span></a><span class="sd">        init_rotation_search_run_global: perform a global search. (Default:\</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos">496</span></a><span class="sd">            local).</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos">497</span></a><span class="sd">        init_rotation_search_global_iterations: number of rotations to\</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos">498</span></a><span class="sd">            investigate (Default: 10000).</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos">499</span></a><span class="sd">        linstage_iterations: number of iterations for each registration stage,\</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos">500</span></a><span class="sd">            not to be confused with -rigid_niter or -affine_niter. This can be used\</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos">501</span></a><span class="sd">            to generate intermediate diagnostics images\</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos">502</span></a><span class="sd">            (-linstage.diagnostics.prefix) or to change the cost function optimiser\</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos">503</span></a><span class="sd">            during registration (without the need to repeatedly resize the images).\</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos">504</span></a><span class="sd">            (Default: 1 == no repetition).</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos">505</span></a><span class="sd">        linstage_optimiser_first: Cost function optimisation algorithm to use\</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos">506</span></a><span class="sd">            at first iteration of all stages. Valid choices: bbgd (Barzilai-Borwein\</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos">507</span></a><span class="sd">            gradient descent) or gd (simple gradient descent). (Default: bbgd).</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos">508</span></a><span class="sd">        linstage_optimiser_last: Cost function optimisation algorithm to use at\</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos">509</span></a><span class="sd">            last iteration of all stages (if there are more than one). Valid\</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos">510</span></a><span class="sd">            choices: bbgd (Barzilai-Borwein gradient descent) or gd (simple\</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos">511</span></a><span class="sd">            gradient descent). (Default: bbgd).</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos">512</span></a><span class="sd">        linstage_optimiser_default: Cost function optimisation algorithm to use\</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos">513</span></a><span class="sd">            at any stage iteration other than first or last iteration. Valid\</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos">514</span></a><span class="sd">            choices: bbgd (Barzilai-Borwein gradient descent) or gd (simple\</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos">515</span></a><span class="sd">            gradient descent). (Default: bbgd).</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos">516</span></a><span class="sd">        linstage_diagnostics_prefix: generate diagnostics images after every\</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos">517</span></a><span class="sd">            registration stage.</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos">518</span></a><span class="sd">        nl_warp: the non-linear warp output defined as two deformation fields,\</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos">519</span></a><span class="sd">            where warp1 can be used to transform image1-&gt;image2 and warp2 to\</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos">520</span></a><span class="sd">            transform image2-&gt;image1. The deformation fields also encapsulate any\</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos">521</span></a><span class="sd">            linear transformation estimated prior to non-linear registration.</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos">522</span></a><span class="sd">        nl_warp_full: output all warps used during registration. This saves\</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos">523</span></a><span class="sd">            four different warps that map each image to a midway space and their\</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos">524</span></a><span class="sd">            inverses in a single 5D image file. The 4th image dimension indexes the\</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos">525</span></a><span class="sd">            x,y,z component of the deformation vector and the 5th dimension indexes\</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos">526</span></a><span class="sd">            the field in this order: image1-&gt;midway, midway-&gt;image1,\</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos">527</span></a><span class="sd">            image2-&gt;midway, midway-&gt;image2. Where image1-&gt;midway defines the field\</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos">528</span></a><span class="sd">            that maps image1 onto the midway space using the reverse convention\</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos">529</span></a><span class="sd">            When linear registration is performed first, the estimated linear\</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos">530</span></a><span class="sd">            transform will be included in the comments of the image header, and\</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos">531</span></a><span class="sd">            therefore the entire linear and non-linear transform can be applied (in\</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos">532</span></a><span class="sd">            either direction) using this output warp file with mrtransform.</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos">533</span></a><span class="sd">        nl_init: initialise the non-linear registration with the supplied warp\</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos">534</span></a><span class="sd">            image. The supplied warp must be in the same format as output using the\</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos">535</span></a><span class="sd">            -nl_warp_full option (i.e. have 4 deformation fields with the linear\</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos">536</span></a><span class="sd">            transforms in the image header).</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos">537</span></a><span class="sd">        nl_scale: use a multi-resolution scheme by defining a scale factor for\</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos">538</span></a><span class="sd">            each level using comma separated values (Default: 0.25,0.5,1.0).</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos">539</span></a><span class="sd">        nl_niter: the maximum number of iterations. This can be specified\</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos">540</span></a><span class="sd">            either as a single number for all multi-resolution levels, or a single\</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos">541</span></a><span class="sd">            value for each level. (Default: 50).</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos">542</span></a><span class="sd">        nl_update_smooth: regularise the gradient update field with Gaussian\</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos">543</span></a><span class="sd">            smoothing (standard deviation in voxel units, Default 2.0).</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos">544</span></a><span class="sd">        nl_disp_smooth: regularise the displacement field with Gaussian\</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos">545</span></a><span class="sd">            smoothing (standard deviation in voxel units, Default 1.0).</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos">546</span></a><span class="sd">        nl_grad_step: the gradient step size for non-linear registration\</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos">547</span></a><span class="sd">            (Default: 0.5).</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos">548</span></a><span class="sd">        nl_lmax: explicitly set the lmax to be used per scale factor in\</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos">549</span></a><span class="sd">            non-linear FOD registration. By default FOD registration will use lmax\</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos">550</span></a><span class="sd">            0,2,4 with default scale factors 0.25,0.5,1.0 respectively. Note that\</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos">551</span></a><span class="sd">            no reorientation will be performed with lmax = 0.</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos">552</span></a><span class="sd">        diagnostics_image: write intermediate images for diagnostics purposes.</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos">553</span></a><span class="sd">        directions: the directions used for FOD reorientation using apodised\</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos">554</span></a><span class="sd">            point spread functions (Default: 60 directions).</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos">555</span></a><span class="sd">        noreorientation: turn off FOD reorientation. Reorientation is on by\</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos">556</span></a><span class="sd">            default if the number of volumes in the 4th dimension corresponds to\</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos">557</span></a><span class="sd">            the number of coefficients in an antipodally symmetric spherical\</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos">558</span></a><span class="sd">            harmonic series (i.e. 6, 15, 28, 45, 66 etc).</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos">559</span></a><span class="sd">        mc_weights: relative weight of images used for multi-contrast\</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos">560</span></a><span class="sd">            registration. Default: 1.0 (equal weighting).</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos">561</span></a><span class="sd">        datatype: specify output image data type. Valid choices are: float32,\</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos">562</span></a><span class="sd">            float32le, float32be, float64, float64le, float64be, int64, uint64,\</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos">563</span></a><span class="sd">            int64le, uint64le, int64be, uint64be, int32, uint32, int32le, uint32le,\</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos">564</span></a><span class="sd">            int32be, uint32be, int16, uint16, int16le, uint16le, int16be, uint16be,\</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos">565</span></a><span class="sd">            cfloat32, cfloat32le, cfloat32be, cfloat64, cfloat64le, cfloat64be,\</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos">566</span></a><span class="sd">            int8, uint8, bit.</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos">567</span></a><span class="sd">        info: display information messages.</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos">568</span></a><span class="sd">        quiet: do not display information messages or progress status;\</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos">569</span></a><span class="sd">            alternatively, this can be achieved by setting the MRTRIX_QUIET\</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos">570</span></a><span class="sd">            environment variable to a non-empty string.</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos">571</span></a><span class="sd">        debug: display debugging messages.</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos">572</span></a><span class="sd">        force: force overwrite of output files (caution: using the same file as\</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos">573</span></a><span class="sd">            input and output might cause unexpected behaviour).</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos">574</span></a><span class="sd">        nthreads: use this number of threads in multi-threaded applications\</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos">575</span></a><span class="sd">            (set to 0 to disable multi-threading).</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos">576</span></a><span class="sd">        config: temporarily set the value of an MRtrix config file entry.</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos">577</span></a><span class="sd">        help_: display this information page and exit.</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos">578</span></a><span class="sd">        version: display version information and exit.</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos">579</span></a><span class="sd">        runner: Command runner.</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos">580</span></a><span class="sd">    Returns:</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos">581</span></a><span class="sd">        NamedTuple of outputs (described in `MrregisterOutputs`).</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos">582</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos">583</span></a>    <span class="n">runner</span> <span class="o">=</span> <span class="n">runner</span> <span class="ow">or</span> <span class="n">get_global_runner</span><span class="p">()</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos">584</span></a>    <span class="n">execution</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">start_execution</span><span class="p">(</span><span class="n">MRREGISTER_METADATA</span><span class="p">)</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos">585</span></a>    <span class="n">cargs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos">586</span></a>    <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;mrregister&quot;</span><span class="p">)</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos">587</span></a>    <span class="k">if</span> <span class="n">type_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos">588</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-type&quot;</span><span class="p">,</span> <span class="n">type_</span><span class="p">])</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos">589</span></a>    <span class="k">if</span> <span class="n">transformed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos">590</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">a</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">execution</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">transformed</span><span class="p">]</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">c</span><span class="p">])</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos">591</span></a>    <span class="k">if</span> <span class="n">transformed_midway</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos">592</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">a</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">execution</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">transformed_midway</span><span class="p">]</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">c</span><span class="p">])</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos">593</span></a>    <span class="k">if</span> <span class="n">mask1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos">594</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-mask1&quot;</span><span class="p">,</span> <span class="n">execution</span><span class="o">.</span><span class="n">input_file</span><span class="p">(</span><span class="n">mask1</span><span class="p">)])</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos">595</span></a>    <span class="k">if</span> <span class="n">mask2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos">596</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-mask2&quot;</span><span class="p">,</span> <span class="n">execution</span><span class="o">.</span><span class="n">input_file</span><span class="p">(</span><span class="n">mask2</span><span class="p">)])</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos">597</span></a>    <span class="k">if</span> <span class="n">nan</span><span class="p">:</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos">598</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-nan&quot;</span><span class="p">)</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos">599</span></a>    <span class="k">if</span> <span class="n">rigid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos">600</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid&quot;</span><span class="p">,</span> <span class="n">rigid</span><span class="p">])</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos">601</span></a>    <span class="k">if</span> <span class="n">rigid_1tomidway</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos">602</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_1tomidway&quot;</span><span class="p">,</span> <span class="n">rigid_1tomidway</span><span class="p">])</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos">603</span></a>    <span class="k">if</span> <span class="n">rigid_2tomidway</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos">604</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_2tomidway&quot;</span><span class="p">,</span> <span class="n">rigid_2tomidway</span><span class="p">])</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos">605</span></a>    <span class="k">if</span> <span class="n">rigid_init_translation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos">606</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_init_translation&quot;</span><span class="p">,</span> <span class="n">rigid_init_translation</span><span class="p">])</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos">607</span></a>    <span class="k">if</span> <span class="n">rigid_init_rotation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos">608</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_init_rotation&quot;</span><span class="p">,</span> <span class="n">rigid_init_rotation</span><span class="p">])</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos">609</span></a>    <span class="k">if</span> <span class="n">rigid_init_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos">610</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_init_matrix&quot;</span><span class="p">,</span> <span class="n">execution</span><span class="o">.</span><span class="n">input_file</span><span class="p">(</span><span class="n">rigid_init_matrix</span><span class="p">)])</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos">611</span></a>    <span class="k">if</span> <span class="n">rigid_scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos">612</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_scale&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">rigid_scale</span><span class="p">)])</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos">613</span></a>    <span class="k">if</span> <span class="n">rigid_niter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos">614</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_niter&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">rigid_niter</span><span class="p">)])</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos">615</span></a>    <span class="k">if</span> <span class="n">rigid_metric</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos">616</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_metric&quot;</span><span class="p">,</span> <span class="n">rigid_metric</span><span class="p">])</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos">617</span></a>    <span class="k">if</span> <span class="n">rigid_metric_diff_estimator</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos">618</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_metric.diff.estimator&quot;</span><span class="p">,</span> <span class="n">rigid_metric_diff_estimator</span><span class="p">])</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos">619</span></a>    <span class="k">if</span> <span class="n">rigid_lmax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos">620</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_lmax&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">rigid_lmax</span><span class="p">)])</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos">621</span></a>    <span class="k">if</span> <span class="n">rigid_log</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos">622</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_log&quot;</span><span class="p">,</span> <span class="n">rigid_log</span><span class="p">])</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos">623</span></a>    <span class="k">if</span> <span class="n">affine</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos">624</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine&quot;</span><span class="p">,</span> <span class="n">affine</span><span class="p">])</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos">625</span></a>    <span class="k">if</span> <span class="n">affine_1tomidway</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos">626</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_1tomidway&quot;</span><span class="p">,</span> <span class="n">affine_1tomidway</span><span class="p">])</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos">627</span></a>    <span class="k">if</span> <span class="n">affine_2tomidway</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos">628</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_2tomidway&quot;</span><span class="p">,</span> <span class="n">affine_2tomidway</span><span class="p">])</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos">629</span></a>    <span class="k">if</span> <span class="n">affine_init_translation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos">630</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_init_translation&quot;</span><span class="p">,</span> <span class="n">affine_init_translation</span><span class="p">])</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos">631</span></a>    <span class="k">if</span> <span class="n">affine_init_rotation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos">632</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_init_rotation&quot;</span><span class="p">,</span> <span class="n">affine_init_rotation</span><span class="p">])</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos">633</span></a>    <span class="k">if</span> <span class="n">affine_init_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos">634</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_init_matrix&quot;</span><span class="p">,</span> <span class="n">execution</span><span class="o">.</span><span class="n">input_file</span><span class="p">(</span><span class="n">affine_init_matrix</span><span class="p">)])</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos">635</span></a>    <span class="k">if</span> <span class="n">affine_scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos">636</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_scale&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">affine_scale</span><span class="p">)])</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos">637</span></a>    <span class="k">if</span> <span class="n">affine_niter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos">638</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_niter&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">affine_niter</span><span class="p">)])</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos">639</span></a>    <span class="k">if</span> <span class="n">affine_metric</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos">640</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_metric&quot;</span><span class="p">,</span> <span class="n">affine_metric</span><span class="p">])</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos">641</span></a>    <span class="k">if</span> <span class="n">affine_metric_diff_estimator</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos">642</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_metric.diff.estimator&quot;</span><span class="p">,</span> <span class="n">affine_metric_diff_estimator</span><span class="p">])</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos">643</span></a>    <span class="k">if</span> <span class="n">affine_lmax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos">644</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_lmax&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">affine_lmax</span><span class="p">)])</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos">645</span></a>    <span class="k">if</span> <span class="n">affine_log</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos">646</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_log&quot;</span><span class="p">,</span> <span class="n">affine_log</span><span class="p">])</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos">647</span></a>    <span class="k">if</span> <span class="n">init_translation_unmasked1</span><span class="p">:</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos">648</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-init_translation.unmasked1&quot;</span><span class="p">)</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos">649</span></a>    <span class="k">if</span> <span class="n">init_translation_unmasked2</span><span class="p">:</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos">650</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-init_translation.unmasked2&quot;</span><span class="p">)</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos">651</span></a>    <span class="k">if</span> <span class="n">init_rotation_unmasked1</span><span class="p">:</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos">652</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-init_rotation.unmasked1&quot;</span><span class="p">)</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos">653</span></a>    <span class="k">if</span> <span class="n">init_rotation_unmasked2</span><span class="p">:</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos">654</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-init_rotation.unmasked2&quot;</span><span class="p">)</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos">655</span></a>    <span class="k">if</span> <span class="n">init_rotation_search_angles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos">656</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-init_rotation.search.angles&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">init_rotation_search_angles</span><span class="p">)])</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos">657</span></a>    <span class="k">if</span> <span class="n">init_rotation_search_scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos">658</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-init_rotation.search.scale&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">init_rotation_search_scale</span><span class="p">)])</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos">659</span></a>    <span class="k">if</span> <span class="n">init_rotation_search_directions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos">660</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-init_rotation.search.directions&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">init_rotation_search_directions</span><span class="p">)])</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos">661</span></a>    <span class="k">if</span> <span class="n">init_rotation_search_run_global</span><span class="p">:</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos">662</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-init_rotation.search.run_global&quot;</span><span class="p">)</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos">663</span></a>    <span class="k">if</span> <span class="n">init_rotation_search_global_iterations</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos">664</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-init_rotation.search.global.iterations&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">init_rotation_search_global_iterations</span><span class="p">)])</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos">665</span></a>    <span class="k">if</span> <span class="n">linstage_iterations</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos">666</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-linstage.iterations&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">linstage_iterations</span><span class="p">)])</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos">667</span></a>    <span class="k">if</span> <span class="n">linstage_optimiser_first</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos">668</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-linstage.optimiser.first&quot;</span><span class="p">,</span> <span class="n">linstage_optimiser_first</span><span class="p">])</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos">669</span></a>    <span class="k">if</span> <span class="n">linstage_optimiser_last</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos">670</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-linstage.optimiser.last&quot;</span><span class="p">,</span> <span class="n">linstage_optimiser_last</span><span class="p">])</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos">671</span></a>    <span class="k">if</span> <span class="n">linstage_optimiser_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos">672</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-linstage.optimiser.default&quot;</span><span class="p">,</span> <span class="n">linstage_optimiser_default</span><span class="p">])</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos">673</span></a>    <span class="k">if</span> <span class="n">linstage_diagnostics_prefix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos">674</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-linstage.diagnostics.prefix&quot;</span><span class="p">,</span> <span class="n">linstage_diagnostics_prefix</span><span class="p">])</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos">675</span></a>    <span class="k">if</span> <span class="n">nl_warp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos">676</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">nl_warp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">execution</span><span class="p">))</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos">677</span></a>    <span class="k">if</span> <span class="n">nl_warp_full</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos">678</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-nl_warp_full&quot;</span><span class="p">,</span> <span class="n">nl_warp_full</span><span class="p">])</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos">679</span></a>    <span class="k">if</span> <span class="n">nl_init</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos">680</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-nl_init&quot;</span><span class="p">,</span> <span class="n">execution</span><span class="o">.</span><span class="n">input_file</span><span class="p">(</span><span class="n">nl_init</span><span class="p">)])</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos">681</span></a>    <span class="k">if</span> <span class="n">nl_scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos">682</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-nl_scale&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">nl_scale</span><span class="p">)])</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos">683</span></a>    <span class="k">if</span> <span class="n">nl_niter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos">684</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-nl_niter&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">nl_niter</span><span class="p">)])</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos">685</span></a>    <span class="k">if</span> <span class="n">nl_update_smooth</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos">686</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-nl_update_smooth&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">nl_update_smooth</span><span class="p">)])</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos">687</span></a>    <span class="k">if</span> <span class="n">nl_disp_smooth</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos">688</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-nl_disp_smooth&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">nl_disp_smooth</span><span class="p">)])</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos">689</span></a>    <span class="k">if</span> <span class="n">nl_grad_step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos">690</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-nl_grad_step&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">nl_grad_step</span><span class="p">)])</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos">691</span></a>    <span class="k">if</span> <span class="n">nl_lmax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos">692</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-nl_lmax&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">nl_lmax</span><span class="p">)])</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos">693</span></a>    <span class="k">if</span> <span class="n">diagnostics_image</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos">694</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-diagnostics_image&quot;</span><span class="p">,</span> <span class="n">diagnostics_image</span><span class="p">])</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos">695</span></a>    <span class="k">if</span> <span class="n">directions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos">696</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-directions&quot;</span><span class="p">,</span> <span class="n">execution</span><span class="o">.</span><span class="n">input_file</span><span class="p">(</span><span class="n">directions</span><span class="p">)])</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos">697</span></a>    <span class="k">if</span> <span class="n">noreorientation</span><span class="p">:</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos">698</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-noreorientation&quot;</span><span class="p">)</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos">699</span></a>    <span class="k">if</span> <span class="n">mc_weights</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos">700</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-mc_weights&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">mc_weights</span><span class="p">)])</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos">701</span></a>    <span class="k">if</span> <span class="n">datatype</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos">702</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-datatype&quot;</span><span class="p">,</span> <span class="n">datatype</span><span class="p">])</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos">703</span></a>    <span class="k">if</span> <span class="n">info</span><span class="p">:</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos">704</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-info&quot;</span><span class="p">)</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos">705</span></a>    <span class="k">if</span> <span class="n">quiet</span><span class="p">:</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos">706</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-quiet&quot;</span><span class="p">)</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos">707</span></a>    <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos">708</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-debug&quot;</span><span class="p">)</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos">709</span></a>    <span class="k">if</span> <span class="n">force</span><span class="p">:</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos">710</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-force&quot;</span><span class="p">)</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos">711</span></a>    <span class="k">if</span> <span class="n">nthreads</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos">712</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-nthreads&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">nthreads</span><span class="p">)])</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos">713</span></a>    <span class="k">if</span> <span class="n">config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos">714</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">a</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">execution</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">config</span><span class="p">]</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">c</span><span class="p">])</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos">715</span></a>    <span class="k">if</span> <span class="n">help_</span><span class="p">:</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos">716</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-help&quot;</span><span class="p">)</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos">717</span></a>    <span class="k">if</span> <span class="n">version</span><span class="p">:</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos">718</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-version&quot;</span><span class="p">)</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos">719</span></a>    <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">execution</span><span class="o">.</span><span class="n">input_file</span><span class="p">(</span><span class="n">image1_image2</span><span class="p">))</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos">720</span></a>    <span class="k">if</span> <span class="n">contrast1_contrast2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos">721</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">execution</span><span class="o">.</span><span class="n">input_file</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">contrast1_contrast2</span><span class="p">])</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos">722</span></a>    <span class="n">ret</span> <span class="o">=</span> <span class="n">MrregisterOutputs</span><span class="p">(</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos">723</span></a>        <span class="n">root</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">),</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos">724</span></a>        <span class="n">rigid</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rigid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">rigid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos">725</span></a>        <span class="n">rigid_1tomidway</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rigid_1tomidway</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">rigid_1tomidway</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos">726</span></a>        <span class="n">rigid_2tomidway</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rigid_2tomidway</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">rigid_2tomidway</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos">727</span></a>        <span class="n">rigid_log</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rigid_log</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">rigid_log</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-728"><a href="#L-728"><span class="linenos">728</span></a>        <span class="n">affine</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">affine</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">affine</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos">729</span></a>        <span class="n">affine_1tomidway</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">affine_1tomidway</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">affine_1tomidway</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos">730</span></a>        <span class="n">affine_2tomidway</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">affine_2tomidway</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">affine_2tomidway</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos">731</span></a>        <span class="n">affine_log</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">affine_log</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">affine_log</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos">732</span></a>        <span class="n">nl_warp_full</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">nl_warp_full</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">nl_warp_full</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos">733</span></a>        <span class="n">transformed</span><span class="o">=</span><span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">outputs</span><span class="p">(</span><span class="n">execution</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">transformed</span><span class="p">]</span> <span class="k">if</span> <span class="n">transformed</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos">734</span></a>        <span class="n">transformed_midway</span><span class="o">=</span><span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">outputs</span><span class="p">(</span><span class="n">execution</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">transformed_midway</span><span class="p">]</span> <span class="k">if</span> <span class="n">transformed_midway</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos">735</span></a>        <span class="n">nl_warp</span><span class="o">=</span><span class="n">nl_warp</span><span class="o">.</span><span class="n">outputs</span><span class="p">(</span><span class="n">execution</span><span class="p">)</span> <span class="k">if</span> <span class="n">nl_warp</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos">736</span></a>    <span class="p">)</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos">737</span></a>    <span class="n">execution</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">cargs</span><span class="p">)</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos">738</span></a>    <span class="k">return</span> <span class="n">ret</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos">739</span></a>
</span><span id="L-740"><a href="#L-740"><span class="linenos">740</span></a>
</span><span id="L-741"><a href="#L-741"><span class="linenos">741</span></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos">742</span></a>    <span class="s2">&quot;MRREGISTER_METADATA&quot;</span><span class="p">,</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos">743</span></a>    <span class="s2">&quot;MrregisterConfig&quot;</span><span class="p">,</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos">744</span></a>    <span class="s2">&quot;MrregisterNlWarp&quot;</span><span class="p">,</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos">745</span></a>    <span class="s2">&quot;MrregisterNlWarpOutputs&quot;</span><span class="p">,</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos">746</span></a>    <span class="s2">&quot;MrregisterOutputs&quot;</span><span class="p">,</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos">747</span></a>    <span class="s2">&quot;MrregisterTransformed&quot;</span><span class="p">,</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos">748</span></a>    <span class="s2">&quot;MrregisterTransformedMidway&quot;</span><span class="p">,</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos">749</span></a>    <span class="s2">&quot;MrregisterTransformedMidwayOutputs&quot;</span><span class="p">,</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos">750</span></a>    <span class="s2">&quot;MrregisterTransformedOutputs&quot;</span><span class="p">,</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos">751</span></a>    <span class="s2">&quot;mrregister&quot;</span><span class="p">,</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos">752</span></a><span class="p">]</span>
</span></pre></div>


            </section>
                <section id="MRREGISTER_METADATA">
                    <div class="attr variable">
            <span class="name">MRREGISTER_METADATA</span>        =
<input id="MRREGISTER_METADATA-view-value" class="view-value-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
            <label class="view-value-button pdoc-button" for="MRREGISTER_METADATA-view-value"></label><span class="default_value">Metadata(id=&#39;4bce13eb5fbbd96692b058d0897d2db5df05b140&#39;, name=&#39;mrregister&#39;, container_image_type=&#39;docker&#39;, container_image_tag=&#39;mrtrix3/mrtrix3:3.0.4&#39;, container_image_index=None, container_image_opts=None)</span>

        
    </div>
    <a class="headerlink" href="#MRREGISTER_METADATA"></a>
    
    

                </section>
                <section id="MrregisterConfig">
                            <input id="MrregisterConfig-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclasses.dataclass</div>

    <span class="def">class</span>
    <span class="name">MrregisterConfig</span>:

                <label class="view-source-button" for="MrregisterConfig-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MrregisterConfig"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MrregisterConfig-210"><a href="#MrregisterConfig-210"><span class="linenos">210</span></a><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
</span><span id="MrregisterConfig-211"><a href="#MrregisterConfig-211"><span class="linenos">211</span></a><span class="k">class</span> <span class="nc">MrregisterConfig</span><span class="p">:</span>
</span><span id="MrregisterConfig-212"><a href="#MrregisterConfig-212"><span class="linenos">212</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterConfig-213"><a href="#MrregisterConfig-213"><span class="linenos">213</span></a><span class="sd">    temporarily set the value of an MRtrix config file entry.</span>
</span><span id="MrregisterConfig-214"><a href="#MrregisterConfig-214"><span class="linenos">214</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="MrregisterConfig-215"><a href="#MrregisterConfig-215"><span class="linenos">215</span></a>    <span class="n">key</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="MrregisterConfig-216"><a href="#MrregisterConfig-216"><span class="linenos">216</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;temporarily set the value of an MRtrix config file entry.&quot;&quot;&quot;</span>
</span><span id="MrregisterConfig-217"><a href="#MrregisterConfig-217"><span class="linenos">217</span></a>    <span class="n">value</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="MrregisterConfig-218"><a href="#MrregisterConfig-218"><span class="linenos">218</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;temporarily set the value of an MRtrix config file entry.&quot;&quot;&quot;</span>
</span><span id="MrregisterConfig-219"><a href="#MrregisterConfig-219"><span class="linenos">219</span></a>    
</span><span id="MrregisterConfig-220"><a href="#MrregisterConfig-220"><span class="linenos">220</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
</span><span id="MrregisterConfig-221"><a href="#MrregisterConfig-221"><span class="linenos">221</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MrregisterConfig-222"><a href="#MrregisterConfig-222"><span class="linenos">222</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="MrregisterConfig-223"><a href="#MrregisterConfig-223"><span class="linenos">223</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="MrregisterConfig-224"><a href="#MrregisterConfig-224"><span class="linenos">224</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterConfig-225"><a href="#MrregisterConfig-225"><span class="linenos">225</span></a><span class="sd">        Build command line arguments. This method is called by the main command.</span>
</span><span id="MrregisterConfig-226"><a href="#MrregisterConfig-226"><span class="linenos">226</span></a><span class="sd">        </span>
</span><span id="MrregisterConfig-227"><a href="#MrregisterConfig-227"><span class="linenos">227</span></a><span class="sd">        Args:</span>
</span><span id="MrregisterConfig-228"><a href="#MrregisterConfig-228"><span class="linenos">228</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="MrregisterConfig-229"><a href="#MrregisterConfig-229"><span class="linenos">229</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="MrregisterConfig-230"><a href="#MrregisterConfig-230"><span class="linenos">230</span></a><span class="sd">        Returns:</span>
</span><span id="MrregisterConfig-231"><a href="#MrregisterConfig-231"><span class="linenos">231</span></a><span class="sd">            </span>
</span><span id="MrregisterConfig-232"><a href="#MrregisterConfig-232"><span class="linenos">232</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MrregisterConfig-233"><a href="#MrregisterConfig-233"><span class="linenos">233</span></a>        <span class="n">cargs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MrregisterConfig-234"><a href="#MrregisterConfig-234"><span class="linenos">234</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-config&quot;</span><span class="p">)</span>
</span><span id="MrregisterConfig-235"><a href="#MrregisterConfig-235"><span class="linenos">235</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
</span><span id="MrregisterConfig-236"><a href="#MrregisterConfig-236"><span class="linenos">236</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</span><span id="MrregisterConfig-237"><a href="#MrregisterConfig-237"><span class="linenos">237</span></a>        <span class="k">return</span> <span class="n">cargs</span>
</span></pre></div>


            <div class="docstring"><p>temporarily set the value of an MRtrix config file entry.</p>
</div>


                            <div id="MrregisterConfig.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">MrregisterConfig</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">key</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">value</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#MrregisterConfig.__init__"></a>
    
    

                            </div>
                            <div id="MrregisterConfig.key" class="classattr">
                                <div class="attr variable">
            <span class="name">key</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#MrregisterConfig.key"></a>
    
            <div class="docstring"><p>temporarily set the value of an MRtrix config file entry.</p>
</div>


                            </div>
                            <div id="MrregisterConfig.value" class="classattr">
                                <div class="attr variable">
            <span class="name">value</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#MrregisterConfig.value"></a>
    
            <div class="docstring"><p>temporarily set the value of an MRtrix config file entry.</p>
</div>


                            </div>
                            <div id="MrregisterConfig.run" class="classattr">
                                        <input id="MrregisterConfig.run-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">run</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">execution</span><span class="p">:</span> <span class="n">styxdefs</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Execution</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="MrregisterConfig.run-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MrregisterConfig.run"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MrregisterConfig.run-220"><a href="#MrregisterConfig.run-220"><span class="linenos">220</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
</span><span id="MrregisterConfig.run-221"><a href="#MrregisterConfig.run-221"><span class="linenos">221</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MrregisterConfig.run-222"><a href="#MrregisterConfig.run-222"><span class="linenos">222</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="MrregisterConfig.run-223"><a href="#MrregisterConfig.run-223"><span class="linenos">223</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="MrregisterConfig.run-224"><a href="#MrregisterConfig.run-224"><span class="linenos">224</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterConfig.run-225"><a href="#MrregisterConfig.run-225"><span class="linenos">225</span></a><span class="sd">        Build command line arguments. This method is called by the main command.</span>
</span><span id="MrregisterConfig.run-226"><a href="#MrregisterConfig.run-226"><span class="linenos">226</span></a><span class="sd">        </span>
</span><span id="MrregisterConfig.run-227"><a href="#MrregisterConfig.run-227"><span class="linenos">227</span></a><span class="sd">        Args:</span>
</span><span id="MrregisterConfig.run-228"><a href="#MrregisterConfig.run-228"><span class="linenos">228</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="MrregisterConfig.run-229"><a href="#MrregisterConfig.run-229"><span class="linenos">229</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="MrregisterConfig.run-230"><a href="#MrregisterConfig.run-230"><span class="linenos">230</span></a><span class="sd">        Returns:</span>
</span><span id="MrregisterConfig.run-231"><a href="#MrregisterConfig.run-231"><span class="linenos">231</span></a><span class="sd">            </span>
</span><span id="MrregisterConfig.run-232"><a href="#MrregisterConfig.run-232"><span class="linenos">232</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MrregisterConfig.run-233"><a href="#MrregisterConfig.run-233"><span class="linenos">233</span></a>        <span class="n">cargs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MrregisterConfig.run-234"><a href="#MrregisterConfig.run-234"><span class="linenos">234</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-config&quot;</span><span class="p">)</span>
</span><span id="MrregisterConfig.run-235"><a href="#MrregisterConfig.run-235"><span class="linenos">235</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
</span><span id="MrregisterConfig.run-236"><a href="#MrregisterConfig.run-236"><span class="linenos">236</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</span><span id="MrregisterConfig.run-237"><a href="#MrregisterConfig.run-237"><span class="linenos">237</span></a>        <span class="k">return</span> <span class="n">cargs</span>
</span></pre></div>


            <div class="docstring"><p>Build command line arguments. This method is called by the main command.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>self:</strong>  The sub-command object.</li>
<li><strong>execution:</strong>  The execution object.</li>
</ul>

<p>Returns:</p>
</div>


                            </div>
                </section>
                <section id="MrregisterNlWarp">
                            <input id="MrregisterNlWarp-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclasses.dataclass</div>

    <span class="def">class</span>
    <span class="name">MrregisterNlWarp</span>:

                <label class="view-source-button" for="MrregisterNlWarp-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MrregisterNlWarp"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MrregisterNlWarp-154"><a href="#MrregisterNlWarp-154"><span class="linenos">154</span></a><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
</span><span id="MrregisterNlWarp-155"><a href="#MrregisterNlWarp-155"><span class="linenos">155</span></a><span class="k">class</span> <span class="nc">MrregisterNlWarp</span><span class="p">:</span>
</span><span id="MrregisterNlWarp-156"><a href="#MrregisterNlWarp-156"><span class="linenos">156</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterNlWarp-157"><a href="#MrregisterNlWarp-157"><span class="linenos">157</span></a><span class="sd">    the non-linear warp output defined as two deformation fields, where warp1 can be used to transform image1-&gt;image2 and warp2 to transform image2-&gt;image1. The deformation fields also encapsulate any linear transformation estimated prior to non-linear registration.</span>
</span><span id="MrregisterNlWarp-158"><a href="#MrregisterNlWarp-158"><span class="linenos">158</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="MrregisterNlWarp-159"><a href="#MrregisterNlWarp-159"><span class="linenos">159</span></a>    <span class="n">warp1</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="MrregisterNlWarp-160"><a href="#MrregisterNlWarp-160"><span class="linenos">160</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;the non-linear warp output defined as two deformation fields, where warp1</span>
</span><span id="MrregisterNlWarp-161"><a href="#MrregisterNlWarp-161"><span class="linenos">161</span></a><span class="sd">    can be used to transform image1-&gt;image2 and warp2 to transform</span>
</span><span id="MrregisterNlWarp-162"><a href="#MrregisterNlWarp-162"><span class="linenos">162</span></a><span class="sd">    image2-&gt;image1. The deformation fields also encapsulate any linear</span>
</span><span id="MrregisterNlWarp-163"><a href="#MrregisterNlWarp-163"><span class="linenos">163</span></a><span class="sd">    transformation estimated prior to non-linear registration.&quot;&quot;&quot;</span>
</span><span id="MrregisterNlWarp-164"><a href="#MrregisterNlWarp-164"><span class="linenos">164</span></a>    <span class="n">warp2</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="MrregisterNlWarp-165"><a href="#MrregisterNlWarp-165"><span class="linenos">165</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;the non-linear warp output defined as two deformation fields, where warp1</span>
</span><span id="MrregisterNlWarp-166"><a href="#MrregisterNlWarp-166"><span class="linenos">166</span></a><span class="sd">    can be used to transform image1-&gt;image2 and warp2 to transform</span>
</span><span id="MrregisterNlWarp-167"><a href="#MrregisterNlWarp-167"><span class="linenos">167</span></a><span class="sd">    image2-&gt;image1. The deformation fields also encapsulate any linear</span>
</span><span id="MrregisterNlWarp-168"><a href="#MrregisterNlWarp-168"><span class="linenos">168</span></a><span class="sd">    transformation estimated prior to non-linear registration.&quot;&quot;&quot;</span>
</span><span id="MrregisterNlWarp-169"><a href="#MrregisterNlWarp-169"><span class="linenos">169</span></a>    
</span><span id="MrregisterNlWarp-170"><a href="#MrregisterNlWarp-170"><span class="linenos">170</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
</span><span id="MrregisterNlWarp-171"><a href="#MrregisterNlWarp-171"><span class="linenos">171</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MrregisterNlWarp-172"><a href="#MrregisterNlWarp-172"><span class="linenos">172</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="MrregisterNlWarp-173"><a href="#MrregisterNlWarp-173"><span class="linenos">173</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="MrregisterNlWarp-174"><a href="#MrregisterNlWarp-174"><span class="linenos">174</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterNlWarp-175"><a href="#MrregisterNlWarp-175"><span class="linenos">175</span></a><span class="sd">        Build command line arguments. This method is called by the main command.</span>
</span><span id="MrregisterNlWarp-176"><a href="#MrregisterNlWarp-176"><span class="linenos">176</span></a><span class="sd">        </span>
</span><span id="MrregisterNlWarp-177"><a href="#MrregisterNlWarp-177"><span class="linenos">177</span></a><span class="sd">        Args:</span>
</span><span id="MrregisterNlWarp-178"><a href="#MrregisterNlWarp-178"><span class="linenos">178</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="MrregisterNlWarp-179"><a href="#MrregisterNlWarp-179"><span class="linenos">179</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="MrregisterNlWarp-180"><a href="#MrregisterNlWarp-180"><span class="linenos">180</span></a><span class="sd">        Returns:</span>
</span><span id="MrregisterNlWarp-181"><a href="#MrregisterNlWarp-181"><span class="linenos">181</span></a><span class="sd">            </span>
</span><span id="MrregisterNlWarp-182"><a href="#MrregisterNlWarp-182"><span class="linenos">182</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MrregisterNlWarp-183"><a href="#MrregisterNlWarp-183"><span class="linenos">183</span></a>        <span class="n">cargs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MrregisterNlWarp-184"><a href="#MrregisterNlWarp-184"><span class="linenos">184</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-nl_warp&quot;</span><span class="p">)</span>
</span><span id="MrregisterNlWarp-185"><a href="#MrregisterNlWarp-185"><span class="linenos">185</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">warp1</span><span class="p">)</span>
</span><span id="MrregisterNlWarp-186"><a href="#MrregisterNlWarp-186"><span class="linenos">186</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">warp2</span><span class="p">)</span>
</span><span id="MrregisterNlWarp-187"><a href="#MrregisterNlWarp-187"><span class="linenos">187</span></a>        <span class="k">return</span> <span class="n">cargs</span>
</span><span id="MrregisterNlWarp-188"><a href="#MrregisterNlWarp-188"><span class="linenos">188</span></a>    
</span><span id="MrregisterNlWarp-189"><a href="#MrregisterNlWarp-189"><span class="linenos">189</span></a>    <span class="k">def</span> <span class="nf">outputs</span><span class="p">(</span>
</span><span id="MrregisterNlWarp-190"><a href="#MrregisterNlWarp-190"><span class="linenos">190</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MrregisterNlWarp-191"><a href="#MrregisterNlWarp-191"><span class="linenos">191</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="MrregisterNlWarp-192"><a href="#MrregisterNlWarp-192"><span class="linenos">192</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MrregisterNlWarpOutputs</span><span class="p">:</span>
</span><span id="MrregisterNlWarp-193"><a href="#MrregisterNlWarp-193"><span class="linenos">193</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterNlWarp-194"><a href="#MrregisterNlWarp-194"><span class="linenos">194</span></a><span class="sd">        Collect output file paths.</span>
</span><span id="MrregisterNlWarp-195"><a href="#MrregisterNlWarp-195"><span class="linenos">195</span></a><span class="sd">        </span>
</span><span id="MrregisterNlWarp-196"><a href="#MrregisterNlWarp-196"><span class="linenos">196</span></a><span class="sd">        Args:</span>
</span><span id="MrregisterNlWarp-197"><a href="#MrregisterNlWarp-197"><span class="linenos">197</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="MrregisterNlWarp-198"><a href="#MrregisterNlWarp-198"><span class="linenos">198</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="MrregisterNlWarp-199"><a href="#MrregisterNlWarp-199"><span class="linenos">199</span></a><span class="sd">        Returns:</span>
</span><span id="MrregisterNlWarp-200"><a href="#MrregisterNlWarp-200"><span class="linenos">200</span></a><span class="sd">            NamedTuple of outputs (described in `MrregisterNlWarpOutputs`).</span>
</span><span id="MrregisterNlWarp-201"><a href="#MrregisterNlWarp-201"><span class="linenos">201</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MrregisterNlWarp-202"><a href="#MrregisterNlWarp-202"><span class="linenos">202</span></a>        <span class="n">ret</span> <span class="o">=</span> <span class="n">MrregisterNlWarpOutputs</span><span class="p">(</span>
</span><span id="MrregisterNlWarp-203"><a href="#MrregisterNlWarp-203"><span class="linenos">203</span></a>            <span class="n">root</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">),</span>
</span><span id="MrregisterNlWarp-204"><a href="#MrregisterNlWarp-204"><span class="linenos">204</span></a>            <span class="n">warp1</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">warp1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
</span><span id="MrregisterNlWarp-205"><a href="#MrregisterNlWarp-205"><span class="linenos">205</span></a>            <span class="n">warp2</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">warp2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
</span><span id="MrregisterNlWarp-206"><a href="#MrregisterNlWarp-206"><span class="linenos">206</span></a>        <span class="p">)</span>
</span><span id="MrregisterNlWarp-207"><a href="#MrregisterNlWarp-207"><span class="linenos">207</span></a>        <span class="k">return</span> <span class="n">ret</span>
</span></pre></div>


            <div class="docstring"><p>the non-linear warp output defined as two deformation fields, where warp1 can be used to transform image1->image2 and warp2 to transform image2->image1. The deformation fields also encapsulate any linear transformation estimated prior to non-linear registration.</p>
</div>


                            <div id="MrregisterNlWarp.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">MrregisterNlWarp</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">warp1</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">warp2</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#MrregisterNlWarp.__init__"></a>
    
    

                            </div>
                            <div id="MrregisterNlWarp.warp1" class="classattr">
                                <div class="attr variable">
            <span class="name">warp1</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#MrregisterNlWarp.warp1"></a>
    
            <div class="docstring"><p>the non-linear warp output defined as two deformation fields, where warp1
can be used to transform image1->image2 and warp2 to transform
image2->image1. The deformation fields also encapsulate any linear
transformation estimated prior to non-linear registration.</p>
</div>


                            </div>
                            <div id="MrregisterNlWarp.warp2" class="classattr">
                                <div class="attr variable">
            <span class="name">warp2</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#MrregisterNlWarp.warp2"></a>
    
            <div class="docstring"><p>the non-linear warp output defined as two deformation fields, where warp1
can be used to transform image1->image2 and warp2 to transform
image2->image1. The deformation fields also encapsulate any linear
transformation estimated prior to non-linear registration.</p>
</div>


                            </div>
                            <div id="MrregisterNlWarp.run" class="classattr">
                                        <input id="MrregisterNlWarp.run-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">run</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">execution</span><span class="p">:</span> <span class="n">styxdefs</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Execution</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="MrregisterNlWarp.run-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MrregisterNlWarp.run"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MrregisterNlWarp.run-170"><a href="#MrregisterNlWarp.run-170"><span class="linenos">170</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
</span><span id="MrregisterNlWarp.run-171"><a href="#MrregisterNlWarp.run-171"><span class="linenos">171</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MrregisterNlWarp.run-172"><a href="#MrregisterNlWarp.run-172"><span class="linenos">172</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="MrregisterNlWarp.run-173"><a href="#MrregisterNlWarp.run-173"><span class="linenos">173</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="MrregisterNlWarp.run-174"><a href="#MrregisterNlWarp.run-174"><span class="linenos">174</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterNlWarp.run-175"><a href="#MrregisterNlWarp.run-175"><span class="linenos">175</span></a><span class="sd">        Build command line arguments. This method is called by the main command.</span>
</span><span id="MrregisterNlWarp.run-176"><a href="#MrregisterNlWarp.run-176"><span class="linenos">176</span></a><span class="sd">        </span>
</span><span id="MrregisterNlWarp.run-177"><a href="#MrregisterNlWarp.run-177"><span class="linenos">177</span></a><span class="sd">        Args:</span>
</span><span id="MrregisterNlWarp.run-178"><a href="#MrregisterNlWarp.run-178"><span class="linenos">178</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="MrregisterNlWarp.run-179"><a href="#MrregisterNlWarp.run-179"><span class="linenos">179</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="MrregisterNlWarp.run-180"><a href="#MrregisterNlWarp.run-180"><span class="linenos">180</span></a><span class="sd">        Returns:</span>
</span><span id="MrregisterNlWarp.run-181"><a href="#MrregisterNlWarp.run-181"><span class="linenos">181</span></a><span class="sd">            </span>
</span><span id="MrregisterNlWarp.run-182"><a href="#MrregisterNlWarp.run-182"><span class="linenos">182</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MrregisterNlWarp.run-183"><a href="#MrregisterNlWarp.run-183"><span class="linenos">183</span></a>        <span class="n">cargs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MrregisterNlWarp.run-184"><a href="#MrregisterNlWarp.run-184"><span class="linenos">184</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-nl_warp&quot;</span><span class="p">)</span>
</span><span id="MrregisterNlWarp.run-185"><a href="#MrregisterNlWarp.run-185"><span class="linenos">185</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">warp1</span><span class="p">)</span>
</span><span id="MrregisterNlWarp.run-186"><a href="#MrregisterNlWarp.run-186"><span class="linenos">186</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">warp2</span><span class="p">)</span>
</span><span id="MrregisterNlWarp.run-187"><a href="#MrregisterNlWarp.run-187"><span class="linenos">187</span></a>        <span class="k">return</span> <span class="n">cargs</span>
</span></pre></div>


            <div class="docstring"><p>Build command line arguments. This method is called by the main command.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>self:</strong>  The sub-command object.</li>
<li><strong>execution:</strong>  The execution object.</li>
</ul>

<p>Returns:</p>
</div>


                            </div>
                            <div id="MrregisterNlWarp.outputs" class="classattr">
                                        <input id="MrregisterNlWarp.outputs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">outputs</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">execution</span><span class="p">:</span> <span class="n">styxdefs</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Execution</span></span><span class="return-annotation">) -> <span class="n"><a href="#MrregisterNlWarpOutputs">MrregisterNlWarpOutputs</a></span>:</span></span>

                <label class="view-source-button" for="MrregisterNlWarp.outputs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MrregisterNlWarp.outputs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MrregisterNlWarp.outputs-189"><a href="#MrregisterNlWarp.outputs-189"><span class="linenos">189</span></a>    <span class="k">def</span> <span class="nf">outputs</span><span class="p">(</span>
</span><span id="MrregisterNlWarp.outputs-190"><a href="#MrregisterNlWarp.outputs-190"><span class="linenos">190</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MrregisterNlWarp.outputs-191"><a href="#MrregisterNlWarp.outputs-191"><span class="linenos">191</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="MrregisterNlWarp.outputs-192"><a href="#MrregisterNlWarp.outputs-192"><span class="linenos">192</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MrregisterNlWarpOutputs</span><span class="p">:</span>
</span><span id="MrregisterNlWarp.outputs-193"><a href="#MrregisterNlWarp.outputs-193"><span class="linenos">193</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterNlWarp.outputs-194"><a href="#MrregisterNlWarp.outputs-194"><span class="linenos">194</span></a><span class="sd">        Collect output file paths.</span>
</span><span id="MrregisterNlWarp.outputs-195"><a href="#MrregisterNlWarp.outputs-195"><span class="linenos">195</span></a><span class="sd">        </span>
</span><span id="MrregisterNlWarp.outputs-196"><a href="#MrregisterNlWarp.outputs-196"><span class="linenos">196</span></a><span class="sd">        Args:</span>
</span><span id="MrregisterNlWarp.outputs-197"><a href="#MrregisterNlWarp.outputs-197"><span class="linenos">197</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="MrregisterNlWarp.outputs-198"><a href="#MrregisterNlWarp.outputs-198"><span class="linenos">198</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="MrregisterNlWarp.outputs-199"><a href="#MrregisterNlWarp.outputs-199"><span class="linenos">199</span></a><span class="sd">        Returns:</span>
</span><span id="MrregisterNlWarp.outputs-200"><a href="#MrregisterNlWarp.outputs-200"><span class="linenos">200</span></a><span class="sd">            NamedTuple of outputs (described in `MrregisterNlWarpOutputs`).</span>
</span><span id="MrregisterNlWarp.outputs-201"><a href="#MrregisterNlWarp.outputs-201"><span class="linenos">201</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MrregisterNlWarp.outputs-202"><a href="#MrregisterNlWarp.outputs-202"><span class="linenos">202</span></a>        <span class="n">ret</span> <span class="o">=</span> <span class="n">MrregisterNlWarpOutputs</span><span class="p">(</span>
</span><span id="MrregisterNlWarp.outputs-203"><a href="#MrregisterNlWarp.outputs-203"><span class="linenos">203</span></a>            <span class="n">root</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">),</span>
</span><span id="MrregisterNlWarp.outputs-204"><a href="#MrregisterNlWarp.outputs-204"><span class="linenos">204</span></a>            <span class="n">warp1</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">warp1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
</span><span id="MrregisterNlWarp.outputs-205"><a href="#MrregisterNlWarp.outputs-205"><span class="linenos">205</span></a>            <span class="n">warp2</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">warp2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
</span><span id="MrregisterNlWarp.outputs-206"><a href="#MrregisterNlWarp.outputs-206"><span class="linenos">206</span></a>        <span class="p">)</span>
</span><span id="MrregisterNlWarp.outputs-207"><a href="#MrregisterNlWarp.outputs-207"><span class="linenos">207</span></a>        <span class="k">return</span> <span class="n">ret</span>
</span></pre></div>


            <div class="docstring"><p>Collect output file paths.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>self:</strong>  The sub-command object.</li>
<li><strong>execution:</strong>  The execution object.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>NamedTuple of outputs (described in <code><a href="#MrregisterNlWarpOutputs">MrregisterNlWarpOutputs</a></code>).</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="MrregisterNlWarpOutputs">
                            <input id="MrregisterNlWarpOutputs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">MrregisterNlWarpOutputs</span><wbr>(<span class="base">typing.NamedTuple</span>):

                <label class="view-source-button" for="MrregisterNlWarpOutputs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MrregisterNlWarpOutputs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MrregisterNlWarpOutputs-142"><a href="#MrregisterNlWarpOutputs-142"><span class="linenos">142</span></a><span class="k">class</span> <span class="nc">MrregisterNlWarpOutputs</span><span class="p">(</span><span class="n">typing</span><span class="o">.</span><span class="n">NamedTuple</span><span class="p">):</span>
</span><span id="MrregisterNlWarpOutputs-143"><a href="#MrregisterNlWarpOutputs-143"><span class="linenos">143</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterNlWarpOutputs-144"><a href="#MrregisterNlWarpOutputs-144"><span class="linenos">144</span></a><span class="sd">    Output object returned when calling `MrregisterNlWarp.run(...)`.</span>
</span><span id="MrregisterNlWarpOutputs-145"><a href="#MrregisterNlWarpOutputs-145"><span class="linenos">145</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="MrregisterNlWarpOutputs-146"><a href="#MrregisterNlWarpOutputs-146"><span class="linenos">146</span></a>    <span class="n">root</span><span class="p">:</span> <span class="n">OutputPathType</span>
</span><span id="MrregisterNlWarpOutputs-147"><a href="#MrregisterNlWarpOutputs-147"><span class="linenos">147</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Output root folder. This is the root folder for all outputs.&quot;&quot;&quot;</span>
</span><span id="MrregisterNlWarpOutputs-148"><a href="#MrregisterNlWarpOutputs-148"><span class="linenos">148</span></a>    <span class="n">warp1</span><span class="p">:</span> <span class="n">OutputPathType</span>
</span><span id="MrregisterNlWarpOutputs-149"><a href="#MrregisterNlWarpOutputs-149"><span class="linenos">149</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;the non-linear warp output defined as two deformation fields, where warp1 can be used to transform image1-&gt;image2 and warp2 to transform image2-&gt;image1. The deformation fields also encapsulate any linear transformation estimated prior to non-linear registration.&quot;&quot;&quot;</span>
</span><span id="MrregisterNlWarpOutputs-150"><a href="#MrregisterNlWarpOutputs-150"><span class="linenos">150</span></a>    <span class="n">warp2</span><span class="p">:</span> <span class="n">OutputPathType</span>
</span><span id="MrregisterNlWarpOutputs-151"><a href="#MrregisterNlWarpOutputs-151"><span class="linenos">151</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;the non-linear warp output defined as two deformation fields, where warp1 can be used to transform image1-&gt;image2 and warp2 to transform image2-&gt;image1. The deformation fields also encapsulate any linear transformation estimated prior to non-linear registration.&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Output object returned when calling <code><a href="#MrregisterNlWarp.run">MrregisterNlWarp.run</a>(...)</code>.</p>
</div>


                            <div id="MrregisterNlWarpOutputs.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">MrregisterNlWarpOutputs</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">warp1</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">warp2</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#MrregisterNlWarpOutputs.__init__"></a>
    
            <div class="docstring"><p>Create new instance of MrregisterNlWarpOutputs(root, warp1, warp2)</p>
</div>


                            </div>
                            <div id="MrregisterNlWarpOutputs.root" class="classattr">
                                <div class="attr variable">
            <span class="name">root</span><span class="annotation">: pathlib.Path | str</span>

        
    </div>
    <a class="headerlink" href="#MrregisterNlWarpOutputs.root"></a>
    
            <div class="docstring"><p>Output root folder. This is the root folder for all outputs.</p>
</div>


                            </div>
                            <div id="MrregisterNlWarpOutputs.warp1" class="classattr">
                                <div class="attr variable">
            <span class="name">warp1</span><span class="annotation">: pathlib.Path | str</span>

        
    </div>
    <a class="headerlink" href="#MrregisterNlWarpOutputs.warp1"></a>
    
            <div class="docstring"><p>the non-linear warp output defined as two deformation fields, where warp1 can be used to transform image1->image2 and warp2 to transform image2->image1. The deformation fields also encapsulate any linear transformation estimated prior to non-linear registration.</p>
</div>


                            </div>
                            <div id="MrregisterNlWarpOutputs.warp2" class="classattr">
                                <div class="attr variable">
            <span class="name">warp2</span><span class="annotation">: pathlib.Path | str</span>

        
    </div>
    <a class="headerlink" href="#MrregisterNlWarpOutputs.warp2"></a>
    
            <div class="docstring"><p>the non-linear warp output defined as two deformation fields, where warp1 can be used to transform image1->image2 and warp2 to transform image2->image1. The deformation fields also encapsulate any linear transformation estimated prior to non-linear registration.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>builtins.tuple</dt>
                                <dd id="MrregisterNlWarpOutputs.index" class="function">index</dd>
                <dd id="MrregisterNlWarpOutputs.count" class="function">count</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="MrregisterOutputs">
                            <input id="MrregisterOutputs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">MrregisterOutputs</span><wbr>(<span class="base">typing.NamedTuple</span>):

                <label class="view-source-button" for="MrregisterOutputs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MrregisterOutputs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MrregisterOutputs-240"><a href="#MrregisterOutputs-240"><span class="linenos">240</span></a><span class="k">class</span> <span class="nc">MrregisterOutputs</span><span class="p">(</span><span class="n">typing</span><span class="o">.</span><span class="n">NamedTuple</span><span class="p">):</span>
</span><span id="MrregisterOutputs-241"><a href="#MrregisterOutputs-241"><span class="linenos">241</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterOutputs-242"><a href="#MrregisterOutputs-242"><span class="linenos">242</span></a><span class="sd">    Output object returned when calling `mrregister(...)`.</span>
</span><span id="MrregisterOutputs-243"><a href="#MrregisterOutputs-243"><span class="linenos">243</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="MrregisterOutputs-244"><a href="#MrregisterOutputs-244"><span class="linenos">244</span></a>    <span class="n">root</span><span class="p">:</span> <span class="n">OutputPathType</span>
</span><span id="MrregisterOutputs-245"><a href="#MrregisterOutputs-245"><span class="linenos">245</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Output root folder. This is the root folder for all outputs.&quot;&quot;&quot;</span>
</span><span id="MrregisterOutputs-246"><a href="#MrregisterOutputs-246"><span class="linenos">246</span></a>    <span class="n">rigid</span><span class="p">:</span> <span class="n">OutputPathType</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="MrregisterOutputs-247"><a href="#MrregisterOutputs-247"><span class="linenos">247</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;the output text file containing the rigid transformation as a 4x4 matrix &quot;&quot;&quot;</span>
</span><span id="MrregisterOutputs-248"><a href="#MrregisterOutputs-248"><span class="linenos">248</span></a>    <span class="n">rigid_1tomidway</span><span class="p">:</span> <span class="n">OutputPathType</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="MrregisterOutputs-249"><a href="#MrregisterOutputs-249"><span class="linenos">249</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;the output text file containing the rigid transformation that aligns image1 to image2 in their common midway space as a 4x4 matrix &quot;&quot;&quot;</span>
</span><span id="MrregisterOutputs-250"><a href="#MrregisterOutputs-250"><span class="linenos">250</span></a>    <span class="n">rigid_2tomidway</span><span class="p">:</span> <span class="n">OutputPathType</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="MrregisterOutputs-251"><a href="#MrregisterOutputs-251"><span class="linenos">251</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;the output text file containing the rigid transformation that aligns image2 to image1 in their common midway space as a 4x4 matrix &quot;&quot;&quot;</span>
</span><span id="MrregisterOutputs-252"><a href="#MrregisterOutputs-252"><span class="linenos">252</span></a>    <span class="n">rigid_log</span><span class="p">:</span> <span class="n">OutputPathType</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="MrregisterOutputs-253"><a href="#MrregisterOutputs-253"><span class="linenos">253</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;write gradient descent parameter evolution to log file &quot;&quot;&quot;</span>
</span><span id="MrregisterOutputs-254"><a href="#MrregisterOutputs-254"><span class="linenos">254</span></a>    <span class="n">affine</span><span class="p">:</span> <span class="n">OutputPathType</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="MrregisterOutputs-255"><a href="#MrregisterOutputs-255"><span class="linenos">255</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;the output text file containing the affine transformation as a 4x4 matrix &quot;&quot;&quot;</span>
</span><span id="MrregisterOutputs-256"><a href="#MrregisterOutputs-256"><span class="linenos">256</span></a>    <span class="n">affine_1tomidway</span><span class="p">:</span> <span class="n">OutputPathType</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="MrregisterOutputs-257"><a href="#MrregisterOutputs-257"><span class="linenos">257</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;the output text file containing the affine transformation that aligns image1 to image2 in their common midway space as a 4x4 matrix &quot;&quot;&quot;</span>
</span><span id="MrregisterOutputs-258"><a href="#MrregisterOutputs-258"><span class="linenos">258</span></a>    <span class="n">affine_2tomidway</span><span class="p">:</span> <span class="n">OutputPathType</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="MrregisterOutputs-259"><a href="#MrregisterOutputs-259"><span class="linenos">259</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;the output text file containing the affine transformation that aligns image2 to image1 in their common midway space as a 4x4 matrix &quot;&quot;&quot;</span>
</span><span id="MrregisterOutputs-260"><a href="#MrregisterOutputs-260"><span class="linenos">260</span></a>    <span class="n">affine_log</span><span class="p">:</span> <span class="n">OutputPathType</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="MrregisterOutputs-261"><a href="#MrregisterOutputs-261"><span class="linenos">261</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;write gradient descent parameter evolution to log file &quot;&quot;&quot;</span>
</span><span id="MrregisterOutputs-262"><a href="#MrregisterOutputs-262"><span class="linenos">262</span></a>    <span class="n">nl_warp_full</span><span class="p">:</span> <span class="n">OutputPathType</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="MrregisterOutputs-263"><a href="#MrregisterOutputs-263"><span class="linenos">263</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;output all warps used during registration. This saves four different warps that map each image to a midway space and their inverses in a single 5D image file. The 4th image dimension indexes the x,y,z component of the deformation vector and the 5th dimension indexes the field in this order: image1-&gt;midway, midway-&gt;image1, image2-&gt;midway, midway-&gt;image2. Where image1-&gt;midway defines the field that maps image1 onto the midway space using the reverse convention When linear registration is performed first, the estimated linear transform will be included in the comments of the image header, and therefore the entire linear and non-linear transform can be applied (in either direction) using this output warp file with mrtransform &quot;&quot;&quot;</span>
</span><span id="MrregisterOutputs-264"><a href="#MrregisterOutputs-264"><span class="linenos">264</span></a>    <span class="n">transformed</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">MrregisterTransformedOutputs</span><span class="p">]</span>
</span><span id="MrregisterOutputs-265"><a href="#MrregisterOutputs-265"><span class="linenos">265</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Subcommand outputs&quot;&quot;&quot;</span>
</span><span id="MrregisterOutputs-266"><a href="#MrregisterOutputs-266"><span class="linenos">266</span></a>    <span class="n">transformed_midway</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">MrregisterTransformedMidwayOutputs</span><span class="p">]</span>
</span><span id="MrregisterOutputs-267"><a href="#MrregisterOutputs-267"><span class="linenos">267</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Subcommand outputs&quot;&quot;&quot;</span>
</span><span id="MrregisterOutputs-268"><a href="#MrregisterOutputs-268"><span class="linenos">268</span></a>    <span class="n">nl_warp</span><span class="p">:</span> <span class="n">MrregisterNlWarpOutputs</span>
</span><span id="MrregisterOutputs-269"><a href="#MrregisterOutputs-269"><span class="linenos">269</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Subcommand outputs&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Output object returned when calling <code>mrregister(...)</code>.</p>
</div>


                            <div id="MrregisterOutputs.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">MrregisterOutputs</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">rigid</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">rigid_1tomidway</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">rigid_2tomidway</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">rigid_log</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">affine</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">affine_1tomidway</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">affine_2tomidway</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">affine_log</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">nl_warp_full</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">transformed</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n"><a href="#MrregisterTransformedOutputs">MrregisterTransformedOutputs</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">transformed_midway</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n"><a href="#MrregisterTransformedMidwayOutputs">MrregisterTransformedMidwayOutputs</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">nl_warp</span><span class="p">:</span> <span class="n"><a href="#MrregisterNlWarpOutputs">MrregisterNlWarpOutputs</a></span></span>)</span>

        
    </div>
    <a class="headerlink" href="#MrregisterOutputs.__init__"></a>
    
            <div class="docstring"><p>Create new instance of MrregisterOutputs(root, rigid, rigid_1tomidway, rigid_2tomidway, rigid_log, affine, affine_1tomidway, affine_2tomidway, affine_log, nl_warp_full, transformed, transformed_midway, nl_warp)</p>
</div>


                            </div>
                            <div id="MrregisterOutputs.root" class="classattr">
                                <div class="attr variable">
            <span class="name">root</span><span class="annotation">: pathlib.Path | str</span>

        
    </div>
    <a class="headerlink" href="#MrregisterOutputs.root"></a>
    
            <div class="docstring"><p>Output root folder. This is the root folder for all outputs.</p>
</div>


                            </div>
                            <div id="MrregisterOutputs.rigid" class="classattr">
                                <div class="attr variable">
            <span class="name">rigid</span><span class="annotation">: pathlib.Path | str | None</span>

        
    </div>
    <a class="headerlink" href="#MrregisterOutputs.rigid"></a>
    
            <div class="docstring"><p>the output text file containing the rigid transformation as a 4x4 matrix</p>
</div>


                            </div>
                            <div id="MrregisterOutputs.rigid_1tomidway" class="classattr">
                                <div class="attr variable">
            <span class="name">rigid_1tomidway</span><span class="annotation">: pathlib.Path | str | None</span>

        
    </div>
    <a class="headerlink" href="#MrregisterOutputs.rigid_1tomidway"></a>
    
            <div class="docstring"><p>the output text file containing the rigid transformation that aligns image1 to image2 in their common midway space as a 4x4 matrix</p>
</div>


                            </div>
                            <div id="MrregisterOutputs.rigid_2tomidway" class="classattr">
                                <div class="attr variable">
            <span class="name">rigid_2tomidway</span><span class="annotation">: pathlib.Path | str | None</span>

        
    </div>
    <a class="headerlink" href="#MrregisterOutputs.rigid_2tomidway"></a>
    
            <div class="docstring"><p>the output text file containing the rigid transformation that aligns image2 to image1 in their common midway space as a 4x4 matrix</p>
</div>


                            </div>
                            <div id="MrregisterOutputs.rigid_log" class="classattr">
                                <div class="attr variable">
            <span class="name">rigid_log</span><span class="annotation">: pathlib.Path | str | None</span>

        
    </div>
    <a class="headerlink" href="#MrregisterOutputs.rigid_log"></a>
    
            <div class="docstring"><p>write gradient descent parameter evolution to log file</p>
</div>


                            </div>
                            <div id="MrregisterOutputs.affine" class="classattr">
                                <div class="attr variable">
            <span class="name">affine</span><span class="annotation">: pathlib.Path | str | None</span>

        
    </div>
    <a class="headerlink" href="#MrregisterOutputs.affine"></a>
    
            <div class="docstring"><p>the output text file containing the affine transformation as a 4x4 matrix</p>
</div>


                            </div>
                            <div id="MrregisterOutputs.affine_1tomidway" class="classattr">
                                <div class="attr variable">
            <span class="name">affine_1tomidway</span><span class="annotation">: pathlib.Path | str | None</span>

        
    </div>
    <a class="headerlink" href="#MrregisterOutputs.affine_1tomidway"></a>
    
            <div class="docstring"><p>the output text file containing the affine transformation that aligns image1 to image2 in their common midway space as a 4x4 matrix</p>
</div>


                            </div>
                            <div id="MrregisterOutputs.affine_2tomidway" class="classattr">
                                <div class="attr variable">
            <span class="name">affine_2tomidway</span><span class="annotation">: pathlib.Path | str | None</span>

        
    </div>
    <a class="headerlink" href="#MrregisterOutputs.affine_2tomidway"></a>
    
            <div class="docstring"><p>the output text file containing the affine transformation that aligns image2 to image1 in their common midway space as a 4x4 matrix</p>
</div>


                            </div>
                            <div id="MrregisterOutputs.affine_log" class="classattr">
                                <div class="attr variable">
            <span class="name">affine_log</span><span class="annotation">: pathlib.Path | str | None</span>

        
    </div>
    <a class="headerlink" href="#MrregisterOutputs.affine_log"></a>
    
            <div class="docstring"><p>write gradient descent parameter evolution to log file</p>
</div>


                            </div>
                            <div id="MrregisterOutputs.nl_warp_full" class="classattr">
                                <div class="attr variable">
            <span class="name">nl_warp_full</span><span class="annotation">: pathlib.Path | str | None</span>

        
    </div>
    <a class="headerlink" href="#MrregisterOutputs.nl_warp_full"></a>
    
            <div class="docstring"><p>output all warps used during registration. This saves four different warps that map each image to a midway space and their inverses in a single 5D image file. The 4th image dimension indexes the x,y,z component of the deformation vector and the 5th dimension indexes the field in this order: image1->midway, midway->image1, image2->midway, midway->image2. Where image1->midway defines the field that maps image1 onto the midway space using the reverse convention When linear registration is performed first, the estimated linear transform will be included in the comments of the image header, and therefore the entire linear and non-linear transform can be applied (in either direction) using this output warp file with mrtransform</p>
</div>


                            </div>
                            <div id="MrregisterOutputs.transformed" class="classattr">
                                <div class="attr variable">
            <span class="name">transformed</span><span class="annotation">: List[<a href="#MrregisterTransformedOutputs">MrregisterTransformedOutputs</a>]</span>

        
    </div>
    <a class="headerlink" href="#MrregisterOutputs.transformed"></a>
    
            <div class="docstring"><p>Subcommand outputs</p>
</div>


                            </div>
                            <div id="MrregisterOutputs.transformed_midway" class="classattr">
                                <div class="attr variable">
            <span class="name">transformed_midway</span><span class="annotation">: List[<a href="#MrregisterTransformedMidwayOutputs">MrregisterTransformedMidwayOutputs</a>]</span>

        
    </div>
    <a class="headerlink" href="#MrregisterOutputs.transformed_midway"></a>
    
            <div class="docstring"><p>Subcommand outputs</p>
</div>


                            </div>
                            <div id="MrregisterOutputs.nl_warp" class="classattr">
                                <div class="attr variable">
            <span class="name">nl_warp</span><span class="annotation">: <a href="#MrregisterNlWarpOutputs">MrregisterNlWarpOutputs</a></span>

        
    </div>
    <a class="headerlink" href="#MrregisterOutputs.nl_warp"></a>
    
            <div class="docstring"><p>Subcommand outputs</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>builtins.tuple</dt>
                                <dd id="MrregisterOutputs.index" class="function">index</dd>
                <dd id="MrregisterOutputs.count" class="function">count</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="MrregisterTransformed">
                            <input id="MrregisterTransformed-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclasses.dataclass</div>

    <span class="def">class</span>
    <span class="name">MrregisterTransformed</span>:

                <label class="view-source-button" for="MrregisterTransformed-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MrregisterTransformed"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MrregisterTransformed-28"><a href="#MrregisterTransformed-28"><span class="linenos">28</span></a><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
</span><span id="MrregisterTransformed-29"><a href="#MrregisterTransformed-29"><span class="linenos">29</span></a><span class="k">class</span> <span class="nc">MrregisterTransformed</span><span class="p">:</span>
</span><span id="MrregisterTransformed-30"><a href="#MrregisterTransformed-30"><span class="linenos">30</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterTransformed-31"><a href="#MrregisterTransformed-31"><span class="linenos">31</span></a><span class="sd">    image1 after registration transformed and regridded to the space of image2. Note that -transformed needs to be repeated for each contrast if multi-contrast registration is used.</span>
</span><span id="MrregisterTransformed-32"><a href="#MrregisterTransformed-32"><span class="linenos">32</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="MrregisterTransformed-33"><a href="#MrregisterTransformed-33"><span class="linenos">33</span></a>    <span class="n">image</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="MrregisterTransformed-34"><a href="#MrregisterTransformed-34"><span class="linenos">34</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;image1 after registration transformed and regridded to the space of</span>
</span><span id="MrregisterTransformed-35"><a href="#MrregisterTransformed-35"><span class="linenos">35</span></a><span class="sd">    image2. Note that -transformed needs to be repeated for each contrast if</span>
</span><span id="MrregisterTransformed-36"><a href="#MrregisterTransformed-36"><span class="linenos">36</span></a><span class="sd">    multi-contrast registration is used.&quot;&quot;&quot;</span>
</span><span id="MrregisterTransformed-37"><a href="#MrregisterTransformed-37"><span class="linenos">37</span></a>    
</span><span id="MrregisterTransformed-38"><a href="#MrregisterTransformed-38"><span class="linenos">38</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
</span><span id="MrregisterTransformed-39"><a href="#MrregisterTransformed-39"><span class="linenos">39</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MrregisterTransformed-40"><a href="#MrregisterTransformed-40"><span class="linenos">40</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="MrregisterTransformed-41"><a href="#MrregisterTransformed-41"><span class="linenos">41</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="MrregisterTransformed-42"><a href="#MrregisterTransformed-42"><span class="linenos">42</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterTransformed-43"><a href="#MrregisterTransformed-43"><span class="linenos">43</span></a><span class="sd">        Build command line arguments. This method is called by the main command.</span>
</span><span id="MrregisterTransformed-44"><a href="#MrregisterTransformed-44"><span class="linenos">44</span></a><span class="sd">        </span>
</span><span id="MrregisterTransformed-45"><a href="#MrregisterTransformed-45"><span class="linenos">45</span></a><span class="sd">        Args:</span>
</span><span id="MrregisterTransformed-46"><a href="#MrregisterTransformed-46"><span class="linenos">46</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="MrregisterTransformed-47"><a href="#MrregisterTransformed-47"><span class="linenos">47</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="MrregisterTransformed-48"><a href="#MrregisterTransformed-48"><span class="linenos">48</span></a><span class="sd">        Returns:</span>
</span><span id="MrregisterTransformed-49"><a href="#MrregisterTransformed-49"><span class="linenos">49</span></a><span class="sd">            </span>
</span><span id="MrregisterTransformed-50"><a href="#MrregisterTransformed-50"><span class="linenos">50</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MrregisterTransformed-51"><a href="#MrregisterTransformed-51"><span class="linenos">51</span></a>        <span class="n">cargs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MrregisterTransformed-52"><a href="#MrregisterTransformed-52"><span class="linenos">52</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-transformed&quot;</span><span class="p">)</span>
</span><span id="MrregisterTransformed-53"><a href="#MrregisterTransformed-53"><span class="linenos">53</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">)</span>
</span><span id="MrregisterTransformed-54"><a href="#MrregisterTransformed-54"><span class="linenos">54</span></a>        <span class="k">return</span> <span class="n">cargs</span>
</span><span id="MrregisterTransformed-55"><a href="#MrregisterTransformed-55"><span class="linenos">55</span></a>    
</span><span id="MrregisterTransformed-56"><a href="#MrregisterTransformed-56"><span class="linenos">56</span></a>    <span class="k">def</span> <span class="nf">outputs</span><span class="p">(</span>
</span><span id="MrregisterTransformed-57"><a href="#MrregisterTransformed-57"><span class="linenos">57</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MrregisterTransformed-58"><a href="#MrregisterTransformed-58"><span class="linenos">58</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="MrregisterTransformed-59"><a href="#MrregisterTransformed-59"><span class="linenos">59</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MrregisterTransformedOutputs</span><span class="p">:</span>
</span><span id="MrregisterTransformed-60"><a href="#MrregisterTransformed-60"><span class="linenos">60</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterTransformed-61"><a href="#MrregisterTransformed-61"><span class="linenos">61</span></a><span class="sd">        Collect output file paths.</span>
</span><span id="MrregisterTransformed-62"><a href="#MrregisterTransformed-62"><span class="linenos">62</span></a><span class="sd">        </span>
</span><span id="MrregisterTransformed-63"><a href="#MrregisterTransformed-63"><span class="linenos">63</span></a><span class="sd">        Args:</span>
</span><span id="MrregisterTransformed-64"><a href="#MrregisterTransformed-64"><span class="linenos">64</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="MrregisterTransformed-65"><a href="#MrregisterTransformed-65"><span class="linenos">65</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="MrregisterTransformed-66"><a href="#MrregisterTransformed-66"><span class="linenos">66</span></a><span class="sd">        Returns:</span>
</span><span id="MrregisterTransformed-67"><a href="#MrregisterTransformed-67"><span class="linenos">67</span></a><span class="sd">            NamedTuple of outputs (described in `MrregisterTransformedOutputs`).</span>
</span><span id="MrregisterTransformed-68"><a href="#MrregisterTransformed-68"><span class="linenos">68</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MrregisterTransformed-69"><a href="#MrregisterTransformed-69"><span class="linenos">69</span></a>        <span class="n">ret</span> <span class="o">=</span> <span class="n">MrregisterTransformedOutputs</span><span class="p">(</span>
</span><span id="MrregisterTransformed-70"><a href="#MrregisterTransformed-70"><span class="linenos">70</span></a>            <span class="n">root</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">),</span>
</span><span id="MrregisterTransformed-71"><a href="#MrregisterTransformed-71"><span class="linenos">71</span></a>            <span class="n">image</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
</span><span id="MrregisterTransformed-72"><a href="#MrregisterTransformed-72"><span class="linenos">72</span></a>        <span class="p">)</span>
</span><span id="MrregisterTransformed-73"><a href="#MrregisterTransformed-73"><span class="linenos">73</span></a>        <span class="k">return</span> <span class="n">ret</span>
</span></pre></div>


            <div class="docstring"><p>image1 after registration transformed and regridded to the space of image2. Note that -transformed needs to be repeated for each contrast if multi-contrast registration is used.</p>
</div>


                            <div id="MrregisterTransformed.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">MrregisterTransformed</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">image</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#MrregisterTransformed.__init__"></a>
    
    

                            </div>
                            <div id="MrregisterTransformed.image" class="classattr">
                                <div class="attr variable">
            <span class="name">image</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#MrregisterTransformed.image"></a>
    
            <div class="docstring"><p>image1 after registration transformed and regridded to the space of
image2. Note that -transformed needs to be repeated for each contrast if
multi-contrast registration is used.</p>
</div>


                            </div>
                            <div id="MrregisterTransformed.run" class="classattr">
                                        <input id="MrregisterTransformed.run-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">run</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">execution</span><span class="p">:</span> <span class="n">styxdefs</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Execution</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="MrregisterTransformed.run-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MrregisterTransformed.run"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MrregisterTransformed.run-38"><a href="#MrregisterTransformed.run-38"><span class="linenos">38</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
</span><span id="MrregisterTransformed.run-39"><a href="#MrregisterTransformed.run-39"><span class="linenos">39</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MrregisterTransformed.run-40"><a href="#MrregisterTransformed.run-40"><span class="linenos">40</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="MrregisterTransformed.run-41"><a href="#MrregisterTransformed.run-41"><span class="linenos">41</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="MrregisterTransformed.run-42"><a href="#MrregisterTransformed.run-42"><span class="linenos">42</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterTransformed.run-43"><a href="#MrregisterTransformed.run-43"><span class="linenos">43</span></a><span class="sd">        Build command line arguments. This method is called by the main command.</span>
</span><span id="MrregisterTransformed.run-44"><a href="#MrregisterTransformed.run-44"><span class="linenos">44</span></a><span class="sd">        </span>
</span><span id="MrregisterTransformed.run-45"><a href="#MrregisterTransformed.run-45"><span class="linenos">45</span></a><span class="sd">        Args:</span>
</span><span id="MrregisterTransformed.run-46"><a href="#MrregisterTransformed.run-46"><span class="linenos">46</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="MrregisterTransformed.run-47"><a href="#MrregisterTransformed.run-47"><span class="linenos">47</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="MrregisterTransformed.run-48"><a href="#MrregisterTransformed.run-48"><span class="linenos">48</span></a><span class="sd">        Returns:</span>
</span><span id="MrregisterTransformed.run-49"><a href="#MrregisterTransformed.run-49"><span class="linenos">49</span></a><span class="sd">            </span>
</span><span id="MrregisterTransformed.run-50"><a href="#MrregisterTransformed.run-50"><span class="linenos">50</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MrregisterTransformed.run-51"><a href="#MrregisterTransformed.run-51"><span class="linenos">51</span></a>        <span class="n">cargs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MrregisterTransformed.run-52"><a href="#MrregisterTransformed.run-52"><span class="linenos">52</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-transformed&quot;</span><span class="p">)</span>
</span><span id="MrregisterTransformed.run-53"><a href="#MrregisterTransformed.run-53"><span class="linenos">53</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">)</span>
</span><span id="MrregisterTransformed.run-54"><a href="#MrregisterTransformed.run-54"><span class="linenos">54</span></a>        <span class="k">return</span> <span class="n">cargs</span>
</span></pre></div>


            <div class="docstring"><p>Build command line arguments. This method is called by the main command.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>self:</strong>  The sub-command object.</li>
<li><strong>execution:</strong>  The execution object.</li>
</ul>

<p>Returns:</p>
</div>


                            </div>
                            <div id="MrregisterTransformed.outputs" class="classattr">
                                        <input id="MrregisterTransformed.outputs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">outputs</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">execution</span><span class="p">:</span> <span class="n">styxdefs</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Execution</span></span><span class="return-annotation">) -> <span class="n"><a href="#MrregisterTransformedOutputs">MrregisterTransformedOutputs</a></span>:</span></span>

                <label class="view-source-button" for="MrregisterTransformed.outputs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MrregisterTransformed.outputs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MrregisterTransformed.outputs-56"><a href="#MrregisterTransformed.outputs-56"><span class="linenos">56</span></a>    <span class="k">def</span> <span class="nf">outputs</span><span class="p">(</span>
</span><span id="MrregisterTransformed.outputs-57"><a href="#MrregisterTransformed.outputs-57"><span class="linenos">57</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MrregisterTransformed.outputs-58"><a href="#MrregisterTransformed.outputs-58"><span class="linenos">58</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="MrregisterTransformed.outputs-59"><a href="#MrregisterTransformed.outputs-59"><span class="linenos">59</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MrregisterTransformedOutputs</span><span class="p">:</span>
</span><span id="MrregisterTransformed.outputs-60"><a href="#MrregisterTransformed.outputs-60"><span class="linenos">60</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterTransformed.outputs-61"><a href="#MrregisterTransformed.outputs-61"><span class="linenos">61</span></a><span class="sd">        Collect output file paths.</span>
</span><span id="MrregisterTransformed.outputs-62"><a href="#MrregisterTransformed.outputs-62"><span class="linenos">62</span></a><span class="sd">        </span>
</span><span id="MrregisterTransformed.outputs-63"><a href="#MrregisterTransformed.outputs-63"><span class="linenos">63</span></a><span class="sd">        Args:</span>
</span><span id="MrregisterTransformed.outputs-64"><a href="#MrregisterTransformed.outputs-64"><span class="linenos">64</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="MrregisterTransformed.outputs-65"><a href="#MrregisterTransformed.outputs-65"><span class="linenos">65</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="MrregisterTransformed.outputs-66"><a href="#MrregisterTransformed.outputs-66"><span class="linenos">66</span></a><span class="sd">        Returns:</span>
</span><span id="MrregisterTransformed.outputs-67"><a href="#MrregisterTransformed.outputs-67"><span class="linenos">67</span></a><span class="sd">            NamedTuple of outputs (described in `MrregisterTransformedOutputs`).</span>
</span><span id="MrregisterTransformed.outputs-68"><a href="#MrregisterTransformed.outputs-68"><span class="linenos">68</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MrregisterTransformed.outputs-69"><a href="#MrregisterTransformed.outputs-69"><span class="linenos">69</span></a>        <span class="n">ret</span> <span class="o">=</span> <span class="n">MrregisterTransformedOutputs</span><span class="p">(</span>
</span><span id="MrregisterTransformed.outputs-70"><a href="#MrregisterTransformed.outputs-70"><span class="linenos">70</span></a>            <span class="n">root</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">),</span>
</span><span id="MrregisterTransformed.outputs-71"><a href="#MrregisterTransformed.outputs-71"><span class="linenos">71</span></a>            <span class="n">image</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
</span><span id="MrregisterTransformed.outputs-72"><a href="#MrregisterTransformed.outputs-72"><span class="linenos">72</span></a>        <span class="p">)</span>
</span><span id="MrregisterTransformed.outputs-73"><a href="#MrregisterTransformed.outputs-73"><span class="linenos">73</span></a>        <span class="k">return</span> <span class="n">ret</span>
</span></pre></div>


            <div class="docstring"><p>Collect output file paths.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>self:</strong>  The sub-command object.</li>
<li><strong>execution:</strong>  The execution object.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>NamedTuple of outputs (described in <code><a href="#MrregisterTransformedOutputs">MrregisterTransformedOutputs</a></code>).</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="MrregisterTransformedMidway">
                            <input id="MrregisterTransformedMidway-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclasses.dataclass</div>

    <span class="def">class</span>
    <span class="name">MrregisterTransformedMidway</span>:

                <label class="view-source-button" for="MrregisterTransformedMidway-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MrregisterTransformedMidway"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MrregisterTransformedMidway-88"><a href="#MrregisterTransformedMidway-88"><span class="linenos"> 88</span></a><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
</span><span id="MrregisterTransformedMidway-89"><a href="#MrregisterTransformedMidway-89"><span class="linenos"> 89</span></a><span class="k">class</span> <span class="nc">MrregisterTransformedMidway</span><span class="p">:</span>
</span><span id="MrregisterTransformedMidway-90"><a href="#MrregisterTransformedMidway-90"><span class="linenos"> 90</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterTransformedMidway-91"><a href="#MrregisterTransformedMidway-91"><span class="linenos"> 91</span></a><span class="sd">    image1 and image2 after registration transformed and regridded to the midway space. Note that -transformed_midway needs to be repeated for each contrast if multi-contrast registration is used.</span>
</span><span id="MrregisterTransformedMidway-92"><a href="#MrregisterTransformedMidway-92"><span class="linenos"> 92</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="MrregisterTransformedMidway-93"><a href="#MrregisterTransformedMidway-93"><span class="linenos"> 93</span></a>    <span class="n">image1_transformed</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="MrregisterTransformedMidway-94"><a href="#MrregisterTransformedMidway-94"><span class="linenos"> 94</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;image1 and image2 after registration transformed and regridded to the</span>
</span><span id="MrregisterTransformedMidway-95"><a href="#MrregisterTransformedMidway-95"><span class="linenos"> 95</span></a><span class="sd">    midway space. Note that -transformed_midway needs to be repeated for each</span>
</span><span id="MrregisterTransformedMidway-96"><a href="#MrregisterTransformedMidway-96"><span class="linenos"> 96</span></a><span class="sd">    contrast if multi-contrast registration is used.&quot;&quot;&quot;</span>
</span><span id="MrregisterTransformedMidway-97"><a href="#MrregisterTransformedMidway-97"><span class="linenos"> 97</span></a>    <span class="n">image2_transformed</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="MrregisterTransformedMidway-98"><a href="#MrregisterTransformedMidway-98"><span class="linenos"> 98</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;image1 and image2 after registration transformed and regridded to the</span>
</span><span id="MrregisterTransformedMidway-99"><a href="#MrregisterTransformedMidway-99"><span class="linenos"> 99</span></a><span class="sd">    midway space. Note that -transformed_midway needs to be repeated for each</span>
</span><span id="MrregisterTransformedMidway-100"><a href="#MrregisterTransformedMidway-100"><span class="linenos">100</span></a><span class="sd">    contrast if multi-contrast registration is used.&quot;&quot;&quot;</span>
</span><span id="MrregisterTransformedMidway-101"><a href="#MrregisterTransformedMidway-101"><span class="linenos">101</span></a>    
</span><span id="MrregisterTransformedMidway-102"><a href="#MrregisterTransformedMidway-102"><span class="linenos">102</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
</span><span id="MrregisterTransformedMidway-103"><a href="#MrregisterTransformedMidway-103"><span class="linenos">103</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MrregisterTransformedMidway-104"><a href="#MrregisterTransformedMidway-104"><span class="linenos">104</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="MrregisterTransformedMidway-105"><a href="#MrregisterTransformedMidway-105"><span class="linenos">105</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="MrregisterTransformedMidway-106"><a href="#MrregisterTransformedMidway-106"><span class="linenos">106</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterTransformedMidway-107"><a href="#MrregisterTransformedMidway-107"><span class="linenos">107</span></a><span class="sd">        Build command line arguments. This method is called by the main command.</span>
</span><span id="MrregisterTransformedMidway-108"><a href="#MrregisterTransformedMidway-108"><span class="linenos">108</span></a><span class="sd">        </span>
</span><span id="MrregisterTransformedMidway-109"><a href="#MrregisterTransformedMidway-109"><span class="linenos">109</span></a><span class="sd">        Args:</span>
</span><span id="MrregisterTransformedMidway-110"><a href="#MrregisterTransformedMidway-110"><span class="linenos">110</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="MrregisterTransformedMidway-111"><a href="#MrregisterTransformedMidway-111"><span class="linenos">111</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="MrregisterTransformedMidway-112"><a href="#MrregisterTransformedMidway-112"><span class="linenos">112</span></a><span class="sd">        Returns:</span>
</span><span id="MrregisterTransformedMidway-113"><a href="#MrregisterTransformedMidway-113"><span class="linenos">113</span></a><span class="sd">            </span>
</span><span id="MrregisterTransformedMidway-114"><a href="#MrregisterTransformedMidway-114"><span class="linenos">114</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MrregisterTransformedMidway-115"><a href="#MrregisterTransformedMidway-115"><span class="linenos">115</span></a>        <span class="n">cargs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MrregisterTransformedMidway-116"><a href="#MrregisterTransformedMidway-116"><span class="linenos">116</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-transformed_midway&quot;</span><span class="p">)</span>
</span><span id="MrregisterTransformedMidway-117"><a href="#MrregisterTransformedMidway-117"><span class="linenos">117</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image1_transformed</span><span class="p">)</span>
</span><span id="MrregisterTransformedMidway-118"><a href="#MrregisterTransformedMidway-118"><span class="linenos">118</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image2_transformed</span><span class="p">)</span>
</span><span id="MrregisterTransformedMidway-119"><a href="#MrregisterTransformedMidway-119"><span class="linenos">119</span></a>        <span class="k">return</span> <span class="n">cargs</span>
</span><span id="MrregisterTransformedMidway-120"><a href="#MrregisterTransformedMidway-120"><span class="linenos">120</span></a>    
</span><span id="MrregisterTransformedMidway-121"><a href="#MrregisterTransformedMidway-121"><span class="linenos">121</span></a>    <span class="k">def</span> <span class="nf">outputs</span><span class="p">(</span>
</span><span id="MrregisterTransformedMidway-122"><a href="#MrregisterTransformedMidway-122"><span class="linenos">122</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MrregisterTransformedMidway-123"><a href="#MrregisterTransformedMidway-123"><span class="linenos">123</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="MrregisterTransformedMidway-124"><a href="#MrregisterTransformedMidway-124"><span class="linenos">124</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MrregisterTransformedMidwayOutputs</span><span class="p">:</span>
</span><span id="MrregisterTransformedMidway-125"><a href="#MrregisterTransformedMidway-125"><span class="linenos">125</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterTransformedMidway-126"><a href="#MrregisterTransformedMidway-126"><span class="linenos">126</span></a><span class="sd">        Collect output file paths.</span>
</span><span id="MrregisterTransformedMidway-127"><a href="#MrregisterTransformedMidway-127"><span class="linenos">127</span></a><span class="sd">        </span>
</span><span id="MrregisterTransformedMidway-128"><a href="#MrregisterTransformedMidway-128"><span class="linenos">128</span></a><span class="sd">        Args:</span>
</span><span id="MrregisterTransformedMidway-129"><a href="#MrregisterTransformedMidway-129"><span class="linenos">129</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="MrregisterTransformedMidway-130"><a href="#MrregisterTransformedMidway-130"><span class="linenos">130</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="MrregisterTransformedMidway-131"><a href="#MrregisterTransformedMidway-131"><span class="linenos">131</span></a><span class="sd">        Returns:</span>
</span><span id="MrregisterTransformedMidway-132"><a href="#MrregisterTransformedMidway-132"><span class="linenos">132</span></a><span class="sd">            NamedTuple of outputs (described in `MrregisterTransformedMidwayOutputs`).</span>
</span><span id="MrregisterTransformedMidway-133"><a href="#MrregisterTransformedMidway-133"><span class="linenos">133</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MrregisterTransformedMidway-134"><a href="#MrregisterTransformedMidway-134"><span class="linenos">134</span></a>        <span class="n">ret</span> <span class="o">=</span> <span class="n">MrregisterTransformedMidwayOutputs</span><span class="p">(</span>
</span><span id="MrregisterTransformedMidway-135"><a href="#MrregisterTransformedMidway-135"><span class="linenos">135</span></a>            <span class="n">root</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">),</span>
</span><span id="MrregisterTransformedMidway-136"><a href="#MrregisterTransformedMidway-136"><span class="linenos">136</span></a>            <span class="n">image1_transformed</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">image1_transformed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
</span><span id="MrregisterTransformedMidway-137"><a href="#MrregisterTransformedMidway-137"><span class="linenos">137</span></a>            <span class="n">image2_transformed</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">image2_transformed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
</span><span id="MrregisterTransformedMidway-138"><a href="#MrregisterTransformedMidway-138"><span class="linenos">138</span></a>        <span class="p">)</span>
</span><span id="MrregisterTransformedMidway-139"><a href="#MrregisterTransformedMidway-139"><span class="linenos">139</span></a>        <span class="k">return</span> <span class="n">ret</span>
</span></pre></div>


            <div class="docstring"><p>image1 and image2 after registration transformed and regridded to the midway space. Note that -transformed_midway needs to be repeated for each contrast if multi-contrast registration is used.</p>
</div>


                            <div id="MrregisterTransformedMidway.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">MrregisterTransformedMidway</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">image1_transformed</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">image2_transformed</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#MrregisterTransformedMidway.__init__"></a>
    
    

                            </div>
                            <div id="MrregisterTransformedMidway.image1_transformed" class="classattr">
                                <div class="attr variable">
            <span class="name">image1_transformed</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#MrregisterTransformedMidway.image1_transformed"></a>
    
            <div class="docstring"><p>image1 and image2 after registration transformed and regridded to the
midway space. Note that -transformed_midway needs to be repeated for each
contrast if multi-contrast registration is used.</p>
</div>


                            </div>
                            <div id="MrregisterTransformedMidway.image2_transformed" class="classattr">
                                <div class="attr variable">
            <span class="name">image2_transformed</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#MrregisterTransformedMidway.image2_transformed"></a>
    
            <div class="docstring"><p>image1 and image2 after registration transformed and regridded to the
midway space. Note that -transformed_midway needs to be repeated for each
contrast if multi-contrast registration is used.</p>
</div>


                            </div>
                            <div id="MrregisterTransformedMidway.run" class="classattr">
                                        <input id="MrregisterTransformedMidway.run-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">run</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">execution</span><span class="p">:</span> <span class="n">styxdefs</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Execution</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="MrregisterTransformedMidway.run-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MrregisterTransformedMidway.run"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MrregisterTransformedMidway.run-102"><a href="#MrregisterTransformedMidway.run-102"><span class="linenos">102</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
</span><span id="MrregisterTransformedMidway.run-103"><a href="#MrregisterTransformedMidway.run-103"><span class="linenos">103</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MrregisterTransformedMidway.run-104"><a href="#MrregisterTransformedMidway.run-104"><span class="linenos">104</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="MrregisterTransformedMidway.run-105"><a href="#MrregisterTransformedMidway.run-105"><span class="linenos">105</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="MrregisterTransformedMidway.run-106"><a href="#MrregisterTransformedMidway.run-106"><span class="linenos">106</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterTransformedMidway.run-107"><a href="#MrregisterTransformedMidway.run-107"><span class="linenos">107</span></a><span class="sd">        Build command line arguments. This method is called by the main command.</span>
</span><span id="MrregisterTransformedMidway.run-108"><a href="#MrregisterTransformedMidway.run-108"><span class="linenos">108</span></a><span class="sd">        </span>
</span><span id="MrregisterTransformedMidway.run-109"><a href="#MrregisterTransformedMidway.run-109"><span class="linenos">109</span></a><span class="sd">        Args:</span>
</span><span id="MrregisterTransformedMidway.run-110"><a href="#MrregisterTransformedMidway.run-110"><span class="linenos">110</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="MrregisterTransformedMidway.run-111"><a href="#MrregisterTransformedMidway.run-111"><span class="linenos">111</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="MrregisterTransformedMidway.run-112"><a href="#MrregisterTransformedMidway.run-112"><span class="linenos">112</span></a><span class="sd">        Returns:</span>
</span><span id="MrregisterTransformedMidway.run-113"><a href="#MrregisterTransformedMidway.run-113"><span class="linenos">113</span></a><span class="sd">            </span>
</span><span id="MrregisterTransformedMidway.run-114"><a href="#MrregisterTransformedMidway.run-114"><span class="linenos">114</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MrregisterTransformedMidway.run-115"><a href="#MrregisterTransformedMidway.run-115"><span class="linenos">115</span></a>        <span class="n">cargs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MrregisterTransformedMidway.run-116"><a href="#MrregisterTransformedMidway.run-116"><span class="linenos">116</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-transformed_midway&quot;</span><span class="p">)</span>
</span><span id="MrregisterTransformedMidway.run-117"><a href="#MrregisterTransformedMidway.run-117"><span class="linenos">117</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image1_transformed</span><span class="p">)</span>
</span><span id="MrregisterTransformedMidway.run-118"><a href="#MrregisterTransformedMidway.run-118"><span class="linenos">118</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image2_transformed</span><span class="p">)</span>
</span><span id="MrregisterTransformedMidway.run-119"><a href="#MrregisterTransformedMidway.run-119"><span class="linenos">119</span></a>        <span class="k">return</span> <span class="n">cargs</span>
</span></pre></div>


            <div class="docstring"><p>Build command line arguments. This method is called by the main command.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>self:</strong>  The sub-command object.</li>
<li><strong>execution:</strong>  The execution object.</li>
</ul>

<p>Returns:</p>
</div>


                            </div>
                            <div id="MrregisterTransformedMidway.outputs" class="classattr">
                                        <input id="MrregisterTransformedMidway.outputs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">outputs</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">execution</span><span class="p">:</span> <span class="n">styxdefs</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Execution</span></span><span class="return-annotation">) -> <span class="n"><a href="#MrregisterTransformedMidwayOutputs">MrregisterTransformedMidwayOutputs</a></span>:</span></span>

                <label class="view-source-button" for="MrregisterTransformedMidway.outputs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MrregisterTransformedMidway.outputs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MrregisterTransformedMidway.outputs-121"><a href="#MrregisterTransformedMidway.outputs-121"><span class="linenos">121</span></a>    <span class="k">def</span> <span class="nf">outputs</span><span class="p">(</span>
</span><span id="MrregisterTransformedMidway.outputs-122"><a href="#MrregisterTransformedMidway.outputs-122"><span class="linenos">122</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MrregisterTransformedMidway.outputs-123"><a href="#MrregisterTransformedMidway.outputs-123"><span class="linenos">123</span></a>        <span class="n">execution</span><span class="p">:</span> <span class="n">Execution</span><span class="p">,</span>
</span><span id="MrregisterTransformedMidway.outputs-124"><a href="#MrregisterTransformedMidway.outputs-124"><span class="linenos">124</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MrregisterTransformedMidwayOutputs</span><span class="p">:</span>
</span><span id="MrregisterTransformedMidway.outputs-125"><a href="#MrregisterTransformedMidway.outputs-125"><span class="linenos">125</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterTransformedMidway.outputs-126"><a href="#MrregisterTransformedMidway.outputs-126"><span class="linenos">126</span></a><span class="sd">        Collect output file paths.</span>
</span><span id="MrregisterTransformedMidway.outputs-127"><a href="#MrregisterTransformedMidway.outputs-127"><span class="linenos">127</span></a><span class="sd">        </span>
</span><span id="MrregisterTransformedMidway.outputs-128"><a href="#MrregisterTransformedMidway.outputs-128"><span class="linenos">128</span></a><span class="sd">        Args:</span>
</span><span id="MrregisterTransformedMidway.outputs-129"><a href="#MrregisterTransformedMidway.outputs-129"><span class="linenos">129</span></a><span class="sd">            self: The sub-command object.</span>
</span><span id="MrregisterTransformedMidway.outputs-130"><a href="#MrregisterTransformedMidway.outputs-130"><span class="linenos">130</span></a><span class="sd">            execution: The execution object.</span>
</span><span id="MrregisterTransformedMidway.outputs-131"><a href="#MrregisterTransformedMidway.outputs-131"><span class="linenos">131</span></a><span class="sd">        Returns:</span>
</span><span id="MrregisterTransformedMidway.outputs-132"><a href="#MrregisterTransformedMidway.outputs-132"><span class="linenos">132</span></a><span class="sd">            NamedTuple of outputs (described in `MrregisterTransformedMidwayOutputs`).</span>
</span><span id="MrregisterTransformedMidway.outputs-133"><a href="#MrregisterTransformedMidway.outputs-133"><span class="linenos">133</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MrregisterTransformedMidway.outputs-134"><a href="#MrregisterTransformedMidway.outputs-134"><span class="linenos">134</span></a>        <span class="n">ret</span> <span class="o">=</span> <span class="n">MrregisterTransformedMidwayOutputs</span><span class="p">(</span>
</span><span id="MrregisterTransformedMidway.outputs-135"><a href="#MrregisterTransformedMidway.outputs-135"><span class="linenos">135</span></a>            <span class="n">root</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">),</span>
</span><span id="MrregisterTransformedMidway.outputs-136"><a href="#MrregisterTransformedMidway.outputs-136"><span class="linenos">136</span></a>            <span class="n">image1_transformed</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">image1_transformed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
</span><span id="MrregisterTransformedMidway.outputs-137"><a href="#MrregisterTransformedMidway.outputs-137"><span class="linenos">137</span></a>            <span class="n">image2_transformed</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">image2_transformed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
</span><span id="MrregisterTransformedMidway.outputs-138"><a href="#MrregisterTransformedMidway.outputs-138"><span class="linenos">138</span></a>        <span class="p">)</span>
</span><span id="MrregisterTransformedMidway.outputs-139"><a href="#MrregisterTransformedMidway.outputs-139"><span class="linenos">139</span></a>        <span class="k">return</span> <span class="n">ret</span>
</span></pre></div>


            <div class="docstring"><p>Collect output file paths.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>self:</strong>  The sub-command object.</li>
<li><strong>execution:</strong>  The execution object.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>NamedTuple of outputs (described in <code><a href="#MrregisterTransformedMidwayOutputs">MrregisterTransformedMidwayOutputs</a></code>).</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="MrregisterTransformedMidwayOutputs">
                            <input id="MrregisterTransformedMidwayOutputs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">MrregisterTransformedMidwayOutputs</span><wbr>(<span class="base">typing.NamedTuple</span>):

                <label class="view-source-button" for="MrregisterTransformedMidwayOutputs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MrregisterTransformedMidwayOutputs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MrregisterTransformedMidwayOutputs-76"><a href="#MrregisterTransformedMidwayOutputs-76"><span class="linenos">76</span></a><span class="k">class</span> <span class="nc">MrregisterTransformedMidwayOutputs</span><span class="p">(</span><span class="n">typing</span><span class="o">.</span><span class="n">NamedTuple</span><span class="p">):</span>
</span><span id="MrregisterTransformedMidwayOutputs-77"><a href="#MrregisterTransformedMidwayOutputs-77"><span class="linenos">77</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterTransformedMidwayOutputs-78"><a href="#MrregisterTransformedMidwayOutputs-78"><span class="linenos">78</span></a><span class="sd">    Output object returned when calling `MrregisterTransformedMidway.run(...)`.</span>
</span><span id="MrregisterTransformedMidwayOutputs-79"><a href="#MrregisterTransformedMidwayOutputs-79"><span class="linenos">79</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="MrregisterTransformedMidwayOutputs-80"><a href="#MrregisterTransformedMidwayOutputs-80"><span class="linenos">80</span></a>    <span class="n">root</span><span class="p">:</span> <span class="n">OutputPathType</span>
</span><span id="MrregisterTransformedMidwayOutputs-81"><a href="#MrregisterTransformedMidwayOutputs-81"><span class="linenos">81</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Output root folder. This is the root folder for all outputs.&quot;&quot;&quot;</span>
</span><span id="MrregisterTransformedMidwayOutputs-82"><a href="#MrregisterTransformedMidwayOutputs-82"><span class="linenos">82</span></a>    <span class="n">image1_transformed</span><span class="p">:</span> <span class="n">OutputPathType</span>
</span><span id="MrregisterTransformedMidwayOutputs-83"><a href="#MrregisterTransformedMidwayOutputs-83"><span class="linenos">83</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;image1 and image2 after registration transformed and regridded to the midway space. Note that -transformed_midway needs to be repeated for each contrast if multi-contrast registration is used.&quot;&quot;&quot;</span>
</span><span id="MrregisterTransformedMidwayOutputs-84"><a href="#MrregisterTransformedMidwayOutputs-84"><span class="linenos">84</span></a>    <span class="n">image2_transformed</span><span class="p">:</span> <span class="n">OutputPathType</span>
</span><span id="MrregisterTransformedMidwayOutputs-85"><a href="#MrregisterTransformedMidwayOutputs-85"><span class="linenos">85</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;image1 and image2 after registration transformed and regridded to the midway space. Note that -transformed_midway needs to be repeated for each contrast if multi-contrast registration is used.&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Output object returned when calling <code><a href="#MrregisterTransformedMidway.run">MrregisterTransformedMidway.run</a>(...)</code>.</p>
</div>


                            <div id="MrregisterTransformedMidwayOutputs.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">MrregisterTransformedMidwayOutputs</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">image1_transformed</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">image2_transformed</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#MrregisterTransformedMidwayOutputs.__init__"></a>
    
            <div class="docstring"><p>Create new instance of MrregisterTransformedMidwayOutputs(root, image1_transformed, image2_transformed)</p>
</div>


                            </div>
                            <div id="MrregisterTransformedMidwayOutputs.root" class="classattr">
                                <div class="attr variable">
            <span class="name">root</span><span class="annotation">: pathlib.Path | str</span>

        
    </div>
    <a class="headerlink" href="#MrregisterTransformedMidwayOutputs.root"></a>
    
            <div class="docstring"><p>Output root folder. This is the root folder for all outputs.</p>
</div>


                            </div>
                            <div id="MrregisterTransformedMidwayOutputs.image1_transformed" class="classattr">
                                <div class="attr variable">
            <span class="name">image1_transformed</span><span class="annotation">: pathlib.Path | str</span>

        
    </div>
    <a class="headerlink" href="#MrregisterTransformedMidwayOutputs.image1_transformed"></a>
    
            <div class="docstring"><p>image1 and image2 after registration transformed and regridded to the midway space. Note that -transformed_midway needs to be repeated for each contrast if multi-contrast registration is used.</p>
</div>


                            </div>
                            <div id="MrregisterTransformedMidwayOutputs.image2_transformed" class="classattr">
                                <div class="attr variable">
            <span class="name">image2_transformed</span><span class="annotation">: pathlib.Path | str</span>

        
    </div>
    <a class="headerlink" href="#MrregisterTransformedMidwayOutputs.image2_transformed"></a>
    
            <div class="docstring"><p>image1 and image2 after registration transformed and regridded to the midway space. Note that -transformed_midway needs to be repeated for each contrast if multi-contrast registration is used.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>builtins.tuple</dt>
                                <dd id="MrregisterTransformedMidwayOutputs.index" class="function">index</dd>
                <dd id="MrregisterTransformedMidwayOutputs.count" class="function">count</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="MrregisterTransformedOutputs">
                            <input id="MrregisterTransformedOutputs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">MrregisterTransformedOutputs</span><wbr>(<span class="base">typing.NamedTuple</span>):

                <label class="view-source-button" for="MrregisterTransformedOutputs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MrregisterTransformedOutputs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MrregisterTransformedOutputs-18"><a href="#MrregisterTransformedOutputs-18"><span class="linenos">18</span></a><span class="k">class</span> <span class="nc">MrregisterTransformedOutputs</span><span class="p">(</span><span class="n">typing</span><span class="o">.</span><span class="n">NamedTuple</span><span class="p">):</span>
</span><span id="MrregisterTransformedOutputs-19"><a href="#MrregisterTransformedOutputs-19"><span class="linenos">19</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MrregisterTransformedOutputs-20"><a href="#MrregisterTransformedOutputs-20"><span class="linenos">20</span></a><span class="sd">    Output object returned when calling `MrregisterTransformed.run(...)`.</span>
</span><span id="MrregisterTransformedOutputs-21"><a href="#MrregisterTransformedOutputs-21"><span class="linenos">21</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="MrregisterTransformedOutputs-22"><a href="#MrregisterTransformedOutputs-22"><span class="linenos">22</span></a>    <span class="n">root</span><span class="p">:</span> <span class="n">OutputPathType</span>
</span><span id="MrregisterTransformedOutputs-23"><a href="#MrregisterTransformedOutputs-23"><span class="linenos">23</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Output root folder. This is the root folder for all outputs.&quot;&quot;&quot;</span>
</span><span id="MrregisterTransformedOutputs-24"><a href="#MrregisterTransformedOutputs-24"><span class="linenos">24</span></a>    <span class="n">image</span><span class="p">:</span> <span class="n">OutputPathType</span>
</span><span id="MrregisterTransformedOutputs-25"><a href="#MrregisterTransformedOutputs-25"><span class="linenos">25</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;image1 after registration transformed and regridded to the space of image2. Note that -transformed needs to be repeated for each contrast if multi-contrast registration is used.&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Output object returned when calling <code><a href="#MrregisterTransformed.run">MrregisterTransformed.run</a>(...)</code>.</p>
</div>


                            <div id="MrregisterTransformedOutputs.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">MrregisterTransformedOutputs</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">root</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span>, </span><span class="param"><span class="n">image</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#MrregisterTransformedOutputs.__init__"></a>
    
            <div class="docstring"><p>Create new instance of MrregisterTransformedOutputs(root, image)</p>
</div>


                            </div>
                            <div id="MrregisterTransformedOutputs.root" class="classattr">
                                <div class="attr variable">
            <span class="name">root</span><span class="annotation">: pathlib.Path | str</span>

        
    </div>
    <a class="headerlink" href="#MrregisterTransformedOutputs.root"></a>
    
            <div class="docstring"><p>Output root folder. This is the root folder for all outputs.</p>
</div>


                            </div>
                            <div id="MrregisterTransformedOutputs.image" class="classattr">
                                <div class="attr variable">
            <span class="name">image</span><span class="annotation">: pathlib.Path | str</span>

        
    </div>
    <a class="headerlink" href="#MrregisterTransformedOutputs.image"></a>
    
            <div class="docstring"><p>image1 after registration transformed and regridded to the space of image2. Note that -transformed needs to be repeated for each contrast if multi-contrast registration is used.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>builtins.tuple</dt>
                                <dd id="MrregisterTransformedOutputs.index" class="function">index</dd>
                <dd id="MrregisterTransformedOutputs.count" class="function">count</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="mrregister">
                            <input id="mrregister-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">mrregister</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">image1_image2</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">contrast1_contrast2</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">type_</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">transformed</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n"><a href="#MrregisterTransformed">MrregisterTransformed</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">transformed_midway</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n"><a href="#MrregisterTransformedMidway">MrregisterTransformedMidway</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">mask1</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">mask2</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">nan</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">rigid</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">rigid_1tomidway</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">rigid_2tomidway</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">rigid_init_translation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">rigid_init_rotation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">rigid_init_matrix</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">rigid_scale</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">rigid_niter</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">rigid_metric</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">rigid_metric_diff_estimator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">rigid_lmax</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">rigid_log</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">affine</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">affine_1tomidway</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">affine_2tomidway</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">affine_init_translation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">affine_init_rotation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">affine_init_matrix</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">affine_scale</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">affine_niter</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">affine_metric</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">affine_metric_diff_estimator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">affine_lmax</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">affine_log</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">init_translation_unmasked1</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">init_translation_unmasked2</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">init_rotation_unmasked1</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">init_rotation_unmasked2</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">init_rotation_search_angles</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">init_rotation_search_scale</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">init_rotation_search_directions</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">init_rotation_search_run_global</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">init_rotation_search_global_iterations</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">linstage_iterations</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">linstage_optimiser_first</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">linstage_optimiser_last</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">linstage_optimiser_default</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">linstage_diagnostics_prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">nl_warp</span><span class="p">:</span> <span class="n"><a href="#MrregisterNlWarp">MrregisterNlWarp</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">nl_warp_full</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">nl_init</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">nl_scale</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">nl_niter</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">nl_update_smooth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">nl_disp_smooth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">nl_grad_step</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">nl_lmax</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">diagnostics_image</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">directions</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">noreorientation</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">mc_weights</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">datatype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">info</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">quiet</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">nthreads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">config</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n"><a href="#MrregisterConfig">MrregisterConfig</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">help_</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">version</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">runner</span><span class="p">:</span> <span class="n">styxdefs</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Runner</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n"><a href="#MrregisterOutputs">MrregisterOutputs</a></span>:</span></span>

                <label class="view-source-button" for="mrregister-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#mrregister"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="mrregister-272"><a href="#mrregister-272"><span class="linenos">272</span></a><span class="k">def</span> <span class="nf">mrregister</span><span class="p">(</span>
</span><span id="mrregister-273"><a href="#mrregister-273"><span class="linenos">273</span></a>    <span class="n">image1_image2</span><span class="p">:</span> <span class="n">InputPathType</span><span class="p">,</span>
</span><span id="mrregister-274"><a href="#mrregister-274"><span class="linenos">274</span></a>    <span class="n">contrast1_contrast2</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">InputPathType</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-275"><a href="#mrregister-275"><span class="linenos">275</span></a>    <span class="n">type_</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-276"><a href="#mrregister-276"><span class="linenos">276</span></a>    <span class="n">transformed</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">MrregisterTransformed</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-277"><a href="#mrregister-277"><span class="linenos">277</span></a>    <span class="n">transformed_midway</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">MrregisterTransformedMidway</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-278"><a href="#mrregister-278"><span class="linenos">278</span></a>    <span class="n">mask1</span><span class="p">:</span> <span class="n">InputPathType</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-279"><a href="#mrregister-279"><span class="linenos">279</span></a>    <span class="n">mask2</span><span class="p">:</span> <span class="n">InputPathType</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-280"><a href="#mrregister-280"><span class="linenos">280</span></a>    <span class="n">nan</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="mrregister-281"><a href="#mrregister-281"><span class="linenos">281</span></a>    <span class="n">rigid</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-282"><a href="#mrregister-282"><span class="linenos">282</span></a>    <span class="n">rigid_1tomidway</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-283"><a href="#mrregister-283"><span class="linenos">283</span></a>    <span class="n">rigid_2tomidway</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-284"><a href="#mrregister-284"><span class="linenos">284</span></a>    <span class="n">rigid_init_translation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-285"><a href="#mrregister-285"><span class="linenos">285</span></a>    <span class="n">rigid_init_rotation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-286"><a href="#mrregister-286"><span class="linenos">286</span></a>    <span class="n">rigid_init_matrix</span><span class="p">:</span> <span class="n">InputPathType</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-287"><a href="#mrregister-287"><span class="linenos">287</span></a>    <span class="n">rigid_scale</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-288"><a href="#mrregister-288"><span class="linenos">288</span></a>    <span class="n">rigid_niter</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-289"><a href="#mrregister-289"><span class="linenos">289</span></a>    <span class="n">rigid_metric</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-290"><a href="#mrregister-290"><span class="linenos">290</span></a>    <span class="n">rigid_metric_diff_estimator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-291"><a href="#mrregister-291"><span class="linenos">291</span></a>    <span class="n">rigid_lmax</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-292"><a href="#mrregister-292"><span class="linenos">292</span></a>    <span class="n">rigid_log</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-293"><a href="#mrregister-293"><span class="linenos">293</span></a>    <span class="n">affine</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-294"><a href="#mrregister-294"><span class="linenos">294</span></a>    <span class="n">affine_1tomidway</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-295"><a href="#mrregister-295"><span class="linenos">295</span></a>    <span class="n">affine_2tomidway</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-296"><a href="#mrregister-296"><span class="linenos">296</span></a>    <span class="n">affine_init_translation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-297"><a href="#mrregister-297"><span class="linenos">297</span></a>    <span class="n">affine_init_rotation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-298"><a href="#mrregister-298"><span class="linenos">298</span></a>    <span class="n">affine_init_matrix</span><span class="p">:</span> <span class="n">InputPathType</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-299"><a href="#mrregister-299"><span class="linenos">299</span></a>    <span class="n">affine_scale</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-300"><a href="#mrregister-300"><span class="linenos">300</span></a>    <span class="n">affine_niter</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-301"><a href="#mrregister-301"><span class="linenos">301</span></a>    <span class="n">affine_metric</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-302"><a href="#mrregister-302"><span class="linenos">302</span></a>    <span class="n">affine_metric_diff_estimator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-303"><a href="#mrregister-303"><span class="linenos">303</span></a>    <span class="n">affine_lmax</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-304"><a href="#mrregister-304"><span class="linenos">304</span></a>    <span class="n">affine_log</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-305"><a href="#mrregister-305"><span class="linenos">305</span></a>    <span class="n">init_translation_unmasked1</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="mrregister-306"><a href="#mrregister-306"><span class="linenos">306</span></a>    <span class="n">init_translation_unmasked2</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="mrregister-307"><a href="#mrregister-307"><span class="linenos">307</span></a>    <span class="n">init_rotation_unmasked1</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="mrregister-308"><a href="#mrregister-308"><span class="linenos">308</span></a>    <span class="n">init_rotation_unmasked2</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="mrregister-309"><a href="#mrregister-309"><span class="linenos">309</span></a>    <span class="n">init_rotation_search_angles</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-310"><a href="#mrregister-310"><span class="linenos">310</span></a>    <span class="n">init_rotation_search_scale</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-311"><a href="#mrregister-311"><span class="linenos">311</span></a>    <span class="n">init_rotation_search_directions</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-312"><a href="#mrregister-312"><span class="linenos">312</span></a>    <span class="n">init_rotation_search_run_global</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="mrregister-313"><a href="#mrregister-313"><span class="linenos">313</span></a>    <span class="n">init_rotation_search_global_iterations</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-314"><a href="#mrregister-314"><span class="linenos">314</span></a>    <span class="n">linstage_iterations</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-315"><a href="#mrregister-315"><span class="linenos">315</span></a>    <span class="n">linstage_optimiser_first</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-316"><a href="#mrregister-316"><span class="linenos">316</span></a>    <span class="n">linstage_optimiser_last</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-317"><a href="#mrregister-317"><span class="linenos">317</span></a>    <span class="n">linstage_optimiser_default</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-318"><a href="#mrregister-318"><span class="linenos">318</span></a>    <span class="n">linstage_diagnostics_prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-319"><a href="#mrregister-319"><span class="linenos">319</span></a>    <span class="n">nl_warp</span><span class="p">:</span> <span class="n">MrregisterNlWarp</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-320"><a href="#mrregister-320"><span class="linenos">320</span></a>    <span class="n">nl_warp_full</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-321"><a href="#mrregister-321"><span class="linenos">321</span></a>    <span class="n">nl_init</span><span class="p">:</span> <span class="n">InputPathType</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-322"><a href="#mrregister-322"><span class="linenos">322</span></a>    <span class="n">nl_scale</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-323"><a href="#mrregister-323"><span class="linenos">323</span></a>    <span class="n">nl_niter</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-324"><a href="#mrregister-324"><span class="linenos">324</span></a>    <span class="n">nl_update_smooth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-325"><a href="#mrregister-325"><span class="linenos">325</span></a>    <span class="n">nl_disp_smooth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-326"><a href="#mrregister-326"><span class="linenos">326</span></a>    <span class="n">nl_grad_step</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-327"><a href="#mrregister-327"><span class="linenos">327</span></a>    <span class="n">nl_lmax</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-328"><a href="#mrregister-328"><span class="linenos">328</span></a>    <span class="n">diagnostics_image</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-329"><a href="#mrregister-329"><span class="linenos">329</span></a>    <span class="n">directions</span><span class="p">:</span> <span class="n">InputPathType</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-330"><a href="#mrregister-330"><span class="linenos">330</span></a>    <span class="n">noreorientation</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="mrregister-331"><a href="#mrregister-331"><span class="linenos">331</span></a>    <span class="n">mc_weights</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-332"><a href="#mrregister-332"><span class="linenos">332</span></a>    <span class="n">datatype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-333"><a href="#mrregister-333"><span class="linenos">333</span></a>    <span class="n">info</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="mrregister-334"><a href="#mrregister-334"><span class="linenos">334</span></a>    <span class="n">quiet</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="mrregister-335"><a href="#mrregister-335"><span class="linenos">335</span></a>    <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="mrregister-336"><a href="#mrregister-336"><span class="linenos">336</span></a>    <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="mrregister-337"><a href="#mrregister-337"><span class="linenos">337</span></a>    <span class="n">nthreads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-338"><a href="#mrregister-338"><span class="linenos">338</span></a>    <span class="n">config</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">MrregisterConfig</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-339"><a href="#mrregister-339"><span class="linenos">339</span></a>    <span class="n">help_</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="mrregister-340"><a href="#mrregister-340"><span class="linenos">340</span></a>    <span class="n">version</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="mrregister-341"><a href="#mrregister-341"><span class="linenos">341</span></a>    <span class="n">runner</span><span class="p">:</span> <span class="n">Runner</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-342"><a href="#mrregister-342"><span class="linenos">342</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MrregisterOutputs</span><span class="p">:</span>
</span><span id="mrregister-343"><a href="#mrregister-343"><span class="linenos">343</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="mrregister-344"><a href="#mrregister-344"><span class="linenos">344</span></a><span class="sd">    mrregister by David Raffelt (david.raffelt@florey.edu.au) &amp; Max Pietsch</span>
</span><span id="mrregister-345"><a href="#mrregister-345"><span class="linenos">345</span></a><span class="sd">    (maximilian.pietsch@kcl.ac.uk).</span>
</span><span id="mrregister-346"><a href="#mrregister-346"><span class="linenos">346</span></a><span class="sd">    </span>
</span><span id="mrregister-347"><a href="#mrregister-347"><span class="linenos">347</span></a><span class="sd">    Register two images together using a symmetric rigid, affine or non-linear</span>
</span><span id="mrregister-348"><a href="#mrregister-348"><span class="linenos">348</span></a><span class="sd">    transformation model.</span>
</span><span id="mrregister-349"><a href="#mrregister-349"><span class="linenos">349</span></a><span class="sd">    </span>
</span><span id="mrregister-350"><a href="#mrregister-350"><span class="linenos">350</span></a><span class="sd">    By default this application will perform an affine, followed by non-linear</span>
</span><span id="mrregister-351"><a href="#mrregister-351"><span class="linenos">351</span></a><span class="sd">    registration.</span>
</span><span id="mrregister-352"><a href="#mrregister-352"><span class="linenos">352</span></a><span class="sd">    </span>
</span><span id="mrregister-353"><a href="#mrregister-353"><span class="linenos">353</span></a><span class="sd">    FOD registration (with apodised point spread reorientation) will be</span>
</span><span id="mrregister-354"><a href="#mrregister-354"><span class="linenos">354</span></a><span class="sd">    performed by default if the number of volumes in the 4th dimension equals</span>
</span><span id="mrregister-355"><a href="#mrregister-355"><span class="linenos">355</span></a><span class="sd">    the number of coefficients in an antipodally symmetric spherical harmonic</span>
</span><span id="mrregister-356"><a href="#mrregister-356"><span class="linenos">356</span></a><span class="sd">    series (e.g. 6, 15, 28 etc). The -no_reorientation option can be used to</span>
</span><span id="mrregister-357"><a href="#mrregister-357"><span class="linenos">357</span></a><span class="sd">    force reorientation off if required.</span>
</span><span id="mrregister-358"><a href="#mrregister-358"><span class="linenos">358</span></a><span class="sd">    </span>
</span><span id="mrregister-359"><a href="#mrregister-359"><span class="linenos">359</span></a><span class="sd">    Non-linear registration computes warps to map from both image1-&gt;image2 and</span>
</span><span id="mrregister-360"><a href="#mrregister-360"><span class="linenos">360</span></a><span class="sd">    image2-&gt;image1. Similar to Avants (2008) Med Image Anal. 12(1): 26–41,</span>
</span><span id="mrregister-361"><a href="#mrregister-361"><span class="linenos">361</span></a><span class="sd">    registration is performed by matching both the image1 and image2 in a</span>
</span><span id="mrregister-362"><a href="#mrregister-362"><span class="linenos">362</span></a><span class="sd">    &#39;midway space&#39;. Warps can be saved as two deformation fields that map</span>
</span><span id="mrregister-363"><a href="#mrregister-363"><span class="linenos">363</span></a><span class="sd">    directly between image1-&gt;image2 and image2-&gt;image1, or if using</span>
</span><span id="mrregister-364"><a href="#mrregister-364"><span class="linenos">364</span></a><span class="sd">    -nl_warp_full as a single 5D file that stores all 4 warps</span>
</span><span id="mrregister-365"><a href="#mrregister-365"><span class="linenos">365</span></a><span class="sd">    image1-&gt;mid-&gt;image2, and image2-&gt;mid-&gt;image1. The 5D warp format stores</span>
</span><span id="mrregister-366"><a href="#mrregister-366"><span class="linenos">366</span></a><span class="sd">    x,y,z deformations in the 4th dimension, and uses the 5th dimension to index</span>
</span><span id="mrregister-367"><a href="#mrregister-367"><span class="linenos">367</span></a><span class="sd">    the 4 warps. The affine transforms estimated (to midway space) are also</span>
</span><span id="mrregister-368"><a href="#mrregister-368"><span class="linenos">368</span></a><span class="sd">    stored as comments in the image header. The 5D warp file can be used to</span>
</span><span id="mrregister-369"><a href="#mrregister-369"><span class="linenos">369</span></a><span class="sd">    reinitialise subsequent registrations, in addition to transforming images to</span>
</span><span id="mrregister-370"><a href="#mrregister-370"><span class="linenos">370</span></a><span class="sd">    midway space (e.g. for intra-subject alignment in a 2-time-point</span>
</span><span id="mrregister-371"><a href="#mrregister-371"><span class="linenos">371</span></a><span class="sd">    longitudinal analysis).</span>
</span><span id="mrregister-372"><a href="#mrregister-372"><span class="linenos">372</span></a><span class="sd">    </span>
</span><span id="mrregister-373"><a href="#mrregister-373"><span class="linenos">373</span></a><span class="sd">    References:</span>
</span><span id="mrregister-374"><a href="#mrregister-374"><span class="linenos">374</span></a><span class="sd">    </span>
</span><span id="mrregister-375"><a href="#mrregister-375"><span class="linenos">375</span></a><span class="sd">    * If FOD registration is being performed:</span>
</span><span id="mrregister-376"><a href="#mrregister-376"><span class="linenos">376</span></a><span class="sd">    Raffelt, D.; Tournier, J.-D.; Fripp, J; Crozier, S.; Connelly, A. &amp; Salvado,</span>
</span><span id="mrregister-377"><a href="#mrregister-377"><span class="linenos">377</span></a><span class="sd">    O. Symmetric diffeomorphic registration of fibre orientation distributions.</span>
</span><span id="mrregister-378"><a href="#mrregister-378"><span class="linenos">378</span></a><span class="sd">    NeuroImage, 2011, 56(3), 1171-1180</span>
</span><span id="mrregister-379"><a href="#mrregister-379"><span class="linenos">379</span></a><span class="sd">    </span>
</span><span id="mrregister-380"><a href="#mrregister-380"><span class="linenos">380</span></a><span class="sd">    Raffelt, D.; Tournier, J.-D.; Crozier, S.; Connelly, A. &amp; Salvado, O.</span>
</span><span id="mrregister-381"><a href="#mrregister-381"><span class="linenos">381</span></a><span class="sd">    Reorientation of fiber orientation distributions using apodized point spread</span>
</span><span id="mrregister-382"><a href="#mrregister-382"><span class="linenos">382</span></a><span class="sd">    functions. Magnetic Resonance in Medicine, 2012, 67, 844-855.</span>
</span><span id="mrregister-383"><a href="#mrregister-383"><span class="linenos">383</span></a><span class="sd">    </span>
</span><span id="mrregister-384"><a href="#mrregister-384"><span class="linenos">384</span></a><span class="sd">    More information:</span>
</span><span id="mrregister-385"><a href="#mrregister-385"><span class="linenos">385</span></a><span class="sd">    https://mrtrix.readthedocs.io/en/latest/reference/commands/mrregister.html</span>
</span><span id="mrregister-386"><a href="#mrregister-386"><span class="linenos">386</span></a><span class="sd">    </span>
</span><span id="mrregister-387"><a href="#mrregister-387"><span class="linenos">387</span></a><span class="sd">    Args:</span>
</span><span id="mrregister-388"><a href="#mrregister-388"><span class="linenos">388</span></a><span class="sd">        image1_image2: input image 1 (&#39;moving&#39;) and input image 2 (&#39;template&#39;).</span>
</span><span id="mrregister-389"><a href="#mrregister-389"><span class="linenos">389</span></a><span class="sd">        contrast1_contrast2: optional list of additional input images used as\</span>
</span><span id="mrregister-390"><a href="#mrregister-390"><span class="linenos">390</span></a><span class="sd">            additional contrasts. Can be used multiple times. contrastX and imageX\</span>
</span><span id="mrregister-391"><a href="#mrregister-391"><span class="linenos">391</span></a><span class="sd">            must share the same coordinate system.</span>
</span><span id="mrregister-392"><a href="#mrregister-392"><span class="linenos">392</span></a><span class="sd">        type_: the registration type. Valid choices are: rigid, affine,\</span>
</span><span id="mrregister-393"><a href="#mrregister-393"><span class="linenos">393</span></a><span class="sd">            nonlinear, rigid_affine, rigid_nonlinear, affine_nonlinear,\</span>
</span><span id="mrregister-394"><a href="#mrregister-394"><span class="linenos">394</span></a><span class="sd">            rigid_affine_nonlinear (Default: affine_nonlinear).</span>
</span><span id="mrregister-395"><a href="#mrregister-395"><span class="linenos">395</span></a><span class="sd">        transformed: image1 after registration transformed and regridded to the\</span>
</span><span id="mrregister-396"><a href="#mrregister-396"><span class="linenos">396</span></a><span class="sd">            space of image2. Note that -transformed needs to be repeated for each\</span>
</span><span id="mrregister-397"><a href="#mrregister-397"><span class="linenos">397</span></a><span class="sd">            contrast if multi-contrast registration is used.</span>
</span><span id="mrregister-398"><a href="#mrregister-398"><span class="linenos">398</span></a><span class="sd">        transformed_midway: image1 and image2 after registration transformed\</span>
</span><span id="mrregister-399"><a href="#mrregister-399"><span class="linenos">399</span></a><span class="sd">            and regridded to the midway space. Note that -transformed_midway needs\</span>
</span><span id="mrregister-400"><a href="#mrregister-400"><span class="linenos">400</span></a><span class="sd">            to be repeated for each contrast if multi-contrast registration is\</span>
</span><span id="mrregister-401"><a href="#mrregister-401"><span class="linenos">401</span></a><span class="sd">            used.</span>
</span><span id="mrregister-402"><a href="#mrregister-402"><span class="linenos">402</span></a><span class="sd">        mask1: a mask to define the region of image1 to use for optimisation.</span>
</span><span id="mrregister-403"><a href="#mrregister-403"><span class="linenos">403</span></a><span class="sd">        mask2: a mask to define the region of image2 to use for optimisation.</span>
</span><span id="mrregister-404"><a href="#mrregister-404"><span class="linenos">404</span></a><span class="sd">        nan: use NaN as out of bounds value. (Default: 0.0).</span>
</span><span id="mrregister-405"><a href="#mrregister-405"><span class="linenos">405</span></a><span class="sd">        rigid: the output text file containing the rigid transformation as a\</span>
</span><span id="mrregister-406"><a href="#mrregister-406"><span class="linenos">406</span></a><span class="sd">            4x4 matrix.</span>
</span><span id="mrregister-407"><a href="#mrregister-407"><span class="linenos">407</span></a><span class="sd">        rigid_1tomidway: the output text file containing the rigid\</span>
</span><span id="mrregister-408"><a href="#mrregister-408"><span class="linenos">408</span></a><span class="sd">            transformation that aligns image1 to image2 in their common midway\</span>
</span><span id="mrregister-409"><a href="#mrregister-409"><span class="linenos">409</span></a><span class="sd">            space as a 4x4 matrix.</span>
</span><span id="mrregister-410"><a href="#mrregister-410"><span class="linenos">410</span></a><span class="sd">        rigid_2tomidway: the output text file containing the rigid\</span>
</span><span id="mrregister-411"><a href="#mrregister-411"><span class="linenos">411</span></a><span class="sd">            transformation that aligns image2 to image1 in their common midway\</span>
</span><span id="mrregister-412"><a href="#mrregister-412"><span class="linenos">412</span></a><span class="sd">            space as a 4x4 matrix.</span>
</span><span id="mrregister-413"><a href="#mrregister-413"><span class="linenos">413</span></a><span class="sd">        rigid_init_translation: initialise the translation and centre of\</span>
</span><span id="mrregister-414"><a href="#mrregister-414"><span class="linenos">414</span></a><span class="sd">            rotation\</span>
</span><span id="mrregister-415"><a href="#mrregister-415"><span class="linenos">415</span></a><span class="sd">            Valid choices are:\</span>
</span><span id="mrregister-416"><a href="#mrregister-416"><span class="linenos">416</span></a><span class="sd">            mass (aligns the centers of mass of both images, default),\</span>
</span><span id="mrregister-417"><a href="#mrregister-417"><span class="linenos">417</span></a><span class="sd">            geometric (aligns geometric image centres) and none.</span>
</span><span id="mrregister-418"><a href="#mrregister-418"><span class="linenos">418</span></a><span class="sd">        rigid_init_rotation: initialise the rotation Valid choices are:\</span>
</span><span id="mrregister-419"><a href="#mrregister-419"><span class="linenos">419</span></a><span class="sd">            search (search for the best rotation using mean squared residuals),\</span>
</span><span id="mrregister-420"><a href="#mrregister-420"><span class="linenos">420</span></a><span class="sd">            moments (rotation based on directions of intensity variance with\</span>
</span><span id="mrregister-421"><a href="#mrregister-421"><span class="linenos">421</span></a><span class="sd">            respect to centre of mass),\</span>
</span><span id="mrregister-422"><a href="#mrregister-422"><span class="linenos">422</span></a><span class="sd">            none (default).</span>
</span><span id="mrregister-423"><a href="#mrregister-423"><span class="linenos">423</span></a><span class="sd">        rigid_init_matrix: initialise either the rigid, affine, or syn\</span>
</span><span id="mrregister-424"><a href="#mrregister-424"><span class="linenos">424</span></a><span class="sd">            registration with the supplied rigid transformation (as a 4x4 matrix in\</span>
</span><span id="mrregister-425"><a href="#mrregister-425"><span class="linenos">425</span></a><span class="sd">            scanner coordinates). Note that this overrides rigid_init_translation\</span>
</span><span id="mrregister-426"><a href="#mrregister-426"><span class="linenos">426</span></a><span class="sd">            and rigid_init_rotation initialisation.</span>
</span><span id="mrregister-427"><a href="#mrregister-427"><span class="linenos">427</span></a><span class="sd">        rigid_scale: use a multi-resolution scheme by defining a scale factor\</span>
</span><span id="mrregister-428"><a href="#mrregister-428"><span class="linenos">428</span></a><span class="sd">            for each level using comma separated values (Default: 0.25,0.5,1.0).</span>
</span><span id="mrregister-429"><a href="#mrregister-429"><span class="linenos">429</span></a><span class="sd">        rigid_niter: the maximum number of gradient descent iterations per\</span>
</span><span id="mrregister-430"><a href="#mrregister-430"><span class="linenos">430</span></a><span class="sd">            stage. This can be specified either as a single number for all\</span>
</span><span id="mrregister-431"><a href="#mrregister-431"><span class="linenos">431</span></a><span class="sd">            multi-resolution levels, or a single value for each level. (Default:\</span>
</span><span id="mrregister-432"><a href="#mrregister-432"><span class="linenos">432</span></a><span class="sd">            1000).</span>
</span><span id="mrregister-433"><a href="#mrregister-433"><span class="linenos">433</span></a><span class="sd">        rigid_metric: valid choices are: diff (intensity differences), Default:\</span>
</span><span id="mrregister-434"><a href="#mrregister-434"><span class="linenos">434</span></a><span class="sd">            diff.</span>
</span><span id="mrregister-435"><a href="#mrregister-435"><span class="linenos">435</span></a><span class="sd">        rigid_metric_diff_estimator: Valid choices are: l1 (least absolute:\</span>
</span><span id="mrregister-436"><a href="#mrregister-436"><span class="linenos">436</span></a><span class="sd">            |x|), l2 (ordinary least squares), lp (least powers: |x|^1.2), Default:\</span>
</span><span id="mrregister-437"><a href="#mrregister-437"><span class="linenos">437</span></a><span class="sd">            l2.</span>
</span><span id="mrregister-438"><a href="#mrregister-438"><span class="linenos">438</span></a><span class="sd">        rigid_lmax: explicitly set the lmax to be used per scale factor in\</span>
</span><span id="mrregister-439"><a href="#mrregister-439"><span class="linenos">439</span></a><span class="sd">            rigid FOD registration. By default FOD registration will use lmax 0,2,4\</span>
</span><span id="mrregister-440"><a href="#mrregister-440"><span class="linenos">440</span></a><span class="sd">            with default scale factors 0.25,0.5,1.0 respectively. Note that no\</span>
</span><span id="mrregister-441"><a href="#mrregister-441"><span class="linenos">441</span></a><span class="sd">            reorientation will be performed with lmax = 0.</span>
</span><span id="mrregister-442"><a href="#mrregister-442"><span class="linenos">442</span></a><span class="sd">        rigid_log: write gradient descent parameter evolution to log file.</span>
</span><span id="mrregister-443"><a href="#mrregister-443"><span class="linenos">443</span></a><span class="sd">        affine: the output text file containing the affine transformation as a\</span>
</span><span id="mrregister-444"><a href="#mrregister-444"><span class="linenos">444</span></a><span class="sd">            4x4 matrix.</span>
</span><span id="mrregister-445"><a href="#mrregister-445"><span class="linenos">445</span></a><span class="sd">        affine_1tomidway: the output text file containing the affine\</span>
</span><span id="mrregister-446"><a href="#mrregister-446"><span class="linenos">446</span></a><span class="sd">            transformation that aligns image1 to image2 in their common midway\</span>
</span><span id="mrregister-447"><a href="#mrregister-447"><span class="linenos">447</span></a><span class="sd">            space as a 4x4 matrix.</span>
</span><span id="mrregister-448"><a href="#mrregister-448"><span class="linenos">448</span></a><span class="sd">        affine_2tomidway: the output text file containing the affine\</span>
</span><span id="mrregister-449"><a href="#mrregister-449"><span class="linenos">449</span></a><span class="sd">            transformation that aligns image2 to image1 in their common midway\</span>
</span><span id="mrregister-450"><a href="#mrregister-450"><span class="linenos">450</span></a><span class="sd">            space as a 4x4 matrix.</span>
</span><span id="mrregister-451"><a href="#mrregister-451"><span class="linenos">451</span></a><span class="sd">        affine_init_translation: initialise the translation and centre of\</span>
</span><span id="mrregister-452"><a href="#mrregister-452"><span class="linenos">452</span></a><span class="sd">            rotation\</span>
</span><span id="mrregister-453"><a href="#mrregister-453"><span class="linenos">453</span></a><span class="sd">            Valid choices are:\</span>
</span><span id="mrregister-454"><a href="#mrregister-454"><span class="linenos">454</span></a><span class="sd">            mass (aligns the centers of mass of both images),\</span>
</span><span id="mrregister-455"><a href="#mrregister-455"><span class="linenos">455</span></a><span class="sd">            geometric (aligns geometric image centres) and none. (Default:\</span>
</span><span id="mrregister-456"><a href="#mrregister-456"><span class="linenos">456</span></a><span class="sd">            mass).</span>
</span><span id="mrregister-457"><a href="#mrregister-457"><span class="linenos">457</span></a><span class="sd">        affine_init_rotation: initialise the rotation Valid choices are:\</span>
</span><span id="mrregister-458"><a href="#mrregister-458"><span class="linenos">458</span></a><span class="sd">            search (search for the best rotation using mean squared residuals),\</span>
</span><span id="mrregister-459"><a href="#mrregister-459"><span class="linenos">459</span></a><span class="sd">            moments (rotation based on directions of intensity variance with\</span>
</span><span id="mrregister-460"><a href="#mrregister-460"><span class="linenos">460</span></a><span class="sd">            respect to centre of mass),\</span>
</span><span id="mrregister-461"><a href="#mrregister-461"><span class="linenos">461</span></a><span class="sd">            none (Default: none).</span>
</span><span id="mrregister-462"><a href="#mrregister-462"><span class="linenos">462</span></a><span class="sd">        affine_init_matrix: initialise either the affine, or syn registration\</span>
</span><span id="mrregister-463"><a href="#mrregister-463"><span class="linenos">463</span></a><span class="sd">            with the supplied affine transformation (as a 4x4 matrix in scanner\</span>
</span><span id="mrregister-464"><a href="#mrregister-464"><span class="linenos">464</span></a><span class="sd">            coordinates). Note that this overrides affine_init_translation and\</span>
</span><span id="mrregister-465"><a href="#mrregister-465"><span class="linenos">465</span></a><span class="sd">            affine_init_rotation initialisation.</span>
</span><span id="mrregister-466"><a href="#mrregister-466"><span class="linenos">466</span></a><span class="sd">        affine_scale: use a multi-resolution scheme by defining a scale factor\</span>
</span><span id="mrregister-467"><a href="#mrregister-467"><span class="linenos">467</span></a><span class="sd">            for each level using comma separated values (Default: 0.25,0.5,1.0).</span>
</span><span id="mrregister-468"><a href="#mrregister-468"><span class="linenos">468</span></a><span class="sd">        affine_niter: the maximum number of gradient descent iterations per\</span>
</span><span id="mrregister-469"><a href="#mrregister-469"><span class="linenos">469</span></a><span class="sd">            stage. This can be specified either as a single number for all\</span>
</span><span id="mrregister-470"><a href="#mrregister-470"><span class="linenos">470</span></a><span class="sd">            multi-resolution levels, or a single value for each level. (Default:\</span>
</span><span id="mrregister-471"><a href="#mrregister-471"><span class="linenos">471</span></a><span class="sd">            1000).</span>
</span><span id="mrregister-472"><a href="#mrregister-472"><span class="linenos">472</span></a><span class="sd">        affine_metric: valid choices are: diff (intensity differences),\</span>
</span><span id="mrregister-473"><a href="#mrregister-473"><span class="linenos">473</span></a><span class="sd">            Default: diff.</span>
</span><span id="mrregister-474"><a href="#mrregister-474"><span class="linenos">474</span></a><span class="sd">        affine_metric_diff_estimator: Valid choices are: l1 (least absolute:\</span>
</span><span id="mrregister-475"><a href="#mrregister-475"><span class="linenos">475</span></a><span class="sd">            |x|), l2 (ordinary least squares), lp (least powers: |x|^1.2), Default:\</span>
</span><span id="mrregister-476"><a href="#mrregister-476"><span class="linenos">476</span></a><span class="sd">            l2.</span>
</span><span id="mrregister-477"><a href="#mrregister-477"><span class="linenos">477</span></a><span class="sd">        affine_lmax: explicitly set the lmax to be used per scale factor in\</span>
</span><span id="mrregister-478"><a href="#mrregister-478"><span class="linenos">478</span></a><span class="sd">            affine FOD registration. By default FOD registration will use lmax\</span>
</span><span id="mrregister-479"><a href="#mrregister-479"><span class="linenos">479</span></a><span class="sd">            0,2,4 with default scale factors 0.25,0.5,1.0 respectively. Note that\</span>
</span><span id="mrregister-480"><a href="#mrregister-480"><span class="linenos">480</span></a><span class="sd">            no reorientation will be performed with lmax = 0.</span>
</span><span id="mrregister-481"><a href="#mrregister-481"><span class="linenos">481</span></a><span class="sd">        affine_log: write gradient descent parameter evolution to log file.</span>
</span><span id="mrregister-482"><a href="#mrregister-482"><span class="linenos">482</span></a><span class="sd">        init_translation_unmasked1: disregard mask1 for the translation\</span>
</span><span id="mrregister-483"><a href="#mrregister-483"><span class="linenos">483</span></a><span class="sd">            initialisation (affects &#39;mass&#39;).</span>
</span><span id="mrregister-484"><a href="#mrregister-484"><span class="linenos">484</span></a><span class="sd">        init_translation_unmasked2: disregard mask2 for the translation\</span>
</span><span id="mrregister-485"><a href="#mrregister-485"><span class="linenos">485</span></a><span class="sd">            initialisation (affects &#39;mass&#39;).</span>
</span><span id="mrregister-486"><a href="#mrregister-486"><span class="linenos">486</span></a><span class="sd">        init_rotation_unmasked1: disregard mask1 for the rotation\</span>
</span><span id="mrregister-487"><a href="#mrregister-487"><span class="linenos">487</span></a><span class="sd">            initialisation (affects &#39;search&#39; and &#39;moments&#39;).</span>
</span><span id="mrregister-488"><a href="#mrregister-488"><span class="linenos">488</span></a><span class="sd">        init_rotation_unmasked2: disregard mask2 for the rotation\</span>
</span><span id="mrregister-489"><a href="#mrregister-489"><span class="linenos">489</span></a><span class="sd">            initialisation (affects &#39;search&#39; and &#39;moments&#39;).</span>
</span><span id="mrregister-490"><a href="#mrregister-490"><span class="linenos">490</span></a><span class="sd">        init_rotation_search_angles: rotation angles for the local search in\</span>
</span><span id="mrregister-491"><a href="#mrregister-491"><span class="linenos">491</span></a><span class="sd">            degrees between 0 and 180. (Default: 2,5,10,15,20).</span>
</span><span id="mrregister-492"><a href="#mrregister-492"><span class="linenos">492</span></a><span class="sd">        init_rotation_search_scale: relative size of the images used for the\</span>
</span><span id="mrregister-493"><a href="#mrregister-493"><span class="linenos">493</span></a><span class="sd">            rotation search. (Default: 0.15).</span>
</span><span id="mrregister-494"><a href="#mrregister-494"><span class="linenos">494</span></a><span class="sd">        init_rotation_search_directions: number of rotation axis for local\</span>
</span><span id="mrregister-495"><a href="#mrregister-495"><span class="linenos">495</span></a><span class="sd">            search. (Default: 250).</span>
</span><span id="mrregister-496"><a href="#mrregister-496"><span class="linenos">496</span></a><span class="sd">        init_rotation_search_run_global: perform a global search. (Default:\</span>
</span><span id="mrregister-497"><a href="#mrregister-497"><span class="linenos">497</span></a><span class="sd">            local).</span>
</span><span id="mrregister-498"><a href="#mrregister-498"><span class="linenos">498</span></a><span class="sd">        init_rotation_search_global_iterations: number of rotations to\</span>
</span><span id="mrregister-499"><a href="#mrregister-499"><span class="linenos">499</span></a><span class="sd">            investigate (Default: 10000).</span>
</span><span id="mrregister-500"><a href="#mrregister-500"><span class="linenos">500</span></a><span class="sd">        linstage_iterations: number of iterations for each registration stage,\</span>
</span><span id="mrregister-501"><a href="#mrregister-501"><span class="linenos">501</span></a><span class="sd">            not to be confused with -rigid_niter or -affine_niter. This can be used\</span>
</span><span id="mrregister-502"><a href="#mrregister-502"><span class="linenos">502</span></a><span class="sd">            to generate intermediate diagnostics images\</span>
</span><span id="mrregister-503"><a href="#mrregister-503"><span class="linenos">503</span></a><span class="sd">            (-linstage.diagnostics.prefix) or to change the cost function optimiser\</span>
</span><span id="mrregister-504"><a href="#mrregister-504"><span class="linenos">504</span></a><span class="sd">            during registration (without the need to repeatedly resize the images).\</span>
</span><span id="mrregister-505"><a href="#mrregister-505"><span class="linenos">505</span></a><span class="sd">            (Default: 1 == no repetition).</span>
</span><span id="mrregister-506"><a href="#mrregister-506"><span class="linenos">506</span></a><span class="sd">        linstage_optimiser_first: Cost function optimisation algorithm to use\</span>
</span><span id="mrregister-507"><a href="#mrregister-507"><span class="linenos">507</span></a><span class="sd">            at first iteration of all stages. Valid choices: bbgd (Barzilai-Borwein\</span>
</span><span id="mrregister-508"><a href="#mrregister-508"><span class="linenos">508</span></a><span class="sd">            gradient descent) or gd (simple gradient descent). (Default: bbgd).</span>
</span><span id="mrregister-509"><a href="#mrregister-509"><span class="linenos">509</span></a><span class="sd">        linstage_optimiser_last: Cost function optimisation algorithm to use at\</span>
</span><span id="mrregister-510"><a href="#mrregister-510"><span class="linenos">510</span></a><span class="sd">            last iteration of all stages (if there are more than one). Valid\</span>
</span><span id="mrregister-511"><a href="#mrregister-511"><span class="linenos">511</span></a><span class="sd">            choices: bbgd (Barzilai-Borwein gradient descent) or gd (simple\</span>
</span><span id="mrregister-512"><a href="#mrregister-512"><span class="linenos">512</span></a><span class="sd">            gradient descent). (Default: bbgd).</span>
</span><span id="mrregister-513"><a href="#mrregister-513"><span class="linenos">513</span></a><span class="sd">        linstage_optimiser_default: Cost function optimisation algorithm to use\</span>
</span><span id="mrregister-514"><a href="#mrregister-514"><span class="linenos">514</span></a><span class="sd">            at any stage iteration other than first or last iteration. Valid\</span>
</span><span id="mrregister-515"><a href="#mrregister-515"><span class="linenos">515</span></a><span class="sd">            choices: bbgd (Barzilai-Borwein gradient descent) or gd (simple\</span>
</span><span id="mrregister-516"><a href="#mrregister-516"><span class="linenos">516</span></a><span class="sd">            gradient descent). (Default: bbgd).</span>
</span><span id="mrregister-517"><a href="#mrregister-517"><span class="linenos">517</span></a><span class="sd">        linstage_diagnostics_prefix: generate diagnostics images after every\</span>
</span><span id="mrregister-518"><a href="#mrregister-518"><span class="linenos">518</span></a><span class="sd">            registration stage.</span>
</span><span id="mrregister-519"><a href="#mrregister-519"><span class="linenos">519</span></a><span class="sd">        nl_warp: the non-linear warp output defined as two deformation fields,\</span>
</span><span id="mrregister-520"><a href="#mrregister-520"><span class="linenos">520</span></a><span class="sd">            where warp1 can be used to transform image1-&gt;image2 and warp2 to\</span>
</span><span id="mrregister-521"><a href="#mrregister-521"><span class="linenos">521</span></a><span class="sd">            transform image2-&gt;image1. The deformation fields also encapsulate any\</span>
</span><span id="mrregister-522"><a href="#mrregister-522"><span class="linenos">522</span></a><span class="sd">            linear transformation estimated prior to non-linear registration.</span>
</span><span id="mrregister-523"><a href="#mrregister-523"><span class="linenos">523</span></a><span class="sd">        nl_warp_full: output all warps used during registration. This saves\</span>
</span><span id="mrregister-524"><a href="#mrregister-524"><span class="linenos">524</span></a><span class="sd">            four different warps that map each image to a midway space and their\</span>
</span><span id="mrregister-525"><a href="#mrregister-525"><span class="linenos">525</span></a><span class="sd">            inverses in a single 5D image file. The 4th image dimension indexes the\</span>
</span><span id="mrregister-526"><a href="#mrregister-526"><span class="linenos">526</span></a><span class="sd">            x,y,z component of the deformation vector and the 5th dimension indexes\</span>
</span><span id="mrregister-527"><a href="#mrregister-527"><span class="linenos">527</span></a><span class="sd">            the field in this order: image1-&gt;midway, midway-&gt;image1,\</span>
</span><span id="mrregister-528"><a href="#mrregister-528"><span class="linenos">528</span></a><span class="sd">            image2-&gt;midway, midway-&gt;image2. Where image1-&gt;midway defines the field\</span>
</span><span id="mrregister-529"><a href="#mrregister-529"><span class="linenos">529</span></a><span class="sd">            that maps image1 onto the midway space using the reverse convention\</span>
</span><span id="mrregister-530"><a href="#mrregister-530"><span class="linenos">530</span></a><span class="sd">            When linear registration is performed first, the estimated linear\</span>
</span><span id="mrregister-531"><a href="#mrregister-531"><span class="linenos">531</span></a><span class="sd">            transform will be included in the comments of the image header, and\</span>
</span><span id="mrregister-532"><a href="#mrregister-532"><span class="linenos">532</span></a><span class="sd">            therefore the entire linear and non-linear transform can be applied (in\</span>
</span><span id="mrregister-533"><a href="#mrregister-533"><span class="linenos">533</span></a><span class="sd">            either direction) using this output warp file with mrtransform.</span>
</span><span id="mrregister-534"><a href="#mrregister-534"><span class="linenos">534</span></a><span class="sd">        nl_init: initialise the non-linear registration with the supplied warp\</span>
</span><span id="mrregister-535"><a href="#mrregister-535"><span class="linenos">535</span></a><span class="sd">            image. The supplied warp must be in the same format as output using the\</span>
</span><span id="mrregister-536"><a href="#mrregister-536"><span class="linenos">536</span></a><span class="sd">            -nl_warp_full option (i.e. have 4 deformation fields with the linear\</span>
</span><span id="mrregister-537"><a href="#mrregister-537"><span class="linenos">537</span></a><span class="sd">            transforms in the image header).</span>
</span><span id="mrregister-538"><a href="#mrregister-538"><span class="linenos">538</span></a><span class="sd">        nl_scale: use a multi-resolution scheme by defining a scale factor for\</span>
</span><span id="mrregister-539"><a href="#mrregister-539"><span class="linenos">539</span></a><span class="sd">            each level using comma separated values (Default: 0.25,0.5,1.0).</span>
</span><span id="mrregister-540"><a href="#mrregister-540"><span class="linenos">540</span></a><span class="sd">        nl_niter: the maximum number of iterations. This can be specified\</span>
</span><span id="mrregister-541"><a href="#mrregister-541"><span class="linenos">541</span></a><span class="sd">            either as a single number for all multi-resolution levels, or a single\</span>
</span><span id="mrregister-542"><a href="#mrregister-542"><span class="linenos">542</span></a><span class="sd">            value for each level. (Default: 50).</span>
</span><span id="mrregister-543"><a href="#mrregister-543"><span class="linenos">543</span></a><span class="sd">        nl_update_smooth: regularise the gradient update field with Gaussian\</span>
</span><span id="mrregister-544"><a href="#mrregister-544"><span class="linenos">544</span></a><span class="sd">            smoothing (standard deviation in voxel units, Default 2.0).</span>
</span><span id="mrregister-545"><a href="#mrregister-545"><span class="linenos">545</span></a><span class="sd">        nl_disp_smooth: regularise the displacement field with Gaussian\</span>
</span><span id="mrregister-546"><a href="#mrregister-546"><span class="linenos">546</span></a><span class="sd">            smoothing (standard deviation in voxel units, Default 1.0).</span>
</span><span id="mrregister-547"><a href="#mrregister-547"><span class="linenos">547</span></a><span class="sd">        nl_grad_step: the gradient step size for non-linear registration\</span>
</span><span id="mrregister-548"><a href="#mrregister-548"><span class="linenos">548</span></a><span class="sd">            (Default: 0.5).</span>
</span><span id="mrregister-549"><a href="#mrregister-549"><span class="linenos">549</span></a><span class="sd">        nl_lmax: explicitly set the lmax to be used per scale factor in\</span>
</span><span id="mrregister-550"><a href="#mrregister-550"><span class="linenos">550</span></a><span class="sd">            non-linear FOD registration. By default FOD registration will use lmax\</span>
</span><span id="mrregister-551"><a href="#mrregister-551"><span class="linenos">551</span></a><span class="sd">            0,2,4 with default scale factors 0.25,0.5,1.0 respectively. Note that\</span>
</span><span id="mrregister-552"><a href="#mrregister-552"><span class="linenos">552</span></a><span class="sd">            no reorientation will be performed with lmax = 0.</span>
</span><span id="mrregister-553"><a href="#mrregister-553"><span class="linenos">553</span></a><span class="sd">        diagnostics_image: write intermediate images for diagnostics purposes.</span>
</span><span id="mrregister-554"><a href="#mrregister-554"><span class="linenos">554</span></a><span class="sd">        directions: the directions used for FOD reorientation using apodised\</span>
</span><span id="mrregister-555"><a href="#mrregister-555"><span class="linenos">555</span></a><span class="sd">            point spread functions (Default: 60 directions).</span>
</span><span id="mrregister-556"><a href="#mrregister-556"><span class="linenos">556</span></a><span class="sd">        noreorientation: turn off FOD reorientation. Reorientation is on by\</span>
</span><span id="mrregister-557"><a href="#mrregister-557"><span class="linenos">557</span></a><span class="sd">            default if the number of volumes in the 4th dimension corresponds to\</span>
</span><span id="mrregister-558"><a href="#mrregister-558"><span class="linenos">558</span></a><span class="sd">            the number of coefficients in an antipodally symmetric spherical\</span>
</span><span id="mrregister-559"><a href="#mrregister-559"><span class="linenos">559</span></a><span class="sd">            harmonic series (i.e. 6, 15, 28, 45, 66 etc).</span>
</span><span id="mrregister-560"><a href="#mrregister-560"><span class="linenos">560</span></a><span class="sd">        mc_weights: relative weight of images used for multi-contrast\</span>
</span><span id="mrregister-561"><a href="#mrregister-561"><span class="linenos">561</span></a><span class="sd">            registration. Default: 1.0 (equal weighting).</span>
</span><span id="mrregister-562"><a href="#mrregister-562"><span class="linenos">562</span></a><span class="sd">        datatype: specify output image data type. Valid choices are: float32,\</span>
</span><span id="mrregister-563"><a href="#mrregister-563"><span class="linenos">563</span></a><span class="sd">            float32le, float32be, float64, float64le, float64be, int64, uint64,\</span>
</span><span id="mrregister-564"><a href="#mrregister-564"><span class="linenos">564</span></a><span class="sd">            int64le, uint64le, int64be, uint64be, int32, uint32, int32le, uint32le,\</span>
</span><span id="mrregister-565"><a href="#mrregister-565"><span class="linenos">565</span></a><span class="sd">            int32be, uint32be, int16, uint16, int16le, uint16le, int16be, uint16be,\</span>
</span><span id="mrregister-566"><a href="#mrregister-566"><span class="linenos">566</span></a><span class="sd">            cfloat32, cfloat32le, cfloat32be, cfloat64, cfloat64le, cfloat64be,\</span>
</span><span id="mrregister-567"><a href="#mrregister-567"><span class="linenos">567</span></a><span class="sd">            int8, uint8, bit.</span>
</span><span id="mrregister-568"><a href="#mrregister-568"><span class="linenos">568</span></a><span class="sd">        info: display information messages.</span>
</span><span id="mrregister-569"><a href="#mrregister-569"><span class="linenos">569</span></a><span class="sd">        quiet: do not display information messages or progress status;\</span>
</span><span id="mrregister-570"><a href="#mrregister-570"><span class="linenos">570</span></a><span class="sd">            alternatively, this can be achieved by setting the MRTRIX_QUIET\</span>
</span><span id="mrregister-571"><a href="#mrregister-571"><span class="linenos">571</span></a><span class="sd">            environment variable to a non-empty string.</span>
</span><span id="mrregister-572"><a href="#mrregister-572"><span class="linenos">572</span></a><span class="sd">        debug: display debugging messages.</span>
</span><span id="mrregister-573"><a href="#mrregister-573"><span class="linenos">573</span></a><span class="sd">        force: force overwrite of output files (caution: using the same file as\</span>
</span><span id="mrregister-574"><a href="#mrregister-574"><span class="linenos">574</span></a><span class="sd">            input and output might cause unexpected behaviour).</span>
</span><span id="mrregister-575"><a href="#mrregister-575"><span class="linenos">575</span></a><span class="sd">        nthreads: use this number of threads in multi-threaded applications\</span>
</span><span id="mrregister-576"><a href="#mrregister-576"><span class="linenos">576</span></a><span class="sd">            (set to 0 to disable multi-threading).</span>
</span><span id="mrregister-577"><a href="#mrregister-577"><span class="linenos">577</span></a><span class="sd">        config: temporarily set the value of an MRtrix config file entry.</span>
</span><span id="mrregister-578"><a href="#mrregister-578"><span class="linenos">578</span></a><span class="sd">        help_: display this information page and exit.</span>
</span><span id="mrregister-579"><a href="#mrregister-579"><span class="linenos">579</span></a><span class="sd">        version: display version information and exit.</span>
</span><span id="mrregister-580"><a href="#mrregister-580"><span class="linenos">580</span></a><span class="sd">        runner: Command runner.</span>
</span><span id="mrregister-581"><a href="#mrregister-581"><span class="linenos">581</span></a><span class="sd">    Returns:</span>
</span><span id="mrregister-582"><a href="#mrregister-582"><span class="linenos">582</span></a><span class="sd">        NamedTuple of outputs (described in `MrregisterOutputs`).</span>
</span><span id="mrregister-583"><a href="#mrregister-583"><span class="linenos">583</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="mrregister-584"><a href="#mrregister-584"><span class="linenos">584</span></a>    <span class="n">runner</span> <span class="o">=</span> <span class="n">runner</span> <span class="ow">or</span> <span class="n">get_global_runner</span><span class="p">()</span>
</span><span id="mrregister-585"><a href="#mrregister-585"><span class="linenos">585</span></a>    <span class="n">execution</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">start_execution</span><span class="p">(</span><span class="n">MRREGISTER_METADATA</span><span class="p">)</span>
</span><span id="mrregister-586"><a href="#mrregister-586"><span class="linenos">586</span></a>    <span class="n">cargs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="mrregister-587"><a href="#mrregister-587"><span class="linenos">587</span></a>    <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;mrregister&quot;</span><span class="p">)</span>
</span><span id="mrregister-588"><a href="#mrregister-588"><span class="linenos">588</span></a>    <span class="k">if</span> <span class="n">type_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-589"><a href="#mrregister-589"><span class="linenos">589</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-type&quot;</span><span class="p">,</span> <span class="n">type_</span><span class="p">])</span>
</span><span id="mrregister-590"><a href="#mrregister-590"><span class="linenos">590</span></a>    <span class="k">if</span> <span class="n">transformed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-591"><a href="#mrregister-591"><span class="linenos">591</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">a</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">execution</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">transformed</span><span class="p">]</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">c</span><span class="p">])</span>
</span><span id="mrregister-592"><a href="#mrregister-592"><span class="linenos">592</span></a>    <span class="k">if</span> <span class="n">transformed_midway</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-593"><a href="#mrregister-593"><span class="linenos">593</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">a</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">execution</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">transformed_midway</span><span class="p">]</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">c</span><span class="p">])</span>
</span><span id="mrregister-594"><a href="#mrregister-594"><span class="linenos">594</span></a>    <span class="k">if</span> <span class="n">mask1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-595"><a href="#mrregister-595"><span class="linenos">595</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-mask1&quot;</span><span class="p">,</span> <span class="n">execution</span><span class="o">.</span><span class="n">input_file</span><span class="p">(</span><span class="n">mask1</span><span class="p">)])</span>
</span><span id="mrregister-596"><a href="#mrregister-596"><span class="linenos">596</span></a>    <span class="k">if</span> <span class="n">mask2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-597"><a href="#mrregister-597"><span class="linenos">597</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-mask2&quot;</span><span class="p">,</span> <span class="n">execution</span><span class="o">.</span><span class="n">input_file</span><span class="p">(</span><span class="n">mask2</span><span class="p">)])</span>
</span><span id="mrregister-598"><a href="#mrregister-598"><span class="linenos">598</span></a>    <span class="k">if</span> <span class="n">nan</span><span class="p">:</span>
</span><span id="mrregister-599"><a href="#mrregister-599"><span class="linenos">599</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-nan&quot;</span><span class="p">)</span>
</span><span id="mrregister-600"><a href="#mrregister-600"><span class="linenos">600</span></a>    <span class="k">if</span> <span class="n">rigid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-601"><a href="#mrregister-601"><span class="linenos">601</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid&quot;</span><span class="p">,</span> <span class="n">rigid</span><span class="p">])</span>
</span><span id="mrregister-602"><a href="#mrregister-602"><span class="linenos">602</span></a>    <span class="k">if</span> <span class="n">rigid_1tomidway</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-603"><a href="#mrregister-603"><span class="linenos">603</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_1tomidway&quot;</span><span class="p">,</span> <span class="n">rigid_1tomidway</span><span class="p">])</span>
</span><span id="mrregister-604"><a href="#mrregister-604"><span class="linenos">604</span></a>    <span class="k">if</span> <span class="n">rigid_2tomidway</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-605"><a href="#mrregister-605"><span class="linenos">605</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_2tomidway&quot;</span><span class="p">,</span> <span class="n">rigid_2tomidway</span><span class="p">])</span>
</span><span id="mrregister-606"><a href="#mrregister-606"><span class="linenos">606</span></a>    <span class="k">if</span> <span class="n">rigid_init_translation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-607"><a href="#mrregister-607"><span class="linenos">607</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_init_translation&quot;</span><span class="p">,</span> <span class="n">rigid_init_translation</span><span class="p">])</span>
</span><span id="mrregister-608"><a href="#mrregister-608"><span class="linenos">608</span></a>    <span class="k">if</span> <span class="n">rigid_init_rotation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-609"><a href="#mrregister-609"><span class="linenos">609</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_init_rotation&quot;</span><span class="p">,</span> <span class="n">rigid_init_rotation</span><span class="p">])</span>
</span><span id="mrregister-610"><a href="#mrregister-610"><span class="linenos">610</span></a>    <span class="k">if</span> <span class="n">rigid_init_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-611"><a href="#mrregister-611"><span class="linenos">611</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_init_matrix&quot;</span><span class="p">,</span> <span class="n">execution</span><span class="o">.</span><span class="n">input_file</span><span class="p">(</span><span class="n">rigid_init_matrix</span><span class="p">)])</span>
</span><span id="mrregister-612"><a href="#mrregister-612"><span class="linenos">612</span></a>    <span class="k">if</span> <span class="n">rigid_scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-613"><a href="#mrregister-613"><span class="linenos">613</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_scale&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">rigid_scale</span><span class="p">)])</span>
</span><span id="mrregister-614"><a href="#mrregister-614"><span class="linenos">614</span></a>    <span class="k">if</span> <span class="n">rigid_niter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-615"><a href="#mrregister-615"><span class="linenos">615</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_niter&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">rigid_niter</span><span class="p">)])</span>
</span><span id="mrregister-616"><a href="#mrregister-616"><span class="linenos">616</span></a>    <span class="k">if</span> <span class="n">rigid_metric</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-617"><a href="#mrregister-617"><span class="linenos">617</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_metric&quot;</span><span class="p">,</span> <span class="n">rigid_metric</span><span class="p">])</span>
</span><span id="mrregister-618"><a href="#mrregister-618"><span class="linenos">618</span></a>    <span class="k">if</span> <span class="n">rigid_metric_diff_estimator</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-619"><a href="#mrregister-619"><span class="linenos">619</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_metric.diff.estimator&quot;</span><span class="p">,</span> <span class="n">rigid_metric_diff_estimator</span><span class="p">])</span>
</span><span id="mrregister-620"><a href="#mrregister-620"><span class="linenos">620</span></a>    <span class="k">if</span> <span class="n">rigid_lmax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-621"><a href="#mrregister-621"><span class="linenos">621</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_lmax&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">rigid_lmax</span><span class="p">)])</span>
</span><span id="mrregister-622"><a href="#mrregister-622"><span class="linenos">622</span></a>    <span class="k">if</span> <span class="n">rigid_log</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-623"><a href="#mrregister-623"><span class="linenos">623</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-rigid_log&quot;</span><span class="p">,</span> <span class="n">rigid_log</span><span class="p">])</span>
</span><span id="mrregister-624"><a href="#mrregister-624"><span class="linenos">624</span></a>    <span class="k">if</span> <span class="n">affine</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-625"><a href="#mrregister-625"><span class="linenos">625</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine&quot;</span><span class="p">,</span> <span class="n">affine</span><span class="p">])</span>
</span><span id="mrregister-626"><a href="#mrregister-626"><span class="linenos">626</span></a>    <span class="k">if</span> <span class="n">affine_1tomidway</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-627"><a href="#mrregister-627"><span class="linenos">627</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_1tomidway&quot;</span><span class="p">,</span> <span class="n">affine_1tomidway</span><span class="p">])</span>
</span><span id="mrregister-628"><a href="#mrregister-628"><span class="linenos">628</span></a>    <span class="k">if</span> <span class="n">affine_2tomidway</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-629"><a href="#mrregister-629"><span class="linenos">629</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_2tomidway&quot;</span><span class="p">,</span> <span class="n">affine_2tomidway</span><span class="p">])</span>
</span><span id="mrregister-630"><a href="#mrregister-630"><span class="linenos">630</span></a>    <span class="k">if</span> <span class="n">affine_init_translation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-631"><a href="#mrregister-631"><span class="linenos">631</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_init_translation&quot;</span><span class="p">,</span> <span class="n">affine_init_translation</span><span class="p">])</span>
</span><span id="mrregister-632"><a href="#mrregister-632"><span class="linenos">632</span></a>    <span class="k">if</span> <span class="n">affine_init_rotation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-633"><a href="#mrregister-633"><span class="linenos">633</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_init_rotation&quot;</span><span class="p">,</span> <span class="n">affine_init_rotation</span><span class="p">])</span>
</span><span id="mrregister-634"><a href="#mrregister-634"><span class="linenos">634</span></a>    <span class="k">if</span> <span class="n">affine_init_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-635"><a href="#mrregister-635"><span class="linenos">635</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_init_matrix&quot;</span><span class="p">,</span> <span class="n">execution</span><span class="o">.</span><span class="n">input_file</span><span class="p">(</span><span class="n">affine_init_matrix</span><span class="p">)])</span>
</span><span id="mrregister-636"><a href="#mrregister-636"><span class="linenos">636</span></a>    <span class="k">if</span> <span class="n">affine_scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-637"><a href="#mrregister-637"><span class="linenos">637</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_scale&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">affine_scale</span><span class="p">)])</span>
</span><span id="mrregister-638"><a href="#mrregister-638"><span class="linenos">638</span></a>    <span class="k">if</span> <span class="n">affine_niter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-639"><a href="#mrregister-639"><span class="linenos">639</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_niter&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">affine_niter</span><span class="p">)])</span>
</span><span id="mrregister-640"><a href="#mrregister-640"><span class="linenos">640</span></a>    <span class="k">if</span> <span class="n">affine_metric</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-641"><a href="#mrregister-641"><span class="linenos">641</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_metric&quot;</span><span class="p">,</span> <span class="n">affine_metric</span><span class="p">])</span>
</span><span id="mrregister-642"><a href="#mrregister-642"><span class="linenos">642</span></a>    <span class="k">if</span> <span class="n">affine_metric_diff_estimator</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-643"><a href="#mrregister-643"><span class="linenos">643</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_metric.diff.estimator&quot;</span><span class="p">,</span> <span class="n">affine_metric_diff_estimator</span><span class="p">])</span>
</span><span id="mrregister-644"><a href="#mrregister-644"><span class="linenos">644</span></a>    <span class="k">if</span> <span class="n">affine_lmax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-645"><a href="#mrregister-645"><span class="linenos">645</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_lmax&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">affine_lmax</span><span class="p">)])</span>
</span><span id="mrregister-646"><a href="#mrregister-646"><span class="linenos">646</span></a>    <span class="k">if</span> <span class="n">affine_log</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-647"><a href="#mrregister-647"><span class="linenos">647</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-affine_log&quot;</span><span class="p">,</span> <span class="n">affine_log</span><span class="p">])</span>
</span><span id="mrregister-648"><a href="#mrregister-648"><span class="linenos">648</span></a>    <span class="k">if</span> <span class="n">init_translation_unmasked1</span><span class="p">:</span>
</span><span id="mrregister-649"><a href="#mrregister-649"><span class="linenos">649</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-init_translation.unmasked1&quot;</span><span class="p">)</span>
</span><span id="mrregister-650"><a href="#mrregister-650"><span class="linenos">650</span></a>    <span class="k">if</span> <span class="n">init_translation_unmasked2</span><span class="p">:</span>
</span><span id="mrregister-651"><a href="#mrregister-651"><span class="linenos">651</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-init_translation.unmasked2&quot;</span><span class="p">)</span>
</span><span id="mrregister-652"><a href="#mrregister-652"><span class="linenos">652</span></a>    <span class="k">if</span> <span class="n">init_rotation_unmasked1</span><span class="p">:</span>
</span><span id="mrregister-653"><a href="#mrregister-653"><span class="linenos">653</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-init_rotation.unmasked1&quot;</span><span class="p">)</span>
</span><span id="mrregister-654"><a href="#mrregister-654"><span class="linenos">654</span></a>    <span class="k">if</span> <span class="n">init_rotation_unmasked2</span><span class="p">:</span>
</span><span id="mrregister-655"><a href="#mrregister-655"><span class="linenos">655</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-init_rotation.unmasked2&quot;</span><span class="p">)</span>
</span><span id="mrregister-656"><a href="#mrregister-656"><span class="linenos">656</span></a>    <span class="k">if</span> <span class="n">init_rotation_search_angles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-657"><a href="#mrregister-657"><span class="linenos">657</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-init_rotation.search.angles&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">init_rotation_search_angles</span><span class="p">)])</span>
</span><span id="mrregister-658"><a href="#mrregister-658"><span class="linenos">658</span></a>    <span class="k">if</span> <span class="n">init_rotation_search_scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-659"><a href="#mrregister-659"><span class="linenos">659</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-init_rotation.search.scale&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">init_rotation_search_scale</span><span class="p">)])</span>
</span><span id="mrregister-660"><a href="#mrregister-660"><span class="linenos">660</span></a>    <span class="k">if</span> <span class="n">init_rotation_search_directions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-661"><a href="#mrregister-661"><span class="linenos">661</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-init_rotation.search.directions&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">init_rotation_search_directions</span><span class="p">)])</span>
</span><span id="mrregister-662"><a href="#mrregister-662"><span class="linenos">662</span></a>    <span class="k">if</span> <span class="n">init_rotation_search_run_global</span><span class="p">:</span>
</span><span id="mrregister-663"><a href="#mrregister-663"><span class="linenos">663</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-init_rotation.search.run_global&quot;</span><span class="p">)</span>
</span><span id="mrregister-664"><a href="#mrregister-664"><span class="linenos">664</span></a>    <span class="k">if</span> <span class="n">init_rotation_search_global_iterations</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-665"><a href="#mrregister-665"><span class="linenos">665</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-init_rotation.search.global.iterations&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">init_rotation_search_global_iterations</span><span class="p">)])</span>
</span><span id="mrregister-666"><a href="#mrregister-666"><span class="linenos">666</span></a>    <span class="k">if</span> <span class="n">linstage_iterations</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-667"><a href="#mrregister-667"><span class="linenos">667</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-linstage.iterations&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">linstage_iterations</span><span class="p">)])</span>
</span><span id="mrregister-668"><a href="#mrregister-668"><span class="linenos">668</span></a>    <span class="k">if</span> <span class="n">linstage_optimiser_first</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-669"><a href="#mrregister-669"><span class="linenos">669</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-linstage.optimiser.first&quot;</span><span class="p">,</span> <span class="n">linstage_optimiser_first</span><span class="p">])</span>
</span><span id="mrregister-670"><a href="#mrregister-670"><span class="linenos">670</span></a>    <span class="k">if</span> <span class="n">linstage_optimiser_last</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-671"><a href="#mrregister-671"><span class="linenos">671</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-linstage.optimiser.last&quot;</span><span class="p">,</span> <span class="n">linstage_optimiser_last</span><span class="p">])</span>
</span><span id="mrregister-672"><a href="#mrregister-672"><span class="linenos">672</span></a>    <span class="k">if</span> <span class="n">linstage_optimiser_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-673"><a href="#mrregister-673"><span class="linenos">673</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-linstage.optimiser.default&quot;</span><span class="p">,</span> <span class="n">linstage_optimiser_default</span><span class="p">])</span>
</span><span id="mrregister-674"><a href="#mrregister-674"><span class="linenos">674</span></a>    <span class="k">if</span> <span class="n">linstage_diagnostics_prefix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-675"><a href="#mrregister-675"><span class="linenos">675</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-linstage.diagnostics.prefix&quot;</span><span class="p">,</span> <span class="n">linstage_diagnostics_prefix</span><span class="p">])</span>
</span><span id="mrregister-676"><a href="#mrregister-676"><span class="linenos">676</span></a>    <span class="k">if</span> <span class="n">nl_warp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-677"><a href="#mrregister-677"><span class="linenos">677</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">nl_warp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">execution</span><span class="p">))</span>
</span><span id="mrregister-678"><a href="#mrregister-678"><span class="linenos">678</span></a>    <span class="k">if</span> <span class="n">nl_warp_full</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-679"><a href="#mrregister-679"><span class="linenos">679</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-nl_warp_full&quot;</span><span class="p">,</span> <span class="n">nl_warp_full</span><span class="p">])</span>
</span><span id="mrregister-680"><a href="#mrregister-680"><span class="linenos">680</span></a>    <span class="k">if</span> <span class="n">nl_init</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-681"><a href="#mrregister-681"><span class="linenos">681</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-nl_init&quot;</span><span class="p">,</span> <span class="n">execution</span><span class="o">.</span><span class="n">input_file</span><span class="p">(</span><span class="n">nl_init</span><span class="p">)])</span>
</span><span id="mrregister-682"><a href="#mrregister-682"><span class="linenos">682</span></a>    <span class="k">if</span> <span class="n">nl_scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-683"><a href="#mrregister-683"><span class="linenos">683</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-nl_scale&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">nl_scale</span><span class="p">)])</span>
</span><span id="mrregister-684"><a href="#mrregister-684"><span class="linenos">684</span></a>    <span class="k">if</span> <span class="n">nl_niter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-685"><a href="#mrregister-685"><span class="linenos">685</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-nl_niter&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">nl_niter</span><span class="p">)])</span>
</span><span id="mrregister-686"><a href="#mrregister-686"><span class="linenos">686</span></a>    <span class="k">if</span> <span class="n">nl_update_smooth</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-687"><a href="#mrregister-687"><span class="linenos">687</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-nl_update_smooth&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">nl_update_smooth</span><span class="p">)])</span>
</span><span id="mrregister-688"><a href="#mrregister-688"><span class="linenos">688</span></a>    <span class="k">if</span> <span class="n">nl_disp_smooth</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-689"><a href="#mrregister-689"><span class="linenos">689</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-nl_disp_smooth&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">nl_disp_smooth</span><span class="p">)])</span>
</span><span id="mrregister-690"><a href="#mrregister-690"><span class="linenos">690</span></a>    <span class="k">if</span> <span class="n">nl_grad_step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-691"><a href="#mrregister-691"><span class="linenos">691</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-nl_grad_step&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">nl_grad_step</span><span class="p">)])</span>
</span><span id="mrregister-692"><a href="#mrregister-692"><span class="linenos">692</span></a>    <span class="k">if</span> <span class="n">nl_lmax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-693"><a href="#mrregister-693"><span class="linenos">693</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-nl_lmax&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">nl_lmax</span><span class="p">)])</span>
</span><span id="mrregister-694"><a href="#mrregister-694"><span class="linenos">694</span></a>    <span class="k">if</span> <span class="n">diagnostics_image</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-695"><a href="#mrregister-695"><span class="linenos">695</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-diagnostics_image&quot;</span><span class="p">,</span> <span class="n">diagnostics_image</span><span class="p">])</span>
</span><span id="mrregister-696"><a href="#mrregister-696"><span class="linenos">696</span></a>    <span class="k">if</span> <span class="n">directions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-697"><a href="#mrregister-697"><span class="linenos">697</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-directions&quot;</span><span class="p">,</span> <span class="n">execution</span><span class="o">.</span><span class="n">input_file</span><span class="p">(</span><span class="n">directions</span><span class="p">)])</span>
</span><span id="mrregister-698"><a href="#mrregister-698"><span class="linenos">698</span></a>    <span class="k">if</span> <span class="n">noreorientation</span><span class="p">:</span>
</span><span id="mrregister-699"><a href="#mrregister-699"><span class="linenos">699</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-noreorientation&quot;</span><span class="p">)</span>
</span><span id="mrregister-700"><a href="#mrregister-700"><span class="linenos">700</span></a>    <span class="k">if</span> <span class="n">mc_weights</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-701"><a href="#mrregister-701"><span class="linenos">701</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-mc_weights&quot;</span><span class="p">,</span> <span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">mc_weights</span><span class="p">)])</span>
</span><span id="mrregister-702"><a href="#mrregister-702"><span class="linenos">702</span></a>    <span class="k">if</span> <span class="n">datatype</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-703"><a href="#mrregister-703"><span class="linenos">703</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-datatype&quot;</span><span class="p">,</span> <span class="n">datatype</span><span class="p">])</span>
</span><span id="mrregister-704"><a href="#mrregister-704"><span class="linenos">704</span></a>    <span class="k">if</span> <span class="n">info</span><span class="p">:</span>
</span><span id="mrregister-705"><a href="#mrregister-705"><span class="linenos">705</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-info&quot;</span><span class="p">)</span>
</span><span id="mrregister-706"><a href="#mrregister-706"><span class="linenos">706</span></a>    <span class="k">if</span> <span class="n">quiet</span><span class="p">:</span>
</span><span id="mrregister-707"><a href="#mrregister-707"><span class="linenos">707</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-quiet&quot;</span><span class="p">)</span>
</span><span id="mrregister-708"><a href="#mrregister-708"><span class="linenos">708</span></a>    <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
</span><span id="mrregister-709"><a href="#mrregister-709"><span class="linenos">709</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-debug&quot;</span><span class="p">)</span>
</span><span id="mrregister-710"><a href="#mrregister-710"><span class="linenos">710</span></a>    <span class="k">if</span> <span class="n">force</span><span class="p">:</span>
</span><span id="mrregister-711"><a href="#mrregister-711"><span class="linenos">711</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-force&quot;</span><span class="p">)</span>
</span><span id="mrregister-712"><a href="#mrregister-712"><span class="linenos">712</span></a>    <span class="k">if</span> <span class="n">nthreads</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-713"><a href="#mrregister-713"><span class="linenos">713</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;-nthreads&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">nthreads</span><span class="p">)])</span>
</span><span id="mrregister-714"><a href="#mrregister-714"><span class="linenos">714</span></a>    <span class="k">if</span> <span class="n">config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-715"><a href="#mrregister-715"><span class="linenos">715</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">a</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">execution</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">config</span><span class="p">]</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">c</span><span class="p">])</span>
</span><span id="mrregister-716"><a href="#mrregister-716"><span class="linenos">716</span></a>    <span class="k">if</span> <span class="n">help_</span><span class="p">:</span>
</span><span id="mrregister-717"><a href="#mrregister-717"><span class="linenos">717</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-help&quot;</span><span class="p">)</span>
</span><span id="mrregister-718"><a href="#mrregister-718"><span class="linenos">718</span></a>    <span class="k">if</span> <span class="n">version</span><span class="p">:</span>
</span><span id="mrregister-719"><a href="#mrregister-719"><span class="linenos">719</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-version&quot;</span><span class="p">)</span>
</span><span id="mrregister-720"><a href="#mrregister-720"><span class="linenos">720</span></a>    <span class="n">cargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">execution</span><span class="o">.</span><span class="n">input_file</span><span class="p">(</span><span class="n">image1_image2</span><span class="p">))</span>
</span><span id="mrregister-721"><a href="#mrregister-721"><span class="linenos">721</span></a>    <span class="k">if</span> <span class="n">contrast1_contrast2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="mrregister-722"><a href="#mrregister-722"><span class="linenos">722</span></a>        <span class="n">cargs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">execution</span><span class="o">.</span><span class="n">input_file</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">contrast1_contrast2</span><span class="p">])</span>
</span><span id="mrregister-723"><a href="#mrregister-723"><span class="linenos">723</span></a>    <span class="n">ret</span> <span class="o">=</span> <span class="n">MrregisterOutputs</span><span class="p">(</span>
</span><span id="mrregister-724"><a href="#mrregister-724"><span class="linenos">724</span></a>        <span class="n">root</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">),</span>
</span><span id="mrregister-725"><a href="#mrregister-725"><span class="linenos">725</span></a>        <span class="n">rigid</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rigid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">rigid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-726"><a href="#mrregister-726"><span class="linenos">726</span></a>        <span class="n">rigid_1tomidway</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rigid_1tomidway</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">rigid_1tomidway</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-727"><a href="#mrregister-727"><span class="linenos">727</span></a>        <span class="n">rigid_2tomidway</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rigid_2tomidway</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">rigid_2tomidway</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-728"><a href="#mrregister-728"><span class="linenos">728</span></a>        <span class="n">rigid_log</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rigid_log</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">rigid_log</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-729"><a href="#mrregister-729"><span class="linenos">729</span></a>        <span class="n">affine</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">affine</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">affine</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-730"><a href="#mrregister-730"><span class="linenos">730</span></a>        <span class="n">affine_1tomidway</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">affine_1tomidway</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">affine_1tomidway</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-731"><a href="#mrregister-731"><span class="linenos">731</span></a>        <span class="n">affine_2tomidway</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">affine_2tomidway</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">affine_2tomidway</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-732"><a href="#mrregister-732"><span class="linenos">732</span></a>        <span class="n">affine_log</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">affine_log</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">affine_log</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-733"><a href="#mrregister-733"><span class="linenos">733</span></a>        <span class="n">nl_warp_full</span><span class="o">=</span><span class="n">execution</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">nl_warp_full</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">nl_warp_full</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-734"><a href="#mrregister-734"><span class="linenos">734</span></a>        <span class="n">transformed</span><span class="o">=</span><span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">outputs</span><span class="p">(</span><span class="n">execution</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">transformed</span><span class="p">]</span> <span class="k">if</span> <span class="n">transformed</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-735"><a href="#mrregister-735"><span class="linenos">735</span></a>        <span class="n">transformed_midway</span><span class="o">=</span><span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">outputs</span><span class="p">(</span><span class="n">execution</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">transformed_midway</span><span class="p">]</span> <span class="k">if</span> <span class="n">transformed_midway</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-736"><a href="#mrregister-736"><span class="linenos">736</span></a>        <span class="n">nl_warp</span><span class="o">=</span><span class="n">nl_warp</span><span class="o">.</span><span class="n">outputs</span><span class="p">(</span><span class="n">execution</span><span class="p">)</span> <span class="k">if</span> <span class="n">nl_warp</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="mrregister-737"><a href="#mrregister-737"><span class="linenos">737</span></a>    <span class="p">)</span>
</span><span id="mrregister-738"><a href="#mrregister-738"><span class="linenos">738</span></a>    <span class="n">execution</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">cargs</span><span class="p">)</span>
</span><span id="mrregister-739"><a href="#mrregister-739"><span class="linenos">739</span></a>    <span class="k">return</span> <span class="n">ret</span>
</span></pre></div>


            <div class="docstring"><p>mrregister by David Raffelt (david.raffelt@florey.edu.au) &amp; Max Pietsch
(maximilian.pietsch@kcl.ac.uk).</p>

<p>Register two images together using a symmetric rigid, affine or non-linear
transformation model.</p>

<p>By default this application will perform an affine, followed by non-linear
registration.</p>

<p>FOD registration (with apodised point spread reorientation) will be
performed by default if the number of volumes in the 4th dimension equals
the number of coefficients in an antipodally symmetric spherical harmonic
series (e.g. 6, 15, 28 etc). The -no_reorientation option can be used to
force reorientation off if required.</p>

<p>Non-linear registration computes warps to map from both image1->image2 and
image2->image1. Similar to Avants (2008) Med Image Anal. 12(1): 26–41,
registration is performed by matching both the image1 and image2 in a
'midway space'. Warps can be saved as two deformation fields that map
directly between image1->image2 and image2->image1, or if using
-nl_warp_full as a single 5D file that stores all 4 warps
image1->mid->image2, and image2->mid->image1. The 5D warp format stores
x,y,z deformations in the 4th dimension, and uses the 5th dimension to index
the 4 warps. The affine transforms estimated (to midway space) are also
stored as comments in the image header. The 5D warp file can be used to
reinitialise subsequent registrations, in addition to transforming images to
midway space (e.g. for intra-subject alignment in a 2-time-point
longitudinal analysis).</p>

<p>References:</p>

<ul>
<li>If FOD registration is being performed:
Raffelt, D.; Tournier, J.-D.; Fripp, J; Crozier, S.; Connelly, A. &amp; Salvado,
O. Symmetric diffeomorphic registration of fibre orientation distributions.
NeuroImage, 2011, 56(3), 1171-1180</li>
</ul>

<p>Raffelt, D.; Tournier, J.-D.; Crozier, S.; Connelly, A. &amp; Salvado, O.
Reorientation of fiber orientation distributions using apodized point spread
functions. Magnetic Resonance in Medicine, 2012, 67, 844-855.</p>

<p>More information:
<a href="https://mrtrix.readthedocs.io/en/latest/reference/commands/mrregister.html">https://mrtrix.readthedocs.io/en/latest/reference/commands/mrregister.html</a></p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>image1_image2:</strong>  input image 1 ('moving') and input image 2 ('template').</li>
<li><strong>contrast1_contrast2:</strong>  optional list of additional input images used as            additional contrasts. Can be used multiple times. contrastX and imageX            must share the same coordinate system.</li>
<li><strong>type_:</strong>  the registration type. Valid choices are: rigid, affine,            nonlinear, rigid_affine, rigid_nonlinear, affine_nonlinear,            rigid_affine_nonlinear (Default: affine_nonlinear).</li>
<li><strong>transformed:</strong>  image1 after registration transformed and regridded to the            space of image2. Note that -transformed needs to be repeated for each            contrast if multi-contrast registration is used.</li>
<li><strong>transformed_midway:</strong>  image1 and image2 after registration transformed            and regridded to the midway space. Note that -transformed_midway needs            to be repeated for each contrast if multi-contrast registration is            used.</li>
<li><strong>mask1:</strong>  a mask to define the region of image1 to use for optimisation.</li>
<li><strong>mask2:</strong>  a mask to define the region of image2 to use for optimisation.</li>
<li><strong>nan:</strong>  use NaN as out of bounds value. (Default: 0.0).</li>
<li><strong>rigid:</strong>  the output text file containing the rigid transformation as a            4x4 matrix.</li>
<li><strong>rigid_1tomidway:</strong>  the output text file containing the rigid            transformation that aligns image1 to image2 in their common midway            space as a 4x4 matrix.</li>
<li><strong>rigid_2tomidway:</strong>  the output text file containing the rigid            transformation that aligns image2 to image1 in their common midway            space as a 4x4 matrix.</li>
<li><strong>rigid_init_translation:</strong>  initialise the translation and centre of            rotation            Valid choices are:            mass (aligns the centers of mass of both images, default),            geometric (aligns geometric image centres) and none.</li>
<li><strong>rigid_init_rotation:</strong>  initialise the rotation Valid choices are:            search (search for the best rotation using mean squared residuals),            moments (rotation based on directions of intensity variance with            respect to centre of mass),            none (default).</li>
<li><strong>rigid_init_matrix:</strong>  initialise either the rigid, affine, or syn            registration with the supplied rigid transformation (as a 4x4 matrix in            scanner coordinates). Note that this overrides rigid_init_translation            and rigid_init_rotation initialisation.</li>
<li><strong>rigid_scale:</strong>  use a multi-resolution scheme by defining a scale factor            for each level using comma separated values (Default: 0.25,0.5,1.0).</li>
<li><strong>rigid_niter:</strong>  the maximum number of gradient descent iterations per            stage. This can be specified either as a single number for all            multi-resolution levels, or a single value for each level. (Default:            1000).</li>
<li><strong>rigid_metric:</strong>  valid choices are: diff (intensity differences), Default:            diff.</li>
<li><strong>rigid_metric_diff_estimator:</strong>  Valid choices are: l1 (least absolute:            |x|), l2 (ordinary least squares), lp (least powers: |x|^1.2), Default:            l2.</li>
<li><strong>rigid_lmax:</strong>  explicitly set the lmax to be used per scale factor in            rigid FOD registration. By default FOD registration will use lmax 0,2,4            with default scale factors 0.25,0.5,1.0 respectively. Note that no            reorientation will be performed with lmax = 0.</li>
<li><strong>rigid_log:</strong>  write gradient descent parameter evolution to log file.</li>
<li><strong>affine:</strong>  the output text file containing the affine transformation as a            4x4 matrix.</li>
<li><strong>affine_1tomidway:</strong>  the output text file containing the affine            transformation that aligns image1 to image2 in their common midway            space as a 4x4 matrix.</li>
<li><strong>affine_2tomidway:</strong>  the output text file containing the affine            transformation that aligns image2 to image1 in their common midway            space as a 4x4 matrix.</li>
<li><strong>affine_init_translation:</strong>  initialise the translation and centre of            rotation            Valid choices are:            mass (aligns the centers of mass of both images),            geometric (aligns geometric image centres) and none. (Default:            mass).</li>
<li><strong>affine_init_rotation:</strong>  initialise the rotation Valid choices are:            search (search for the best rotation using mean squared residuals),            moments (rotation based on directions of intensity variance with            respect to centre of mass),            none (Default: none).</li>
<li><strong>affine_init_matrix:</strong>  initialise either the affine, or syn registration            with the supplied affine transformation (as a 4x4 matrix in scanner            coordinates). Note that this overrides affine_init_translation and            affine_init_rotation initialisation.</li>
<li><strong>affine_scale:</strong>  use a multi-resolution scheme by defining a scale factor            for each level using comma separated values (Default: 0.25,0.5,1.0).</li>
<li><strong>affine_niter:</strong>  the maximum number of gradient descent iterations per            stage. This can be specified either as a single number for all            multi-resolution levels, or a single value for each level. (Default:            1000).</li>
<li><strong>affine_metric:</strong>  valid choices are: diff (intensity differences),            Default: diff.</li>
<li><strong>affine_metric_diff_estimator:</strong>  Valid choices are: l1 (least absolute:            |x|), l2 (ordinary least squares), lp (least powers: |x|^1.2), Default:            l2.</li>
<li><strong>affine_lmax:</strong>  explicitly set the lmax to be used per scale factor in            affine FOD registration. By default FOD registration will use lmax            0,2,4 with default scale factors 0.25,0.5,1.0 respectively. Note that            no reorientation will be performed with lmax = 0.</li>
<li><strong>affine_log:</strong>  write gradient descent parameter evolution to log file.</li>
<li><strong>init_translation_unmasked1:</strong>  disregard mask1 for the translation            initialisation (affects 'mass').</li>
<li><strong>init_translation_unmasked2:</strong>  disregard mask2 for the translation            initialisation (affects 'mass').</li>
<li><strong>init_rotation_unmasked1:</strong>  disregard mask1 for the rotation            initialisation (affects 'search' and 'moments').</li>
<li><strong>init_rotation_unmasked2:</strong>  disregard mask2 for the rotation            initialisation (affects 'search' and 'moments').</li>
<li><strong>init_rotation_search_angles:</strong>  rotation angles for the local search in            degrees between 0 and 180. (Default: 2,5,10,15,20).</li>
<li><strong>init_rotation_search_scale:</strong>  relative size of the images used for the            rotation search. (Default: 0.15).</li>
<li><strong>init_rotation_search_directions:</strong>  number of rotation axis for local            search. (Default: 250).</li>
<li><strong>init_rotation_search_run_global:</strong>  perform a global search. (Default:            local).</li>
<li><strong>init_rotation_search_global_iterations:</strong>  number of rotations to            investigate (Default: 10000).</li>
<li><strong>linstage_iterations:</strong>  number of iterations for each registration stage,            not to be confused with -rigid_niter or -affine_niter. This can be used            to generate intermediate diagnostics images            (-linstage.diagnostics.prefix) or to change the cost function optimiser            during registration (without the need to repeatedly resize the images).            (Default: 1 == no repetition).</li>
<li><strong>linstage_optimiser_first:</strong>  Cost function optimisation algorithm to use            at first iteration of all stages. Valid choices: bbgd (Barzilai-Borwein            gradient descent) or gd (simple gradient descent). (Default: bbgd).</li>
<li><strong>linstage_optimiser_last:</strong>  Cost function optimisation algorithm to use at            last iteration of all stages (if there are more than one). Valid            choices: bbgd (Barzilai-Borwein gradient descent) or gd (simple            gradient descent). (Default: bbgd).</li>
<li><strong>linstage_optimiser_default:</strong>  Cost function optimisation algorithm to use            at any stage iteration other than first or last iteration. Valid            choices: bbgd (Barzilai-Borwein gradient descent) or gd (simple            gradient descent). (Default: bbgd).</li>
<li><strong>linstage_diagnostics_prefix:</strong>  generate diagnostics images after every            registration stage.</li>
<li><strong>nl_warp:</strong>  the non-linear warp output defined as two deformation fields,            where warp1 can be used to transform image1->image2 and warp2 to            transform image2->image1. The deformation fields also encapsulate any            linear transformation estimated prior to non-linear registration.</li>
<li><strong>nl_warp_full:</strong>  output all warps used during registration. This saves            four different warps that map each image to a midway space and their            inverses in a single 5D image file. The 4th image dimension indexes the            x,y,z component of the deformation vector and the 5th dimension indexes            the field in this order: image1->midway, midway->image1,            image2->midway, midway->image2. Where image1->midway defines the field            that maps image1 onto the midway space using the reverse convention            When linear registration is performed first, the estimated linear            transform will be included in the comments of the image header, and            therefore the entire linear and non-linear transform can be applied (in            either direction) using this output warp file with mrtransform.</li>
<li><strong>nl_init:</strong>  initialise the non-linear registration with the supplied warp            image. The supplied warp must be in the same format as output using the            -nl_warp_full option (i.e. have 4 deformation fields with the linear            transforms in the image header).</li>
<li><strong>nl_scale:</strong>  use a multi-resolution scheme by defining a scale factor for            each level using comma separated values (Default: 0.25,0.5,1.0).</li>
<li><strong>nl_niter:</strong>  the maximum number of iterations. This can be specified            either as a single number for all multi-resolution levels, or a single            value for each level. (Default: 50).</li>
<li><strong>nl_update_smooth:</strong>  regularise the gradient update field with Gaussian            smoothing (standard deviation in voxel units, Default 2.0).</li>
<li><strong>nl_disp_smooth:</strong>  regularise the displacement field with Gaussian            smoothing (standard deviation in voxel units, Default 1.0).</li>
<li><strong>nl_grad_step:</strong>  the gradient step size for non-linear registration            (Default: 0.5).</li>
<li><strong>nl_lmax:</strong>  explicitly set the lmax to be used per scale factor in            non-linear FOD registration. By default FOD registration will use lmax            0,2,4 with default scale factors 0.25,0.5,1.0 respectively. Note that            no reorientation will be performed with lmax = 0.</li>
<li><strong>diagnostics_image:</strong>  write intermediate images for diagnostics purposes.</li>
<li><strong>directions:</strong>  the directions used for FOD reorientation using apodised            point spread functions (Default: 60 directions).</li>
<li><strong>noreorientation:</strong>  turn off FOD reorientation. Reorientation is on by            default if the number of volumes in the 4th dimension corresponds to            the number of coefficients in an antipodally symmetric spherical            harmonic series (i.e. 6, 15, 28, 45, 66 etc).</li>
<li><strong>mc_weights:</strong>  relative weight of images used for multi-contrast            registration. Default: 1.0 (equal weighting).</li>
<li><strong>datatype:</strong>  specify output image data type. Valid choices are: float32,            float32le, float32be, float64, float64le, float64be, int64, uint64,            int64le, uint64le, int64be, uint64be, int32, uint32, int32le, uint32le,            int32be, uint32be, int16, uint16, int16le, uint16le, int16be, uint16be,            cfloat32, cfloat32le, cfloat32be, cfloat64, cfloat64le, cfloat64be,            int8, uint8, bit.</li>
<li><strong>info:</strong>  display information messages.</li>
<li><strong>quiet:</strong>  do not display information messages or progress status;            alternatively, this can be achieved by setting the MRTRIX_QUIET            environment variable to a non-empty string.</li>
<li><strong>debug:</strong>  display debugging messages.</li>
<li><strong>force:</strong>  force overwrite of output files (caution: using the same file as            input and output might cause unexpected behaviour).</li>
<li><strong>nthreads:</strong>  use this number of threads in multi-threaded applications            (set to 0 to disable multi-threading).</li>
<li><strong>config:</strong>  temporarily set the value of an MRtrix config file entry.</li>
<li><strong>help_:</strong>  display this information page and exit.</li>
<li><strong>version:</strong>  display version information and exit.</li>
<li><strong>runner:</strong>  Command runner.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>NamedTuple of outputs (described in <code><a href="#MrregisterOutputs">MrregisterOutputs</a></code>).</p>
</blockquote>
</div>


                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>